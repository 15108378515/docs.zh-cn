---
title: "将 ASP.NET Web 服务迁移到 WCF"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 1adbb931-f0b1-47f3-9caf-169e4edc9907
caps.latest.revision: "9"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: e2051de2c0cef9a31337b320c347bb7d85dbadae
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/21/2017
---
# <a name="migrating-aspnet-web-services-to-wcf"></a><span data-ttu-id="49261-102">将 ASP.NET Web 服务迁移到 WCF</span><span class="sxs-lookup"><span data-stu-id="49261-102">Migrating ASP.NET Web Services to WCF</span></span>
<span data-ttu-id="49261-103">ASP.NET 提供 .NET Framework 类库和工具以用于生成 Web 服务，并提供用于在 Internet Information Services (IIS) 内承载服务的功能。</span><span class="sxs-lookup"><span data-stu-id="49261-103">ASP.NET provides .NET Framework class libraries and tools for building Web services, as well as facilities for hosting services within Internet Information Services (IIS).</span></span> [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]<span data-ttu-id="49261-104"> 提供了 .NET Framework 类库、工具和承载功能，使软件实体可以使用任何协议（包括 Web 服务使用的协议）进行通信。</span><span class="sxs-lookup"><span data-stu-id="49261-104"> provides .NET Framework class libraries, tools and hosting facilities for enabling software entities to communicate using any protocols, including those used by Web services.</span></span>  <span data-ttu-id="49261-105">将 ASP.NET Web 服务迁移到 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 可以让应用程序充分利用 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 特有的新功能和改进。</span><span class="sxs-lookup"><span data-stu-id="49261-105">Migrating ASP.NET Web Services to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] allows your applications to take advantage of new features and improvements that are unique to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span>  
  
 <span data-ttu-id="49261-106">对于 ASP.NET Web 服务，[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 具有多个重要优势。</span><span class="sxs-lookup"><span data-stu-id="49261-106">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] has several important advantages relative to ASP.NET Web services.</span></span> <span data-ttu-id="49261-107">ASP.NET Web 服务工具仅用于生成 Web 服务，如果必须使软件实体之间相互通信，则可以使用 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 提供的工具。</span><span class="sxs-lookup"><span data-stu-id="49261-107">While ASP.NET Web services tools are solely for building Web services, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides tools that can be used when software entities must be made to communicate with one another.</span></span> <span data-ttu-id="49261-108">这会减少开发人员为适应不同软件通信方案而必需了解的技术的数量，从而降低软件开发资源的成本及完成软件开发项目所需的时间。</span><span class="sxs-lookup"><span data-stu-id="49261-108">This will reduce the number of technologies that developers are required to know in order to accommodate different software communication scenarios, which in turn will reduce the cost of software development resources, as well as the time to complete software development projects.</span></span>  
  
 <span data-ttu-id="49261-109">即使对于 Web 服务开发项目，[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 支持的 Web 服务协议也比 ASP.NET Web 服务支持的协议多。</span><span class="sxs-lookup"><span data-stu-id="49261-109">Even for Web service development projects, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] supports more Web service protocols than ASP.NET Web services support.</span></span> <span data-ttu-id="49261-110">这些附加协议提供更完善的解决方案，涉及可靠会话和事务等其他内容。</span><span class="sxs-lookup"><span data-stu-id="49261-110">These additional protocols provide for more sophisticated solutions involving, amongst other things, reliable sessions and transactions.</span></span>  
  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="49261-111"> 支持的消息传输协议比 ASP.NET Web 服务支持的协议更多。</span><span class="sxs-lookup"><span data-stu-id="49261-111"> supports more protocols for transporting messages than ASP.NET Web services.</span></span> <span data-ttu-id="49261-112">ASP.NET Web 服务仅支持使用超文本传输协议 (HTTP) 发送消息。</span><span class="sxs-lookup"><span data-stu-id="49261-112">ASP.NET Web services only support sending messages by using the Hypertext Transfer Protocol (HTTP).</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="49261-113"> 支持通过使用 HTTP、传输控制协议 (TCP)、命名管道和 Microsoft 消息队列 (MSMQ) 来发送消息。</span><span class="sxs-lookup"><span data-stu-id="49261-113"> supports sending messages by using HTTP, as well as the Transmission Control Protocol (TCP), named pipes, and Microsoft Message Queuing (MSMQ).</span></span> <span data-ttu-id="49261-114">更重要的是，可以扩展 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 以支持其他传输协议。</span><span class="sxs-lookup"><span data-stu-id="49261-114">More important, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] can be extended to support additional transport protocols.</span></span> <span data-ttu-id="49261-115">因此，使用 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 开发的软件适合于与更广泛的其他软件一起使用，从而提高潜在的投资回报。</span><span class="sxs-lookup"><span data-stu-id="49261-115">Therefore, software developed using [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] can be adapted to work together with a wider variety of other software, thereby increasing the potential return on the investment.</span></span>  
  
 <span data-ttu-id="49261-116">与 ASP.NET Web 服务相比，[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 提供的用于部署和管理应用程序的工具要多得多。</span><span class="sxs-lookup"><span data-stu-id="49261-116">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides much richer facilities for deploying and managing applications than ASP.NET Web services provides.</span></span> <span data-ttu-id="49261-117">除了 ASP.NET 也具有的配置系统外，[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 还提供配置编辑器、通过任意数目的媒介在发送方和接收方之间来回进行的活动跟踪、跟踪查看器、消息日志记录、大量性能计数器和对 Windows Management Instrumentation 的支持。</span><span class="sxs-lookup"><span data-stu-id="49261-117">In addition to a configuration system, which ASP.NET also has, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] offers a configuration editor, activity tracing from senders to receivers and back through any number of intermediaries, a trace viewer, message logging, a vast number of performance counters, and support for Windows Management Instrumentation.</span></span>  
  
 <span data-ttu-id="49261-118">对于 ASP.NET Web 服务，[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 具有这些潜在的好处，如果您正在使用或正在考虑使用 ASP.NET Web 服务，您可以进行以下几种选择：</span><span class="sxs-lookup"><span data-stu-id="49261-118">Given these potential benefits of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] relative to ASP.NET Web services, if you are using, or are considering using ASP.NET Web services you have several options:</span></span>  
  
-   <span data-ttu-id="49261-119">继续使用 ASP.NET Web 服务，放弃 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 提供的好处。</span><span class="sxs-lookup"><span data-stu-id="49261-119">Continue to use ASP.NET Web services, and forego the benefits proffered by [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span>  
  
-   <span data-ttu-id="49261-120">继续使用 ASP.NET Web 服务，并打算在未来的某时采用 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="49261-120">Keep using ASP.NET Web services with the intention of adopting [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] at some time in the future.</span></span> <span data-ttu-id="49261-121">本节中的主题说明如何最大化与未来 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 应用程序一起使用新 ASP.NET Web 服务应用程序的前景。</span><span class="sxs-lookup"><span data-stu-id="49261-121">The topics in this section explain how to maximize the prospects for being able to use new ASP.NET Web service applications together with future [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] applications.</span></span> <span data-ttu-id="49261-122">本节中的主题还说明如何生成新的 ASP.NET Web 服务以便于将这些服务迁移到 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="49261-122">The topics in this section also explain how to build new ASP.NET Web services so as to make it easier to migrate them to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span> <span data-ttu-id="49261-123">不过，如果必须要保证服务的安全，或者需要可靠性或事务保证，或者必须构造自定义管理工具，则最好选择采用 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="49261-123">However, if securing the services is important, or reliability or transaction assurances are required, or if custom management facilities will have to be constructed, then it is a better option to adopt [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="49261-124"> 正是为这样的方案而设计的。</span><span class="sxs-lookup"><span data-stu-id="49261-124"> is designed for precisely such scenarios.</span></span>  
  
-   <span data-ttu-id="49261-125">采用 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 以进行新开发，同时继续保持现有的 ASP.NET Web 服务应用程序。</span><span class="sxs-lookup"><span data-stu-id="49261-125">Adopt [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] for new development, while continuing to maintain your existing ASP.NET Web service applications.</span></span> <span data-ttu-id="49261-126">这种选择很可能是最佳选择。</span><span class="sxs-lookup"><span data-stu-id="49261-126">This choice is very likely the optimal one.</span></span> <span data-ttu-id="49261-127">它提供 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 的好处，同时可节省修改现有应用程序的成本。</span><span class="sxs-lookup"><span data-stu-id="49261-127">It yields the benefits of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], while sparing the cost of modifying the existing applications to use it.</span></span> <span data-ttu-id="49261-128">在这种方案中，新的 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 应用程序可以与现有 ASP.NET 应用程序共存。</span><span class="sxs-lookup"><span data-stu-id="49261-128">In this scenario, new [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] applications can co-exist with existing ASP.NET applications.</span></span> <span data-ttu-id="49261-129">新 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 应用程序将能够使用现有的 ASP.NET Web 服务，并且可以借助于 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] ASP.NET 兼容模式使用 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 将新操作功能编程到现有的 ASP.NET 应用程序中。</span><span class="sxs-lookup"><span data-stu-id="49261-129">New [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] applications will be able to use existing ASP.NET Web services, and [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] can be used to program new operational capabilities into existing ASP.NET applications by virtue of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] ASP.NET compatibility mode.</span></span>  
  
-   <span data-ttu-id="49261-130">采用 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 并将现有 ASP.NET Web 服务应用程序迁移到 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="49261-130">Adopt [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] and migrate existing ASP.NET Web service applications to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span> <span data-ttu-id="49261-131">您可以选择此选项以增强现有的应用程序，使其具有 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 提供的功能，或者在新的、功能更强大的 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 应用程序中重现现有 ASP.NET Web 服务的功能。</span><span class="sxs-lookup"><span data-stu-id="49261-131">You may choose this option to enhance the existing applications with features provided by [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], or to reproduce the functionality of existing ASP.NET Web services within new, more powerful [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] applications.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="49261-132">如果 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 服务由 IIS 5.x 承载，则在卸载 ASP.NET 时必须小心。</span><span class="sxs-lookup"><span data-stu-id="49261-132">Care must be taken if a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service is hosted by IIS 5.x and ASP.NET is uninstalled.</span></span> <span data-ttu-id="49261-133">如果 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 服务由 IIS 5.x 承载，则在卸载 ASP.NET 时，可能会请求该服务的代码。</span><span class="sxs-lookup"><span data-stu-id="49261-133">When a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service is hosted by IIS 5.x, the code for the service can be requested if ASP.NET is uninstalled.</span></span> <span data-ttu-id="49261-134">在已卸载 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 的情况下，在运行 IIS 5.x 的操作系统上卸载 ASP.NET 时，会将带有 .svc 扩展名的文件视为文本文件，其内容（包括任何源代码）会返回给请求者。</span><span class="sxs-lookup"><span data-stu-id="49261-134">When ASP.NET is uninstalled on an operating system that is running IIS 5.x and [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is uninstalled, a file with the .svc extension is considered a text file and the contents, including any source code, is returned to the requester.</span></span>  
  
 <span data-ttu-id="49261-135">本节详细说明这些选项，将 ASP.NET Web 服务与 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 进行对比，并提供有关如何将 ASP.NET Web 服务代码迁移到 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 的说明。</span><span class="sxs-lookup"><span data-stu-id="49261-135">This section describes these options in detail, compares ASP.NET Web Services to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] and provides instructions on how to migrate your ASP.NET Web Services code to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="49261-136">另请参阅</span><span class="sxs-lookup"><span data-stu-id="49261-136">See Also</span></span>  
 [<span data-ttu-id="49261-137">Windows Communication Foundation 使用展望： 使未来迁移轻而易举</span><span class="sxs-lookup"><span data-stu-id="49261-137">Anticipating Adopting the Windows Communication Foundation: Easing Future Migration</span></span>](../../../../docs/framework/wcf/feature-details/anticipating-adopting-wcf-migration.md)  
 [<span data-ttu-id="49261-138">预期采用 Windows Communication Foundation： 便于以后集成</span><span class="sxs-lookup"><span data-stu-id="49261-138">Anticipating Adopting the Windows Communication Foundation: Easing Future Integration</span></span>](../../../../docs/framework/wcf/feature-details/anticipating-adopting-the-wcf-easing-future-integration.md)  
 [<span data-ttu-id="49261-139">采用 Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="49261-139">Adopting Windows Communication Foundation</span></span>](../../../../docs/framework/wcf/feature-details/adopting-wcf.md)  
 [<span data-ttu-id="49261-140">WCF 基于目标和使用的标准比较 ASP.NET Web 服务与</span><span class="sxs-lookup"><span data-stu-id="49261-140">Comparing ASP.NET Web Services to WCF Based on Purpose and Standards Used</span></span>](../../../../docs/framework/wcf/feature-details/comparing-aspnet-web-services-to-wcf-based-on-purpose-and-standards-used.md)  
 [<span data-ttu-id="49261-141">比较 ASP.NET Web 服务与 WCF 开发的角度</span><span class="sxs-lookup"><span data-stu-id="49261-141">Comparing ASP.NET Web Services to WCF Based on Development</span></span>](../../../../docs/framework/wcf/feature-details/comparing-aspnet-web-services-to-wcf-based-on-development.md)
