---
title: WindowsFormsHost 元素的布局注意事项
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-wpf
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- Windows Forms [WPF], interoperability with
- Windows Forms [WPF], WPF interoperation
- interoperability [WPF], Windows Forms
- WindowsFormsHost element layout considerations [WPF]
- dynamic layout [WPF interoperability]
- device-independent pixels
ms.assetid: 3c574597-bbde-440f-95cc-01371f1a5d9d
caps.latest.revision: 20
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: b915d3cdaebc862534c2ba6bd006d3b447e2a651
ms.sourcegitcommit: 2042de78fcdceebb6b8ac4b7a292b93e8782cbf5
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/27/2018
---
# <a name="layout-considerations-for-the-windowsformshost-element"></a><span data-ttu-id="2bc17-102">WindowsFormsHost 元素的布局注意事项</span><span class="sxs-lookup"><span data-stu-id="2bc17-102">Layout Considerations for the WindowsFormsHost Element</span></span>
<span data-ttu-id="2bc17-103">本主题介绍如何<xref:System.Windows.Forms.Integration.WindowsFormsHost>与交互元素[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]布局系统。</span><span class="sxs-lookup"><span data-stu-id="2bc17-103">This topic describes how the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element interacts with the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layout system.</span></span>  
  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="2bc17-104"> 和[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]支持不同，但类似的逻辑大小和位置上窗体或页面的元素。</span><span class="sxs-lookup"><span data-stu-id="2bc17-104"> and [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] support different, but similar, logic for sizing and positioning elements on a form or page.</span></span> <span data-ttu-id="2bc17-105">当你创建混合用户界面 (UI) 承载[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]中控制[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]、<xref:System.Windows.Forms.Integration.WindowsFormsHost>元素集成两种布局方案。</span><span class="sxs-lookup"><span data-stu-id="2bc17-105">When you create a hybrid user interface (UI) that hosts [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] controls in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element integrates the two layout schemes.</span></span>  
  
## <a name="differences-in-layout-between-wpf-and-windows-forms"></a><span data-ttu-id="2bc17-106">WPF 和 Windows 窗体之间的布局差异</span><span class="sxs-lookup"><span data-stu-id="2bc17-106">Differences in Layout Between WPF and Windows Forms</span></span>  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="2bc17-107"> 使用独立于解析的布局。</span><span class="sxs-lookup"><span data-stu-id="2bc17-107"> uses resolution-independent layout.</span></span> <span data-ttu-id="2bc17-108">所有[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]布局维度使用指定*设备无关的像素*。</span><span class="sxs-lookup"><span data-stu-id="2bc17-108">All [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layout dimensions are specified using *device-independent pixels*.</span></span> <span data-ttu-id="2bc17-109">独立于设备的像素是在大小和分辨率无关英寸的 96，因此获取无论您 72 dpi 监视器或 19200 dpi 打印机上呈现，均类似的结果。</span><span class="sxs-lookup"><span data-stu-id="2bc17-109">A device-independent pixel is one ninety-sixth of an inch in size and resolution-independent, so you get similar results regardless of whether you are rendering to a 72-dpi monitor or a 19,200-dpi printer.</span></span>  
  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="2bc17-110"> 此外基于*动态布局*。</span><span class="sxs-lookup"><span data-stu-id="2bc17-110"> is also based on *dynamic layout*.</span></span> <span data-ttu-id="2bc17-111">这意味着 UI 元素会在窗体或根据其内容、 其父布局容器和可用的屏幕大小的页面上排列本身。</span><span class="sxs-lookup"><span data-stu-id="2bc17-111">This means that a UI element arranges itself on a form or page according to its content, its parent layout container, and the available screen size.</span></span> <span data-ttu-id="2bc17-112">动态布局协助进行本地化，通过它们所包含的字符串改变长度时自动调整大小和 UI 元素的位置。</span><span class="sxs-lookup"><span data-stu-id="2bc17-112">Dynamic layout facilitates localization by automatically adjusting the size and position of UI elements when the strings they contain change length.</span></span>  
  
 <span data-ttu-id="2bc17-113">中的布局[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]是设备相关，很可能是静态的。</span><span class="sxs-lookup"><span data-stu-id="2bc17-113">Layout in [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] is device-dependent and more likely to be static.</span></span> <span data-ttu-id="2bc17-114">通常情况下，[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]控件绝对方式来定位使用硬件以像素为单位的维度的窗体上。</span><span class="sxs-lookup"><span data-stu-id="2bc17-114">Typically, [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] controls are positioned absolutely on a form using dimensions specified in hardware pixels.</span></span> <span data-ttu-id="2bc17-115">但是，[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]支持某些动态布局功能下, 表中进行了总结。</span><span class="sxs-lookup"><span data-stu-id="2bc17-115">However, [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] does support some dynamic layout features, as summarized in the following table.</span></span>  
  
|<span data-ttu-id="2bc17-116">布局功能</span><span class="sxs-lookup"><span data-stu-id="2bc17-116">Layout feature</span></span>|<span data-ttu-id="2bc17-117">描述</span><span class="sxs-lookup"><span data-stu-id="2bc17-117">Description</span></span>|  
|--------------------|-----------------|  
|<span data-ttu-id="2bc17-118">自动调整大小</span><span class="sxs-lookup"><span data-stu-id="2bc17-118">Autosizing</span></span>|<span data-ttu-id="2bc17-119">某些[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]控件调整大小以正确显示其内容。</span><span class="sxs-lookup"><span data-stu-id="2bc17-119">Some [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] controls resize themselves to display their contents properly.</span></span> <span data-ttu-id="2bc17-120">有关详细信息，请参阅[AutoSize 属性概述](../../../../docs/framework/winforms/controls/autosize-property-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="2bc17-120">For more information, see [AutoSize Property Overview](../../../../docs/framework/winforms/controls/autosize-property-overview.md).</span></span>|  
|<span data-ttu-id="2bc17-121">锚定和停靠</span><span class="sxs-lookup"><span data-stu-id="2bc17-121">Anchoring and docking</span></span>|[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]<span data-ttu-id="2bc17-122"> 控件支持定位和基于父容器的大小。</span><span class="sxs-lookup"><span data-stu-id="2bc17-122"> controls support positioning and sizing based on the parent container.</span></span> <span data-ttu-id="2bc17-123">有关详细信息，请参阅 <xref:System.Windows.Forms.Control.Anchor%2A?displayProperty=nameWithType> 和 <xref:System.Windows.Forms.Control.Dock%2A?displayProperty=nameWithType>。</span><span class="sxs-lookup"><span data-stu-id="2bc17-123">For more information, see <xref:System.Windows.Forms.Control.Anchor%2A?displayProperty=nameWithType> and <xref:System.Windows.Forms.Control.Dock%2A?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="2bc17-124">自动缩放</span><span class="sxs-lookup"><span data-stu-id="2bc17-124">Autoscaling</span></span>|<span data-ttu-id="2bc17-125">容器控件来调整自身其子根据输出设备或的大小，以像素为单位，默认容器字体的分辨率。</span><span class="sxs-lookup"><span data-stu-id="2bc17-125">Container controls resize themselves and their children based on the resolution of the output device or the size, in pixels, of the default container font.</span></span> <span data-ttu-id="2bc17-126">有关详细信息，请参阅[Windows 窗体中的自动缩放](../../../../docs/framework/winforms/automatic-scaling-in-windows-forms.md)。</span><span class="sxs-lookup"><span data-stu-id="2bc17-126">For more information, see [Automatic Scaling in Windows Forms](../../../../docs/framework/winforms/automatic-scaling-in-windows-forms.md).</span></span>|  
|<span data-ttu-id="2bc17-127">布局容器</span><span class="sxs-lookup"><span data-stu-id="2bc17-127">Layout containers</span></span>|<span data-ttu-id="2bc17-128"><xref:System.Windows.Forms.FlowLayoutPanel>和<xref:System.Windows.Forms.TableLayoutPanel>控件排列及其子控件，并根据其内容调整大小。</span><span class="sxs-lookup"><span data-stu-id="2bc17-128">The <xref:System.Windows.Forms.FlowLayoutPanel> and <xref:System.Windows.Forms.TableLayoutPanel> controls arrange their child controls and size themselves according to their contents.</span></span>|  
  
## <a name="layout-limitations"></a><span data-ttu-id="2bc17-129">布局限制</span><span class="sxs-lookup"><span data-stu-id="2bc17-129">Layout Limitations</span></span>  
 <span data-ttu-id="2bc17-130">一般情况下，[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]不能缩放控件，并将其转换为中可能的范围[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="2bc17-130">In general, [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] controls cannot be scaled and transformed to the extent possible in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="2bc17-131">以下列表介绍的已知的限制时<xref:System.Windows.Forms.Integration.WindowsFormsHost>元素尝试将集成其托管[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]控制[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]布局系统。</span><span class="sxs-lookup"><span data-stu-id="2bc17-131">The following list describes the known limitations when the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element attempts to integrate its hosted [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] control into the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layout system.</span></span>  
  
-   <span data-ttu-id="2bc17-132">某些情况下，不能调整 [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] 控件的大小，或者大小只能调整为特定尺寸。</span><span class="sxs-lookup"><span data-stu-id="2bc17-132">In some cases, [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] controls cannot be resized, or can be sized only to specific dimensions.</span></span> <span data-ttu-id="2bc17-133">例如， [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] <xref:System.Windows.Forms.ComboBox>控件支持仅单个高度由控件的字体大小定义。</span><span class="sxs-lookup"><span data-stu-id="2bc17-133">For example, a [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] <xref:System.Windows.Forms.ComboBox> control supports only a single height, which is defined by the control's font size.</span></span> <span data-ttu-id="2bc17-134">在[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]其中元素可以拉伸垂直，一个承载的动态布局<xref:System.Windows.Forms.ComboBox>控件不会按预期方式拉伸。</span><span class="sxs-lookup"><span data-stu-id="2bc17-134">In a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] dynamic layout where elements can stretch vertically, a hosted <xref:System.Windows.Forms.ComboBox> control will not stretch as expected.</span></span>  
  
-   <span data-ttu-id="2bc17-135">不能旋转或扭曲 [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] 控件。</span><span class="sxs-lookup"><span data-stu-id="2bc17-135">[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] controls cannot be rotated or skewed.</span></span> <span data-ttu-id="2bc17-136"><xref:System.Windows.Forms.Integration.WindowsFormsHost>元素引发<xref:System.Windows.Forms.Integration.WindowsFormsHost.LayoutError>事件，如果将应用扭曲或旋转转换。</span><span class="sxs-lookup"><span data-stu-id="2bc17-136">The <xref:System.Windows.Forms.Integration.WindowsFormsHost> element raises the <xref:System.Windows.Forms.Integration.WindowsFormsHost.LayoutError> event if you apply a skew or rotation transformation.</span></span> <span data-ttu-id="2bc17-137">如果不处理<xref:System.Windows.Forms.Integration.WindowsFormsHost.LayoutError>事件，<xref:System.InvalidOperationException>引发。</span><span class="sxs-lookup"><span data-stu-id="2bc17-137">If you do not handle the <xref:System.Windows.Forms.Integration.WindowsFormsHost.LayoutError> event, an <xref:System.InvalidOperationException> is raised.</span></span>  
  
-   <span data-ttu-id="2bc17-138">大多数情况下，[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] 控件不支持按比例缩放。</span><span class="sxs-lookup"><span data-stu-id="2bc17-138">In most cases, [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] controls do not support proportional scaling.</span></span> <span data-ttu-id="2bc17-139">尽管该控件的整体尺寸将会缩放，但其子控件和组件元素可能不会按预期调整大小。</span><span class="sxs-lookup"><span data-stu-id="2bc17-139">Although the overall dimensions of the control will scale, child controls and component elements of the control may not resize as expected.</span></span> <span data-ttu-id="2bc17-140">此限制取决于每个 [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] 控件支持缩放的程度。</span><span class="sxs-lookup"><span data-stu-id="2bc17-140">This limitation depends on how well each [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] control supports scaling.</span></span> <span data-ttu-id="2bc17-141">此外，不能缩放[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]缩小到 0 像素的小时的控件。</span><span class="sxs-lookup"><span data-stu-id="2bc17-141">In addition, you cannot scale [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] controls down to a size of 0 pixels.</span></span>  
  
-   [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]<span data-ttu-id="2bc17-142"> 控件支持自动缩放，在其中窗体将自动调整自身的字号基于其控件。</span><span class="sxs-lookup"><span data-stu-id="2bc17-142"> controls support autoscaling, in which the form will automatically resize itself and its controls based on the font size.</span></span> <span data-ttu-id="2bc17-143">在 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 用户界面中，更改字号不会改变整个布局的大小，但是可动态调整单个元素的大小。</span><span class="sxs-lookup"><span data-stu-id="2bc17-143">In a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] user interface, changing the font size does not resize the entire layout, although individual elements may dynamically resize.</span></span>  
  
### <a name="z-order"></a><span data-ttu-id="2bc17-144">Z 顺序</span><span class="sxs-lookup"><span data-stu-id="2bc17-144">Z-order</span></span>  
 <span data-ttu-id="2bc17-145">在 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 用户界面中，可以更改元素的 z 顺序以控制重叠行为。</span><span class="sxs-lookup"><span data-stu-id="2bc17-145">In a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] user interface, you can change the z-order of elements to control overlapping behavior.</span></span> <span data-ttu-id="2bc17-146">由于承载的 [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] 控件是在单独的 HWND 中绘制的，所以始终在 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 元素之上绘制它。</span><span class="sxs-lookup"><span data-stu-id="2bc17-146">A hosted [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] control is drawn in a separate HWND, so it is always drawn on top of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] elements.</span></span>  
  
 <span data-ttu-id="2bc17-147">一个承载[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]基于任何还绘制控件<xref:System.Windows.Documents.Adorner>元素。</span><span class="sxs-lookup"><span data-stu-id="2bc17-147">A hosted [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] control is also drawn on top of any <xref:System.Windows.Documents.Adorner> elements.</span></span>  
  
## <a name="layout-behavior"></a><span data-ttu-id="2bc17-148">布局行为</span><span class="sxs-lookup"><span data-stu-id="2bc17-148">Layout Behavior</span></span>  
 <span data-ttu-id="2bc17-149">以下各节描述了布局行为的特定方面，承载时[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]中控制[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="2bc17-149">The following sections describe specific aspects of layout behavior when hosting [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] controls in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
### <a name="scaling-unit-conversion-and-device-independence"></a><span data-ttu-id="2bc17-150">缩放、 单位转换和设备独立性</span><span class="sxs-lookup"><span data-stu-id="2bc17-150">Scaling, Unit Conversion, and Device Independence</span></span>  
 <span data-ttu-id="2bc17-151">每当<xref:System.Windows.Forms.Integration.WindowsFormsHost>元素执行操作涉及[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]和[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]涉及维度，两个坐标系： 独立于设备的像素[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]和硬件像素[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="2bc17-151">Whenever the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element performs operations involving [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] dimensions, two coordinate systems are involved: device-independent pixels for [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and hardware pixels for [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)].</span></span> <span data-ttu-id="2bc17-152">因此，你必须应用适当的单位和缩放转换，以实现一致的布局。</span><span class="sxs-lookup"><span data-stu-id="2bc17-152">Therefore, you must apply proper unit and scaling conversions to achieve a consistent layout.</span></span>  
  
 <span data-ttu-id="2bc17-153">坐标系统之间的转换取决于当前的设备分辨率和任何布局或呈现转换应用于<xref:System.Windows.Forms.Integration.WindowsFormsHost>元素或其上级。</span><span class="sxs-lookup"><span data-stu-id="2bc17-153">Conversion between the coordinate systems depends on the current device resolution and any layout or rendering transforms applied to the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element or to its ancestors.</span></span>  
  
 <span data-ttu-id="2bc17-154">如果输出设备为 96 dpi，而不缩放已应用到<xref:System.Windows.Forms.Integration.WindowsFormsHost>元素，一个独立于设备的像素等同于一个硬件像素。</span><span class="sxs-lookup"><span data-stu-id="2bc17-154">If the output device is 96 dpi and no scaling has been applied to the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element, one device-independent pixel is equal to one hardware pixel.</span></span>  
  
 <span data-ttu-id="2bc17-155">所有其他情况下需要坐标系统缩放。</span><span class="sxs-lookup"><span data-stu-id="2bc17-155">All other cases require coordinate system scaling.</span></span> <span data-ttu-id="2bc17-156">托管的控件不调整大小。</span><span class="sxs-lookup"><span data-stu-id="2bc17-156">The hosted control is not resized.</span></span> <span data-ttu-id="2bc17-157">相反，<xref:System.Windows.Forms.Integration.WindowsFormsHost>元素尝试来缩放所承载的控件及其所有子控件。</span><span class="sxs-lookup"><span data-stu-id="2bc17-157">Instead, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element attempts to scale the hosted control and all of its child controls.</span></span> <span data-ttu-id="2bc17-158">因为[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]不完全支持缩放，<xref:System.Windows.Forms.Integration.WindowsFormsHost>元素可以扩展到由特定控件支持的程度。</span><span class="sxs-lookup"><span data-stu-id="2bc17-158">Because [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] does not fully support scaling, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element scales to the degree supported by particular controls.</span></span>  
  
 <span data-ttu-id="2bc17-159">重写<xref:System.Windows.Forms.Integration.WindowsFormsHost.ScaleChild%2A>方法以提供用于承载 Windows 窗体控件的自定义缩放行为。</span><span class="sxs-lookup"><span data-stu-id="2bc17-159">Override the <xref:System.Windows.Forms.Integration.WindowsFormsHost.ScaleChild%2A> method to provide custom scaling behavior for the hosted Windows Forms control.</span></span>  
  
 <span data-ttu-id="2bc17-160">除了向外，<xref:System.Windows.Forms.Integration.WindowsFormsHost>元素处理舍入和溢出的情况下下, 表中所述。</span><span class="sxs-lookup"><span data-stu-id="2bc17-160">In addition to scaling, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element handles rounding and overflow cases as described in the following table.</span></span>  
  
|<span data-ttu-id="2bc17-161">转换问题</span><span class="sxs-lookup"><span data-stu-id="2bc17-161">Conversion issue</span></span>|<span data-ttu-id="2bc17-162">描述</span><span class="sxs-lookup"><span data-stu-id="2bc17-162">Description</span></span>|  
|----------------------|-----------------|  
|<span data-ttu-id="2bc17-163">舍入</span><span class="sxs-lookup"><span data-stu-id="2bc17-163">Rounding</span></span>|[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="2bc17-164"> 独立于设备的像素大小指定为`double`，和[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]硬件像素大小指定为`int`。</span><span class="sxs-lookup"><span data-stu-id="2bc17-164"> device-independent pixel dimensions are specified as `double`, and [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] hardware pixel dimensions are specified as `int`.</span></span> <span data-ttu-id="2bc17-165">在情况下其中`double`-基于的维度转换为`int`-基于维度，<xref:System.Windows.Forms.Integration.WindowsFormsHost>元素使用标准的舍入，以便小于 0.5 的小数部分的值是向下舍入为 0。</span><span class="sxs-lookup"><span data-stu-id="2bc17-165">In cases where `double`-based dimensions are converted to `int`-based dimensions, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element uses standard rounding, so that fractional values less than 0.5 are rounded down to 0.</span></span>|  
|<span data-ttu-id="2bc17-166">溢出</span><span class="sxs-lookup"><span data-stu-id="2bc17-166">Overflow</span></span>|<span data-ttu-id="2bc17-167">当<xref:System.Windows.Forms.Integration.WindowsFormsHost>元素将从转换`double`值复制到`int`值，可能会溢出。</span><span class="sxs-lookup"><span data-stu-id="2bc17-167">When the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element converts from `double` values to `int` values, overflow is possible.</span></span> <span data-ttu-id="2bc17-168">值大于<xref:System.Int32.MaxValue>设置为<xref:System.Int32.MaxValue>。</span><span class="sxs-lookup"><span data-stu-id="2bc17-168">Values that are larger than <xref:System.Int32.MaxValue> are set to <xref:System.Int32.MaxValue>.</span></span>|  
  
### <a name="layout-related-properties"></a><span data-ttu-id="2bc17-169">布局相关的属性</span><span class="sxs-lookup"><span data-stu-id="2bc17-169">Layout-related Properties</span></span>  
 <span data-ttu-id="2bc17-170">控制布局中的行为的属性[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]控件和[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]适当地通过映射元素<xref:System.Windows.Forms.Integration.WindowsFormsHost>元素。</span><span class="sxs-lookup"><span data-stu-id="2bc17-170">Properties that control layout behavior in [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] controls and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] elements are mapped appropriately by the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element.</span></span> <span data-ttu-id="2bc17-171">有关详细信息，请参阅 [Windows 窗体和 WPF 属性映射](../../../../docs/framework/wpf/advanced/windows-forms-and-wpf-property-mapping.md)。</span><span class="sxs-lookup"><span data-stu-id="2bc17-171">For more information, see [Windows Forms and WPF Property Mapping](../../../../docs/framework/wpf/advanced/windows-forms-and-wpf-property-mapping.md).</span></span>  
  
### <a name="layout-changes-in-the-hosted-control"></a><span data-ttu-id="2bc17-172">托管控件中的布局更改</span><span class="sxs-lookup"><span data-stu-id="2bc17-172">Layout Changes in the Hosted Control</span></span>  
 <span data-ttu-id="2bc17-173">中托管的布局更改[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]控件传播到[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]以触发布局更新。</span><span class="sxs-lookup"><span data-stu-id="2bc17-173">Layout changes in the hosted [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] control are propagated to [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] to trigger layout updates.</span></span> <span data-ttu-id="2bc17-174"><xref:System.Windows.UIElement.InvalidateMeasure%2A>方法<xref:System.Windows.Forms.Integration.WindowsFormsHost>确保托管控件中的布局更改会导致[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]布局引擎运行。</span><span class="sxs-lookup"><span data-stu-id="2bc17-174">The <xref:System.Windows.UIElement.InvalidateMeasure%2A> method on <xref:System.Windows.Forms.Integration.WindowsFormsHost> ensures that layout changes in the hosted control cause the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layout engine to run.</span></span>  
  
### <a name="continuously-sized-windows-forms-controls"></a><span data-ttu-id="2bc17-175">连续大小 Windows 窗体控件</span><span class="sxs-lookup"><span data-stu-id="2bc17-175">Continuously Sized Windows Forms Controls</span></span>  
 [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]<span data-ttu-id="2bc17-176"> 与控件支持连续伸缩完全交互[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]布局系统。</span><span class="sxs-lookup"><span data-stu-id="2bc17-176"> controls that support continuous scaling fully interact with the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layout system.</span></span> <span data-ttu-id="2bc17-177"><xref:System.Windows.Forms.Integration.WindowsFormsHost>元素使用<xref:System.Windows.FrameworkElement.MeasureOverride%2A>和<xref:System.Windows.FrameworkElement.ArrangeOverride%2A>方法像往常一样来调整和排列托管[!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)]控件。</span><span class="sxs-lookup"><span data-stu-id="2bc17-177">The <xref:System.Windows.Forms.Integration.WindowsFormsHost> element uses the <xref:System.Windows.FrameworkElement.MeasureOverride%2A> and <xref:System.Windows.FrameworkElement.ArrangeOverride%2A> methods as usual to size and arrange the hosted [!INCLUDE[TLA#tla_winforms](../../../../includes/tlasharptla-winforms-md.md)] control.</span></span>  
  
### <a name="sizing-algorithm"></a><span data-ttu-id="2bc17-178">大小调整算法</span><span class="sxs-lookup"><span data-stu-id="2bc17-178">Sizing Algorithm</span></span>  
 <span data-ttu-id="2bc17-179"><xref:System.Windows.Forms.Integration.WindowsFormsHost>元素使用以下过程来托管的控件的大小：</span><span class="sxs-lookup"><span data-stu-id="2bc17-179">The <xref:System.Windows.Forms.Integration.WindowsFormsHost> element uses the following procedure to size the hosted control:</span></span>  
  
1.  <span data-ttu-id="2bc17-180"><xref:System.Windows.Forms.Integration.WindowsFormsHost>元素会替代<xref:System.Windows.FrameworkElement.MeasureOverride%2A>和<xref:System.Windows.FrameworkElement.ArrangeOverride%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="2bc17-180">The <xref:System.Windows.Forms.Integration.WindowsFormsHost> element overrides the <xref:System.Windows.FrameworkElement.MeasureOverride%2A> and <xref:System.Windows.FrameworkElement.ArrangeOverride%2A> methods.</span></span>  
  
2.  <span data-ttu-id="2bc17-181">若要确定所承载控件的大小<xref:System.Windows.FrameworkElement.MeasureOverride%2A>方法调用托管的控件的<xref:System.Windows.Forms.Control.GetPreferredSize%2A>带有约束方法转换从传递给约束<xref:System.Windows.FrameworkElement.MeasureOverride%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="2bc17-181">To determine the size of the hosted control, the <xref:System.Windows.FrameworkElement.MeasureOverride%2A> method calls the hosted control's <xref:System.Windows.Forms.Control.GetPreferredSize%2A> method with a constraint translated from the constraint passed to the <xref:System.Windows.FrameworkElement.MeasureOverride%2A> method.</span></span>  
  
3.  <span data-ttu-id="2bc17-182"><xref:System.Windows.FrameworkElement.ArrangeOverride%2A>方法尝试将托管的控件设置为给定的大小约束。</span><span class="sxs-lookup"><span data-stu-id="2bc17-182">The <xref:System.Windows.FrameworkElement.ArrangeOverride%2A> method attempts to set the hosted control to the given size constraint.</span></span>  
  
4.  <span data-ttu-id="2bc17-183">如果托管的控件的<xref:System.Windows.Forms.Control.Size%2A>属性匹配的指定的约束，托管的控件的大小为约束大小。</span><span class="sxs-lookup"><span data-stu-id="2bc17-183">If the hosted control's <xref:System.Windows.Forms.Control.Size%2A> property matches the specified constraint, the hosted control is sized to the constraint.</span></span>  
  
 <span data-ttu-id="2bc17-184">如果<xref:System.Windows.Forms.Control.Size%2A>属性与指定的约束不匹配，托管的控件不支持连续调整大小。</span><span class="sxs-lookup"><span data-stu-id="2bc17-184">If the <xref:System.Windows.Forms.Control.Size%2A> property does not match the specified constraint, the hosted control does not support continuous sizing.</span></span> <span data-ttu-id="2bc17-185">例如，<xref:System.Windows.Forms.MonthCalendar>控件，可以仅离散的大小。</span><span class="sxs-lookup"><span data-stu-id="2bc17-185">For example, the <xref:System.Windows.Forms.MonthCalendar> control allows only discrete sizes.</span></span> <span data-ttu-id="2bc17-186">对于此控件的允许的大小包含高度和宽度的整数 （表示的月数）。</span><span class="sxs-lookup"><span data-stu-id="2bc17-186">The permitted sizes for this control consist of integers (representing the number of months) for both height and width.</span></span> <span data-ttu-id="2bc17-187">在此情况下<xref:System.Windows.Forms.Integration.WindowsFormsHost>元素的行为，如下所示：</span><span class="sxs-lookup"><span data-stu-id="2bc17-187">In cases such as this, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element behaves as follows:</span></span>  
  
-   <span data-ttu-id="2bc17-188">如果<xref:System.Windows.Forms.Control.Size%2A>属性返回更大的大小大于指定的约束，<xref:System.Windows.Forms.Integration.WindowsFormsHost>元素裁剪所承载的控件。</span><span class="sxs-lookup"><span data-stu-id="2bc17-188">If the <xref:System.Windows.Forms.Control.Size%2A> property returns a larger size than the specified constraint, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element clips the hosted control.</span></span> <span data-ttu-id="2bc17-189">高度和宽度将单独处理，因此承载的控件可能会剪裁在任一方向。</span><span class="sxs-lookup"><span data-stu-id="2bc17-189">Height and width are handled separately, so the hosted control may be clipped in either direction.</span></span>  
  
-   <span data-ttu-id="2bc17-190">如果<xref:System.Windows.Forms.Control.Size%2A>属性返回较小的大小大于指定的约束，<xref:System.Windows.Forms.Integration.WindowsFormsHost>接受此大小值，并返回到值[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]布局系统。</span><span class="sxs-lookup"><span data-stu-id="2bc17-190">If the <xref:System.Windows.Forms.Control.Size%2A> property returns a smaller size than the specified constraint, <xref:System.Windows.Forms.Integration.WindowsFormsHost> accepts this size value and returns the value to the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layout system.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2bc17-191">请参阅</span><span class="sxs-lookup"><span data-stu-id="2bc17-191">See Also</span></span>  
 <xref:System.Windows.Forms.Integration.ElementHost>  
 <xref:System.Windows.Forms.Integration.WindowsFormsHost>  
 [<span data-ttu-id="2bc17-192">演练：在 WPF 中排列 Windows 窗体控件</span><span class="sxs-lookup"><span data-stu-id="2bc17-192">Walkthrough: Arranging Windows Forms Controls in WPF</span></span>](../../../../docs/framework/wpf/advanced/walkthrough-arranging-windows-forms-controls-in-wpf.md)  
 [<span data-ttu-id="2bc17-193">排列 Windows 窗体控件在 WPF 示例</span><span class="sxs-lookup"><span data-stu-id="2bc17-193">Arranging Windows Forms Controls in WPF Sample</span></span>](http://go.microsoft.com/fwlink/?LinkID=159971)  
 [<span data-ttu-id="2bc17-194">Windows 窗体和 WPF 属性映射</span><span class="sxs-lookup"><span data-stu-id="2bc17-194">Windows Forms and WPF Property Mapping</span></span>](../../../../docs/framework/wpf/advanced/windows-forms-and-wpf-property-mapping.md)  
 [<span data-ttu-id="2bc17-195">迁移和互操作性</span><span class="sxs-lookup"><span data-stu-id="2bc17-195">Migration and Interoperability</span></span>](../../../../docs/framework/wpf/advanced/migration-and-interoperability.md)
