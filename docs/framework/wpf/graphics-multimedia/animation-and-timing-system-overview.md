---
title: 动画和计时系统概述
ms.date: 03/30/2017
helpviewer_keywords:
- timing system [WPF]
- animation [WPF]
ms.assetid: 172cd5a8-a333-4c81-9456-fafccc19f382
ms.openlocfilehash: bfb9a337a604fe8d86d208344d4371748e28f285
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/04/2018
ms.locfileid: "33557961"
---
# <a name="animation-and-timing-system-overview"></a><span data-ttu-id="7e94d-102">动画和计时系统概述</span><span class="sxs-lookup"><span data-stu-id="7e94d-102">Animation and Timing System Overview</span></span>
<span data-ttu-id="7e94d-103">本主题介绍如何计时系统使用动画， <xref:System.Windows.Media.Animation.Timeline>，和<xref:System.Windows.Media.Animation.Clock>类属性进行动画处理。</span><span class="sxs-lookup"><span data-stu-id="7e94d-103">This topic describes how the timing system uses the animation, <xref:System.Windows.Media.Animation.Timeline>, and <xref:System.Windows.Media.Animation.Clock> classes to animate properties.</span></span>  
  
<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="7e94d-104">系统必备</span><span class="sxs-lookup"><span data-stu-id="7e94d-104">Prerequisites</span></span>  
 <span data-ttu-id="7e94d-105">为了了解本主题，应该能够使用 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 动画来对属性进行动画处理，如[动画概述](../../../../docs/framework/wpf/graphics-multimedia/animation-overview.md)中所述。</span><span class="sxs-lookup"><span data-stu-id="7e94d-105">To understand this topic, you should be able to use [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animations to animate properties, as described in the [Animation Overview](../../../../docs/framework/wpf/graphics-multimedia/animation-overview.md).</span></span> <span data-ttu-id="7e94d-106">本主题还有助于熟悉依赖属性；有关详细信息，请参阅[依赖属性概述](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="7e94d-106">It also helps to be familiar with dependency properties; for more information, see the [Dependency Properties Overview](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md).</span></span>  
  
<a name="timelinesandclocks"></a>   
## <a name="timelines-and-clocks"></a><span data-ttu-id="7e94d-107">时间线和时钟</span><span class="sxs-lookup"><span data-stu-id="7e94d-107">Timelines and Clocks</span></span>  
 <span data-ttu-id="7e94d-108">[动画概述](../../../../docs/framework/wpf/graphics-multimedia/animation-overview.md)描述如何<xref:System.Windows.Media.Animation.Timeline>表示的时间，以及一个动画段是一种<xref:System.Windows.Media.Animation.Timeline>生成输出值。</span><span class="sxs-lookup"><span data-stu-id="7e94d-108">The [Animation Overview](../../../../docs/framework/wpf/graphics-multimedia/animation-overview.md) described how a <xref:System.Windows.Media.Animation.Timeline> represents a segment of time, and an animation is a type of <xref:System.Windows.Media.Animation.Timeline> that produces output values.</span></span> <span data-ttu-id="7e94d-109">其本身而言， <xref:System.Windows.Media.Animation.Timeline>，不执行任何操作而不只是描述的时间段。</span><span class="sxs-lookup"><span data-stu-id="7e94d-109">By itself, a <xref:System.Windows.Media.Animation.Timeline>, doesn't do anything other than just describe a segment of time.</span></span> <span data-ttu-id="7e94d-110">它是时间线的<xref:System.Windows.Media.Animation.Clock>对象，不能实际工作。</span><span class="sxs-lookup"><span data-stu-id="7e94d-110">It's the timeline's <xref:System.Windows.Media.Animation.Clock> object that does the real work.</span></span> <span data-ttu-id="7e94d-111">同样，动画不实际属性进行动画处理： 动画类描述应该如何计算输出值，但它是<xref:System.Windows.Media.Animation.Clock>创建用于动画驱动器动画输出并将它应用于属性。</span><span class="sxs-lookup"><span data-stu-id="7e94d-111">Likewise, animation doesn't actually animate properties: an animation class describes how output values should be calculated, but it’s the <xref:System.Windows.Media.Animation.Clock> that was created for the animation that drives the animation output and applies it to properties.</span></span>  
  
 <span data-ttu-id="7e94d-112">A<xref:System.Windows.Media.Animation.Clock>是维护与计时相关运行时的状态对象的特殊类型<xref:System.Windows.Media.Animation.Timeline>。</span><span class="sxs-lookup"><span data-stu-id="7e94d-112">A <xref:System.Windows.Media.Animation.Clock> is a special type of object that maintains timing-related run-time state for the <xref:System.Windows.Media.Animation.Timeline>.</span></span> <span data-ttu-id="7e94d-113">它提供的信息对动画和时间系统至关重要的三个 bits: <xref:System.Windows.Media.Animation.Clock.CurrentTime%2A>， <xref:System.Windows.Media.Animation.Clock.CurrentProgress%2A>，和<xref:System.Windows.Media.Animation.Clock.CurrentState%2A>。</span><span class="sxs-lookup"><span data-stu-id="7e94d-113">It provides three bits of information that are essential to the animation and timing system: <xref:System.Windows.Media.Animation.Clock.CurrentTime%2A>, <xref:System.Windows.Media.Animation.Clock.CurrentProgress%2A>, and <xref:System.Windows.Media.Animation.Clock.CurrentState%2A>.</span></span> <span data-ttu-id="7e94d-114">A<xref:System.Windows.Media.Animation.Clock>确定其当前时间、 进度和状态通过使用所描述的计时行为其<xref:System.Windows.Media.Animation.Timeline>: <xref:System.Windows.Media.Animation.Timeline.Duration%2A>， <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A>， <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A>，依次类推。</span><span class="sxs-lookup"><span data-stu-id="7e94d-114">A <xref:System.Windows.Media.Animation.Clock> determines its current time, progress, and state by using the timing behaviors described by its <xref:System.Windows.Media.Animation.Timeline>: <xref:System.Windows.Media.Animation.Timeline.Duration%2A>, <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A>, <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A>, and so on.</span></span>  
  
 <span data-ttu-id="7e94d-115">在大多数情况下，<xref:System.Windows.Media.Animation.Clock>自动为你的时间线创建。</span><span class="sxs-lookup"><span data-stu-id="7e94d-115">In most cases, a <xref:System.Windows.Media.Animation.Clock> is created automatically for your timeline.</span></span> <span data-ttu-id="7e94d-116">当你使用进行动画处理<xref:System.Windows.Media.Animation.Storyboard>或<xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A>方法中，时钟自动创建为时间线和动画和应用到其目标属性。</span><span class="sxs-lookup"><span data-stu-id="7e94d-116">When you animate by using a <xref:System.Windows.Media.Animation.Storyboard> or the <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> method, clocks are automatically created for your timelines and animations and applied to their targeted properties.</span></span> <span data-ttu-id="7e94d-117">你还可以创建<xref:System.Windows.Media.Animation.Clock>通过使用显式<xref:System.Windows.Media.Animation.Timeline.CreateClock%2A>方法你<xref:System.Windows.Media.Animation.Timeline>。</span><span class="sxs-lookup"><span data-stu-id="7e94d-117">You can also create a <xref:System.Windows.Media.Animation.Clock> explicitly by using the <xref:System.Windows.Media.Animation.Timeline.CreateClock%2A> method of your <xref:System.Windows.Media.Animation.Timeline>.</span></span> <span data-ttu-id="7e94d-118"><xref:System.Windows.Media.MediaTimeline.CreateClock%2A?displayProperty=nameWithType>方法创建的相应类型的时钟<xref:System.Windows.Media.Animation.Timeline>对其调用。</span><span class="sxs-lookup"><span data-stu-id="7e94d-118">The <xref:System.Windows.Media.MediaTimeline.CreateClock%2A?displayProperty=nameWithType> method creates a clock of the appropriate type for the <xref:System.Windows.Media.Animation.Timeline> on which it is called.</span></span> <span data-ttu-id="7e94d-119">如果<xref:System.Windows.Media.Animation.Timeline>包含子时间线，它会创建<xref:System.Windows.Media.Animation.Clock>以及这些对象。</span><span class="sxs-lookup"><span data-stu-id="7e94d-119">If the <xref:System.Windows.Media.Animation.Timeline> contains child timelines, it creates <xref:System.Windows.Media.Animation.Clock> objects for them as well.</span></span> <span data-ttu-id="7e94d-120">生成<xref:System.Windows.Media.Animation.Clock>在与结构相匹配的目录树中排列对象<xref:System.Windows.Media.Animation.Timeline>对象从其创建树。</span><span class="sxs-lookup"><span data-stu-id="7e94d-120">The resulting <xref:System.Windows.Media.Animation.Clock> objects are arranged in trees that match the structure of the <xref:System.Windows.Media.Animation.Timeline> objects tree from which they are created.</span></span>  
  
 <span data-ttu-id="7e94d-121">不同类型的时间线具有不同类型的时钟。</span><span class="sxs-lookup"><span data-stu-id="7e94d-121">There are different types of clocks for different types of timelines.</span></span> <span data-ttu-id="7e94d-122">下表显示<xref:System.Windows.Media.Animation.Clock>对应于一些不同的类型<xref:System.Windows.Media.Animation.Timeline>类型。</span><span class="sxs-lookup"><span data-stu-id="7e94d-122">The following table shows the <xref:System.Windows.Media.Animation.Clock> types that correspond to some of the different <xref:System.Windows.Media.Animation.Timeline> types.</span></span>  
  
|<span data-ttu-id="7e94d-123">时间线类型</span><span class="sxs-lookup"><span data-stu-id="7e94d-123">Timeline type</span></span>|<span data-ttu-id="7e94d-124">时钟类型</span><span class="sxs-lookup"><span data-stu-id="7e94d-124">Clock type</span></span>|<span data-ttu-id="7e94d-125">时钟用途</span><span class="sxs-lookup"><span data-stu-id="7e94d-125">Clock purpose</span></span>|  
|-------------------|----------------|-------------------|  
|<span data-ttu-id="7e94d-126">动画 (继承自<xref:System.Windows.Media.Animation.AnimationTimeline>)</span><span class="sxs-lookup"><span data-stu-id="7e94d-126">Animation (inherits from <xref:System.Windows.Media.Animation.AnimationTimeline>)</span></span>|<xref:System.Windows.Media.Animation.AnimationClock>|<span data-ttu-id="7e94d-127">为依赖属性生成输出值。</span><span class="sxs-lookup"><span data-stu-id="7e94d-127">Generates output values for a dependency property.</span></span>|  
|<xref:System.Windows.Media.MediaTimeline>|<xref:System.Windows.Media.MediaClock>|<span data-ttu-id="7e94d-128">处理媒体文件。</span><span class="sxs-lookup"><span data-stu-id="7e94d-128">Processes a media file.</span></span>|  
|<xref:System.Windows.Media.Animation.ParallelTimeline>|<xref:System.Windows.Media.Animation.ClockGroup>|<span data-ttu-id="7e94d-129">分组和控制其子<xref:System.Windows.Media.Animation.Clock>对象</span><span class="sxs-lookup"><span data-stu-id="7e94d-129">Groups and controls its child <xref:System.Windows.Media.Animation.Clock> objects</span></span>|  
|<xref:System.Windows.Media.Animation.Storyboard>|<xref:System.Windows.Media.Animation.ClockGroup>|<span data-ttu-id="7e94d-130">分组和控制其子<xref:System.Windows.Media.Animation.Clock>对象</span><span class="sxs-lookup"><span data-stu-id="7e94d-130">Groups and controls its child <xref:System.Windows.Media.Animation.Clock> objects</span></span>|  
  
 <span data-ttu-id="7e94d-131">你可以在应用任何<xref:System.Windows.Media.Animation.AnimationClock>对象通过创建到兼容的依赖项属性<xref:System.Windows.Media.Animation.IAnimatable.ApplyAnimationClock%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="7e94d-131">You can apply any <xref:System.Windows.Media.Animation.AnimationClock> objects you create to compatible dependency properties by using the <xref:System.Windows.Media.Animation.IAnimatable.ApplyAnimationClock%2A> method.</span></span>  
  
 <span data-ttu-id="7e94d-132">在性能要求较高的情况下，对进行动画处理大量类似对象，如管理你自己<xref:System.Windows.Media.Animation.Clock>使用可以提供性能优势。</span><span class="sxs-lookup"><span data-stu-id="7e94d-132">In performance-intensive scenarios, such as animating large numbers of similar objects, managing your own <xref:System.Windows.Media.Animation.Clock> use can provide performance benefits.</span></span>  
  
<a name="timemanager"></a>   
## <a name="clocks-and-the-time-manager"></a><span data-ttu-id="7e94d-133">时钟和时间管理器</span><span class="sxs-lookup"><span data-stu-id="7e94d-133">Clocks and the Time Manager</span></span>  
 <span data-ttu-id="7e94d-134">当您创建动画中的对象[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]，它是时间管理器管理<xref:System.Windows.Media.MediaPlayer.Clock%2A>为时间线创建的对象。</span><span class="sxs-lookup"><span data-stu-id="7e94d-134">When you animate objects in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], it’s the time manager that manages the <xref:System.Windows.Media.MediaPlayer.Clock%2A> objects created for your timelines.</span></span> <span data-ttu-id="7e94d-135">时间管理器是 <xref:System.Windows.Media.MediaPlayer.Clock%2A> 对象树的根，并控制该树中的时间流。</span><span class="sxs-lookup"><span data-stu-id="7e94d-135">The time manager is the root of a tree of <xref:System.Windows.Media.MediaPlayer.Clock%2A> objects and controls the flow of time in that tree.</span></span>  <span data-ttu-id="7e94d-136">将自动为每个 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 应用程序创建时间管理器，它对于应用程序开发人员不可见。</span><span class="sxs-lookup"><span data-stu-id="7e94d-136">A time manager is automatically created for each [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application and is invisible to the application developer.</span></span> <span data-ttu-id="7e94d-137">时间管理器每秒钟“滴答”多次；每秒发生的实际滴答次数取决于可用的系统资源。</span><span class="sxs-lookup"><span data-stu-id="7e94d-137">The time manager "ticks" many times per second; the actual number of ticks that occur each second varies depending on available system resources.</span></span> <span data-ttu-id="7e94d-138">在每个这些刻度，时间管理器计算的所有状态<xref:System.Windows.Media.Animation.ClockState.Active><xref:System.Windows.Media.Animation.Clock>计时树中的对象。</span><span class="sxs-lookup"><span data-stu-id="7e94d-138">During each one of these ticks, the time manager computes the state of all <xref:System.Windows.Media.Animation.ClockState.Active> <xref:System.Windows.Media.Animation.Clock> objects in the timing tree.</span></span>  
  
 <span data-ttu-id="7e94d-139">下图显示时间管理器、 之间的关系和<xref:System.Windows.Media.Animation.AnimationClock>，和一个动画的依赖项属性。</span><span class="sxs-lookup"><span data-stu-id="7e94d-139">The following illustration shows the relationship between the time manager, and <xref:System.Windows.Media.Animation.AnimationClock>, and an animated dependency property.</span></span>  
  
 <span data-ttu-id="7e94d-140">![计时系统组件](../../../../docs/framework/wpf/graphics-multimedia/media/graphicsmm-clocks-1clock1prop.png "graphicsmm_clocks_1clock1prop")</span><span class="sxs-lookup"><span data-stu-id="7e94d-140">![Timing system components](../../../../docs/framework/wpf/graphics-multimedia/media/graphicsmm-clocks-1clock1prop.png "graphicsmm_clocks_1clock1prop")</span></span>  
<span data-ttu-id="7e94d-141">对属性进行动画处理</span><span class="sxs-lookup"><span data-stu-id="7e94d-141">Animating a property</span></span>  
  
 <span data-ttu-id="7e94d-142">当滴答时间管理器时，它会更新的时间每个<xref:System.Windows.Media.Animation.ClockState.Active><xref:System.Windows.Media.Animation.Clock>应用程序中。</span><span class="sxs-lookup"><span data-stu-id="7e94d-142">When the time manager ticks, it updates the time of every <xref:System.Windows.Media.Animation.ClockState.Active> <xref:System.Windows.Media.Animation.Clock> in the application.</span></span> <span data-ttu-id="7e94d-143">如果<xref:System.Windows.Media.Animation.Clock>是<xref:System.Windows.Media.Animation.AnimationClock>，它使用<xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A>方法<xref:System.Windows.Media.Animation.AnimationTimeline>于创建它来计算其当前输出值。</span><span class="sxs-lookup"><span data-stu-id="7e94d-143">If the <xref:System.Windows.Media.Animation.Clock> is an <xref:System.Windows.Media.Animation.AnimationClock>, it uses the <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> method of the <xref:System.Windows.Media.Animation.AnimationTimeline> from which it was created to calculate its current output value.</span></span> <span data-ttu-id="7e94d-144"><xref:System.Windows.Media.Animation.AnimationClock>提供<xref:System.Windows.Media.Animation.AnimationTimeline>当前本地时间、 输入的值，这通常是属性的基值，与默认的目标值。</span><span class="sxs-lookup"><span data-stu-id="7e94d-144">The <xref:System.Windows.Media.Animation.AnimationClock> supplies the <xref:System.Windows.Media.Animation.AnimationTimeline> with the current local time, an input value, which is typically the base value of the property, and a default destination value.</span></span> <span data-ttu-id="7e94d-145">检索的动画的值时通过属性使用<xref:System.Windows.DependencyObject.GetValue%2A>方法或其 CLR 访问器，您将得到的输出其<xref:System.Windows.Media.Animation.AnimationClock>。</span><span class="sxs-lookup"><span data-stu-id="7e94d-145">When you retrieve the value of an animated by property using the <xref:System.Windows.DependencyObject.GetValue%2A> method or its CLR accessor, you get the output of its <xref:System.Windows.Media.Animation.AnimationClock>.</span></span>  
  
#### <a name="clock-groups"></a><span data-ttu-id="7e94d-146">时钟组</span><span class="sxs-lookup"><span data-stu-id="7e94d-146">Clock Groups</span></span>  
 <span data-ttu-id="7e94d-147">前面的章节介绍了如何有不同类型的<xref:System.Windows.Media.Animation.Clock>时间线的时间的不同类型的对象。</span><span class="sxs-lookup"><span data-stu-id="7e94d-147">The preceding section described how there are different types of <xref:System.Windows.Media.Animation.Clock> objects for different types of timelines.</span></span> <span data-ttu-id="7e94d-148">下图显示时间管理器、 之间的关系<xref:System.Windows.Media.Animation.ClockGroup>、 <xref:System.Windows.Media.Animation.AnimationClock>，和一个动画的依赖项属性。</span><span class="sxs-lookup"><span data-stu-id="7e94d-148">The following illustration shows the relationship between the time manager, a <xref:System.Windows.Media.Animation.ClockGroup>, an <xref:System.Windows.Media.Animation.AnimationClock>, and an animated dependency property.</span></span> <span data-ttu-id="7e94d-149">A<xref:System.Windows.Media.Animation.ClockGroup>为组其他时间线，如的时间线创建<xref:System.Windows.Media.Animation.Storyboard>类，它在动画和其他时间线。</span><span class="sxs-lookup"><span data-stu-id="7e94d-149">A <xref:System.Windows.Media.Animation.ClockGroup> is created for timelines that group other timelines, such as the <xref:System.Windows.Media.Animation.Storyboard> class, which groups animations and other timelines.</span></span>  
  
 <span data-ttu-id="7e94d-150">![计时系统组件](../../../../docs/framework/wpf/graphics-multimedia/media/graphicsmm-clocks-2clock1clockgroup2prop.png "graphicsmm_clocks_2clock1clockgroup2prop")</span><span class="sxs-lookup"><span data-stu-id="7e94d-150">![Timing system components](../../../../docs/framework/wpf/graphics-multimedia/media/graphicsmm-clocks-2clock1clockgroup2prop.png "graphicsmm_clocks_2clock1clockgroup2prop")</span></span>  
<span data-ttu-id="7e94d-151">ClockGroup</span><span class="sxs-lookup"><span data-stu-id="7e94d-151">A ClockGroup</span></span>  
  
#### <a name="composition"></a><span data-ttu-id="7e94d-152">撰写</span><span class="sxs-lookup"><span data-stu-id="7e94d-152">Composition</span></span>  
 <span data-ttu-id="7e94d-153">可以将多个时钟与一个属性相关联，在这种情况下，每个时钟都将上一个时钟的输出值用作其基值。</span><span class="sxs-lookup"><span data-stu-id="7e94d-153">It's possible to associate multiple clocks with a single property, in which case each clock uses the output value of the preceding clock as its base value.</span></span> <span data-ttu-id="7e94d-154">下图显示了三个<xref:System.Windows.Media.Animation.AnimationClock>应用于相同的属性的对象。</span><span class="sxs-lookup"><span data-stu-id="7e94d-154">The following illustration shows three <xref:System.Windows.Media.Animation.AnimationClock> objects applied to the same property.</span></span> <span data-ttu-id="7e94d-155">时钟1 将经过动画处理的属性的基值用作其输入，并使用该值生成输出。</span><span class="sxs-lookup"><span data-stu-id="7e94d-155">Clock1 uses the base value of the animated property as its input and uses it to generate output.</span></span> <span data-ttu-id="7e94d-156">时钟2 将时钟1 的输出用作其输入，并使用该值生成输出。</span><span class="sxs-lookup"><span data-stu-id="7e94d-156">Clock2 takes the output from Clock1 as its input and uses it to generate output.</span></span> <span data-ttu-id="7e94d-157">时钟3 将时钟2 的输出用作其输入，并使用该值生成输出。</span><span class="sxs-lookup"><span data-stu-id="7e94d-157">Clock3 takes the output from Clock2 as its input and uses it to generate output.</span></span> <span data-ttu-id="7e94d-158">如果多个时钟同时影响同一个属性，则认为这些时钟位于一个组合链中。</span><span class="sxs-lookup"><span data-stu-id="7e94d-158">When multiple clocks affect the same property simultaneously, they are said to be in a composition chain.</span></span>  
  
 <span data-ttu-id="7e94d-159">![计时系统组件](../../../../docs/framework/wpf/graphics-multimedia/media/graphicsmm-clocks-2clock1prop.png "graphicsmm_clocks_2clock1prop")</span><span class="sxs-lookup"><span data-stu-id="7e94d-159">![Timing system components](../../../../docs/framework/wpf/graphics-multimedia/media/graphicsmm-clocks-2clock1prop.png "graphicsmm_clocks_2clock1prop")</span></span>  
<span data-ttu-id="7e94d-160">组合链</span><span class="sxs-lookup"><span data-stu-id="7e94d-160">A composition chain</span></span>  
  
 <span data-ttu-id="7e94d-161">请注意，虽然在输入和输出之间创建关系<xref:System.Windows.Media.Animation.AnimationClock>组合链中的对象及其计时行为不会受到影响;<xref:System.Windows.Media.Animation.Clock>对象 (包括<xref:System.Windows.Media.Animation.AnimationClock>对象) 对它们的父级的分级的依存关系<xref:System.Windows.Media.Animation.Clock>对象。</span><span class="sxs-lookup"><span data-stu-id="7e94d-161">Note that although a relationship is created among the input and output of the <xref:System.Windows.Media.Animation.AnimationClock> objects in the composition chain, their timing behaviors are not affected; <xref:System.Windows.Media.Animation.Clock> objects (including <xref:System.Windows.Media.Animation.AnimationClock> objects) have a hierarchical dependency on their parent <xref:System.Windows.Media.Animation.Clock> objects.</span></span>  
  
 <span data-ttu-id="7e94d-162">若要将多个时钟应用到相同的属性，使用<xref:System.Windows.Media.Animation.HandoffBehavior.Compose><xref:System.Windows.Media.Animation.HandoffBehavior>应用时<xref:System.Windows.Media.Animation.Storyboard>，动画，或<xref:System.Windows.Media.Animation.AnimationClock>。</span><span class="sxs-lookup"><span data-stu-id="7e94d-162">To apply multiple clocks to the same property, use the <xref:System.Windows.Media.Animation.HandoffBehavior.Compose> <xref:System.Windows.Media.Animation.HandoffBehavior> when applying a <xref:System.Windows.Media.Animation.Storyboard>, animation, or <xref:System.Windows.Media.Animation.AnimationClock>.</span></span>  
  
#### <a name="ticks-and-event-consolidation"></a><span data-ttu-id="7e94d-163">滴答和事件合并</span><span class="sxs-lookup"><span data-stu-id="7e94d-163">Ticks and Event Consolidation</span></span>  
 <span data-ttu-id="7e94d-164">除了计算输出值以外，时间管理器还会在它每滴答一次时执行其他工作：它会确定每个时钟的状态并根据需要引发事件。</span><span class="sxs-lookup"><span data-stu-id="7e94d-164">In addition to calculating output values, the time manager does other work every time it ticks: it determines the state of each clock and raises events as appropriate.</span></span>  
  
 <span data-ttu-id="7e94d-165">尽管时钟周期频繁发生，但是不同时钟周期之间可能会很多操作。</span><span class="sxs-lookup"><span data-stu-id="7e94d-165">While ticks occur frequently, it's possible for a lot of things to happen between ticks.</span></span> <span data-ttu-id="7e94d-166">例如，<xref:System.Windows.Media.Animation.Clock>可能已停止，启动，并且再次停止，在这种情况下其<xref:System.Windows.Media.Animation.Clock.CurrentState%2A>值将更改三次。</span><span class="sxs-lookup"><span data-stu-id="7e94d-166">For example, a <xref:System.Windows.Media.Animation.Clock> might be stopped, started, and stopped again, in which case its <xref:System.Windows.Media.Animation.Clock.CurrentState%2A> value will have changed three times.</span></span> <span data-ttu-id="7e94d-167">从理论上讲，<xref:System.Windows.Media.Animation.Clock.CurrentStateInvalidated>事件可能会引发多个时间中的一个刻度; 但是，计时引擎将合并事件，以便<xref:System.Windows.Media.Animation.Clock.CurrentStateInvalidated>每刻度最多一次引发事件。</span><span class="sxs-lookup"><span data-stu-id="7e94d-167">In theory, the <xref:System.Windows.Media.Animation.Clock.CurrentStateInvalidated> event could be raised multiple times in a single tick; however, the timing engine consolidates events, so that the <xref:System.Windows.Media.Animation.Clock.CurrentStateInvalidated> event can be raised at most once per tick.</span></span> <span data-ttu-id="7e94d-168">这适用于所有计时事件： 均将引发一个事件最多每种类型的给定<xref:System.Windows.Media.Animation.Clock>对象。</span><span class="sxs-lookup"><span data-stu-id="7e94d-168">This is true for all timing events: at most one event of each type is raised for a given <xref:System.Windows.Media.Animation.Clock> object.</span></span>  
  
 <span data-ttu-id="7e94d-169">当<xref:System.Windows.Media.Animation.Clock>切换状态并计时周期之间将返回到其原始状态 (例如，更改从<xref:System.Windows.Media.Animation.ClockState.Active>到<xref:System.Windows.Media.Animation.ClockState.Stopped>并返回到<xref:System.Windows.Media.Animation.ClockState.Active>)，仍发生关联的事件。</span><span class="sxs-lookup"><span data-stu-id="7e94d-169">When a <xref:System.Windows.Media.Animation.Clock> switches states and returns back to its original state between ticks (such as changing from <xref:System.Windows.Media.Animation.ClockState.Active> to <xref:System.Windows.Media.Animation.ClockState.Stopped> and back to <xref:System.Windows.Media.Animation.ClockState.Active>), the associated event still occurs.</span></span>  
  
 <span data-ttu-id="7e94d-170">有关计时事件的详细信息，请参阅[计时事件概述](../../../../docs/framework/wpf/graphics-multimedia/timing-events-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="7e94d-170">For more information about timing events, see the [Timing Events Overview](../../../../docs/framework/wpf/graphics-multimedia/timing-events-overview.md).</span></span>  
  
<a name="currentvaluesbasevaluesofproperties"></a>   
## <a name="current-values-and-base-values-of-properties"></a><span data-ttu-id="7e94d-171">属性的当前值和基值</span><span class="sxs-lookup"><span data-stu-id="7e94d-171">Current Values and Base Values of Properties</span></span>  
 <span data-ttu-id="7e94d-172">可进行动画处理的属性具有两个值：基值和当前值。</span><span class="sxs-lookup"><span data-stu-id="7e94d-172">An animatable property can have two values: a base value and a current value.</span></span> <span data-ttu-id="7e94d-173">当将使用其 CLR 访问器的属性的设置或<xref:System.Windows.DependencyObject.SetValue%2A>方法，你将其基的值设置。</span><span class="sxs-lookup"><span data-stu-id="7e94d-173">When you set property using its CLR accessor or the <xref:System.Windows.DependencyObject.SetValue%2A> method, you set its base value.</span></span> <span data-ttu-id="7e94d-174">对于尚未进行动画处理的属性，基值和当前值相同。</span><span class="sxs-lookup"><span data-stu-id="7e94d-174">When a property is not animated, its base and current values are the same.</span></span>  
  
 <span data-ttu-id="7e94d-175">当你对属性进行动画处理<xref:System.Windows.Media.Animation.AnimationClock>设置该属性的*当前*值。</span><span class="sxs-lookup"><span data-stu-id="7e94d-175">When you animate a property, the <xref:System.Windows.Media.Animation.AnimationClock> sets the property's *current* value.</span></span> <span data-ttu-id="7e94d-176">检索通过其 CLR 访问器的属性的值或<xref:System.Windows.DependencyObject.GetValue%2A>方法返回的输出<xref:System.Windows.Media.Animation.AnimationClock>时<xref:System.Windows.Media.Animation.AnimationClock>是<xref:System.Windows.Media.Animation.ClockState.Active>或<xref:System.Windows.Media.Animation.ClockState.Filling>。</span><span class="sxs-lookup"><span data-stu-id="7e94d-176">Retrieving the property's value through its CLR accessor or the <xref:System.Windows.DependencyObject.GetValue%2A> method returns the output of the <xref:System.Windows.Media.Animation.AnimationClock> when the <xref:System.Windows.Media.Animation.AnimationClock> is <xref:System.Windows.Media.Animation.ClockState.Active> or <xref:System.Windows.Media.Animation.ClockState.Filling>.</span></span> <span data-ttu-id="7e94d-177">你可以使用来检索属性的基值<xref:System.Windows.Media.Animation.IAnimatable.GetAnimationBaseValue%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="7e94d-177">You can retrieve the property's base value by using the <xref:System.Windows.Media.Animation.IAnimatable.GetAnimationBaseValue%2A> method.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7e94d-178">请参阅</span><span class="sxs-lookup"><span data-stu-id="7e94d-178">See Also</span></span>  
 [<span data-ttu-id="7e94d-179">动画概述</span><span class="sxs-lookup"><span data-stu-id="7e94d-179">Animation Overview</span></span>](../../../../docs/framework/wpf/graphics-multimedia/animation-overview.md)  
 [<span data-ttu-id="7e94d-180">计时事件概述</span><span class="sxs-lookup"><span data-stu-id="7e94d-180">Timing Events Overview</span></span>](../../../../docs/framework/wpf/graphics-multimedia/timing-events-overview.md)  
 [<span data-ttu-id="7e94d-181">计时行为概述</span><span class="sxs-lookup"><span data-stu-id="7e94d-181">Timing Behaviors Overview</span></span>](../../../../docs/framework/wpf/graphics-multimedia/timing-behaviors-overview.md)
