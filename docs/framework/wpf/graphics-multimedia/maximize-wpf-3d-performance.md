---
title: "最大程度地提高 WPF 三维性能"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology:
- dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- 3-D graphics [WPF]
ms.assetid: 4bcf949d-d92f-4d8d-8a9b-1e4c61b25bf6
caps.latest.revision: 
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 45053762a4782544531a09c92531b26f99663016
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/22/2017
---
# <a name="maximize-wpf-3d-performance"></a><span data-ttu-id="cf4a5-102">最大程度地提高 WPF 三维性能</span><span class="sxs-lookup"><span data-stu-id="cf4a5-102">Maximize WPF 3D Performance</span></span>
<span data-ttu-id="cf4a5-103">当你使用[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]生成 3D 控件并将三维场景包括在你的应用程序，务必考虑性能优化。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-103">As you use the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] to build 3D controls and include 3D scenes in your applications, it is important to consider performance optimization.</span></span> <span data-ttu-id="cf4a5-104">本主题提供 3D 类和产生性能影响你的应用程序，以及有关使用它们时优化性能的建议的属性的列表。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-104">This topic provides a list of 3D classes and properties that have performance implications for your application, along with recommendations for optimizing performance when you use them.</span></span>  
  
 <span data-ttu-id="cf4a5-105">本主题假定已深入的了解[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]三维功能。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-105">This topic assumes an advanced understanding of [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] 3D features.</span></span> <span data-ttu-id="cf4a5-106">本文档中的建议适用于"呈现层 2"-大致定义为支持像素着色器版本 2.0 和顶点着色器版本 2.0 的硬件。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-106">The suggestions in this document apply to "rendering tier 2"—roughly defined as hardware that supports pixel shader version 2.0 and vertex shader version 2.0.</span></span> <span data-ttu-id="cf4a5-107">有关更多详细信息，请参阅[图形呈现层](../../../../docs/framework/wpf/advanced/graphics-rendering-tiers.md)。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-107">For more details, see [Graphics Rendering Tiers](../../../../docs/framework/wpf/advanced/graphics-rendering-tiers.md).</span></span>  
  
## <a name="performance-impact-high"></a><span data-ttu-id="cf4a5-108">对性能的影响： 高</span><span class="sxs-lookup"><span data-stu-id="cf4a5-108">Performance Impact: High</span></span>  
  
|<span data-ttu-id="cf4a5-109">属性</span><span class="sxs-lookup"><span data-stu-id="cf4a5-109">Property</span></span>|<span data-ttu-id="cf4a5-110">建议</span><span class="sxs-lookup"><span data-stu-id="cf4a5-110">Recommendation</span></span>|  
|-|-|  
|<xref:System.Windows.Media.Brush>|<span data-ttu-id="cf4a5-111">画笔速度 （最快到最慢）：</span><span class="sxs-lookup"><span data-stu-id="cf4a5-111">Brush speed (fastest to slowest):</span></span><br /><br /> <xref:System.Windows.Media.SolidColorBrush><br /><br /> <xref:System.Windows.Media.LinearGradientBrush><br /><br /> <xref:System.Windows.Media.ImageBrush><br /><br /> <span data-ttu-id="cf4a5-112"><xref:System.Windows.Media.DrawingBrush>（已缓存）</span><span class="sxs-lookup"><span data-stu-id="cf4a5-112"><xref:System.Windows.Media.DrawingBrush> (cached)</span></span><br /><br /> <span data-ttu-id="cf4a5-113"><xref:System.Windows.Media.VisualBrush>（已缓存）</span><span class="sxs-lookup"><span data-stu-id="cf4a5-113"><xref:System.Windows.Media.VisualBrush> (cached)</span></span><br /><br /> <xref:System.Windows.Media.RadialGradientBrush><br /><br /> <span data-ttu-id="cf4a5-114"><xref:System.Windows.Media.DrawingBrush>（缓存）</span><span class="sxs-lookup"><span data-stu-id="cf4a5-114"><xref:System.Windows.Media.DrawingBrush> (uncached)</span></span><br /><br /> <span data-ttu-id="cf4a5-115"><xref:System.Windows.Media.VisualBrush>（缓存）</span><span class="sxs-lookup"><span data-stu-id="cf4a5-115"><xref:System.Windows.Media.VisualBrush> (uncached)</span></span>|  
|<xref:System.Windows.UIElement.ClipToBoundsProperty>|<span data-ttu-id="cf4a5-116">设置`Viewport3D.ClipToBounds`为 false 时不需要具有[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]显式剪辑的内容<xref:System.Windows.Controls.Viewport3D>到 Viewport3D 的矩形。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-116">Set `Viewport3D.ClipToBounds` to false whenever you do not need to have [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] explicitly clip the content of a <xref:System.Windows.Controls.Viewport3D> to the Viewport3D’s rectangle.</span></span> [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]<span data-ttu-id="cf4a5-117">消除锯齿剪辑可能会很慢，和`ClipToBounds`默认处于启用状态 （较慢） 上<xref:System.Windows.Controls.Viewport3D>。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-117"> antialiased clipping can be very slow, and `ClipToBounds` is enabled (slow) by default on <xref:System.Windows.Controls.Viewport3D>.</span></span>|  
|<xref:System.Windows.UIElement.IsHitTestVisible%2A>|<span data-ttu-id="cf4a5-118">设置`Viewport3D.IsHitTestVisible`为 false 时不需要[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]要考虑的内容<xref:System.Windows.Controls.Viewport3D>执行鼠标命中测试。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-118">Set `Viewport3D.IsHitTestVisible` to false whenever you do not need [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] to consider the content of a <xref:System.Windows.Controls.Viewport3D> when performing mouse hit testing.</span></span>  <span data-ttu-id="cf4a5-119">命中测试的 3D 内容在软件中完成，并可能会遇到大型网格很慢。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-119">Hit testing 3D content is done in software and can be slow with large meshes.</span></span> <span data-ttu-id="cf4a5-120"><xref:System.Windows.UIElement.IsHitTestVisible%2A>（较慢） 上默认启用<xref:System.Windows.Controls.Viewport3D>。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-120"><xref:System.Windows.UIElement.IsHitTestVisible%2A> is enabled (slow) by default on <xref:System.Windows.Controls.Viewport3D>.</span></span>|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D>|<span data-ttu-id="cf4a5-121">仅当它们需要不同的材料或转换时，请创建不同的模型。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-121">Create different models only when they require different Materials or Transforms.</span></span>  <span data-ttu-id="cf4a5-122">否则，尝试将合并许多<xref:System.Windows.Media.Media3D.GeometryModel3D>实例具有相同的材料和转换到更大一些<xref:System.Windows.Media.Media3D.GeometryModel3D>和<xref:System.Windows.Media.Media3D.MeshGeometry3D>实例。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-122">Otherwise, try to coalesce many <xref:System.Windows.Media.Media3D.GeometryModel3D> instances with the same Materials and Transforms into a few larger <xref:System.Windows.Media.Media3D.GeometryModel3D> and <xref:System.Windows.Media.Media3D.MeshGeometry3D> instances.</span></span>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|<span data-ttu-id="cf4a5-123">网格动画-更改每个帧基于网格的各个顶点-并不总是有效地[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-123">Mesh animation—changing the individual vertices of a mesh on a per-frame basis—is not always efficient in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span></span>  <span data-ttu-id="cf4a5-124">为了尽量减少对性能的影响更改通知，修改每个顶点时，请在执行每个顶点修改之前分离从可视化树网格。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-124">To minimize the performance impact of change notifications when each vertex is modified, detach the mesh from the visual tree before performing per-vertex modification.</span></span>  <span data-ttu-id="cf4a5-125">后已修改网格，将其重新附加到的可视化树。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-125">Once the mesh has been modified, reattach it to the visual tree.</span></span>  <span data-ttu-id="cf4a5-126">此外，应尝试尽量减少将以这种方式进行动画处理的网格的大小。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-126">Also, try to minimize the size of meshes that will be animated in this way.</span></span>|  
|<span data-ttu-id="cf4a5-127">三维抗锯齿</span><span class="sxs-lookup"><span data-stu-id="cf4a5-127">3D Antialiasing</span></span>|<span data-ttu-id="cf4a5-128">若要提高呈现速度，禁用多级采样上<xref:System.Windows.Controls.Viewport3D>通过设置附加的属性<xref:System.Windows.Media.RenderOptions.EdgeMode%2A>到`Aliased`。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-128">To increase rendering speed, disable multisampling on a <xref:System.Windows.Controls.Viewport3D> by setting the attached property <xref:System.Windows.Media.RenderOptions.EdgeMode%2A> to `Aliased`.</span></span>  <span data-ttu-id="cf4a5-129">默认情况下上, 禁用三维抗锯齿[!INCLUDE[TLA#tla_winxp](../../../../includes/tlasharptla-winxp-md.md)]并已启用上[!INCLUDE[TLA#tla_longhorn](../../../../includes/tlasharptla-longhorn-md.md)]具有 4 个样本每个像素。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-129">By default, 3D antialiasing is disabled on [!INCLUDE[TLA#tla_winxp](../../../../includes/tlasharptla-winxp-md.md)] and enabled on [!INCLUDE[TLA#tla_longhorn](../../../../includes/tlasharptla-longhorn-md.md)] with 4 samples per pixel.</span></span>|  
|<span data-ttu-id="cf4a5-130">Text</span><span class="sxs-lookup"><span data-stu-id="cf4a5-130">Text</span></span>|<span data-ttu-id="cf4a5-131">在三维场景中实时文本 (因为它在实时<xref:System.Windows.Media.DrawingBrush>或<xref:System.Windows.Media.VisualBrush>) 可能会很慢。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-131">Live text in a 3D scene (live because it’s in a <xref:System.Windows.Media.DrawingBrush> or <xref:System.Windows.Media.VisualBrush>) can be slow.</span></span> <span data-ttu-id="cf4a5-132">尝试改为使用文本的图像 (通过<xref:System.Windows.Media.Imaging.RenderTargetBitmap>) 除非文本会更改。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-132">Try to use images of the text instead (via <xref:System.Windows.Media.Imaging.RenderTargetBitmap>) unless the text will change.</span></span>|  
|<xref:System.Windows.Media.TileBrush>|<span data-ttu-id="cf4a5-133">如果必须使用<xref:System.Windows.Media.VisualBrush>或<xref:System.Windows.Media.DrawingBrush>三维场景中由于画笔的内容不是静态的请尝试缓存画笔 (设置附加的属性<xref:System.Windows.Media.RenderOptions.CachingHint%2A>到`Cache`)。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-133">If you must use a <xref:System.Windows.Media.VisualBrush> or a <xref:System.Windows.Media.DrawingBrush> in a 3D scene because the brush’s content is not static, try caching the brush (setting the attached property <xref:System.Windows.Media.RenderOptions.CachingHint%2A> to `Cache`).</span></span>  <span data-ttu-id="cf4a5-134">设置最小和最大刻度失效阈值 (具有附加属性<xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A>和<xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>)，以便缓存的画笔都不会同时仍保持你所需的质量级别过于频繁，重新生成。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-134">Set the minimum and maximum scale invalidation thresholds (with the attached properties <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A> and <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>) so that the cached brushes won’t be regenerated too frequently, while still maintaining your desired level of quality.</span></span>  <span data-ttu-id="cf4a5-135">默认情况下，<xref:System.Windows.Media.DrawingBrush>和<xref:System.Windows.Media.VisualBrush>不缓存，这意味着，每次使用画笔绘制的内容必须是重新呈现，画笔的整个内容必须首先重新呈现到中间面。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-135">By default, <xref:System.Windows.Media.DrawingBrush> and <xref:System.Windows.Media.VisualBrush> are not cached, meaning that every time something painted with the brush has to be re-rendered, the entire content of the brush must first be re-rendered to an intermediate surface.</span></span>|  
|<xref:System.Windows.Media.Effects.BitmapEffect>|<span data-ttu-id="cf4a5-136"><xref:System.Windows.Media.Effects.BitmapEffect>强制所有受影响的内容，而无需硬件加速呈现。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-136"><xref:System.Windows.Media.Effects.BitmapEffect> forces all affected content to be rendered without hardware acceleration.</span></span>  <span data-ttu-id="cf4a5-137">为了获得最佳性能，不要使用<xref:System.Windows.Media.Effects.BitmapEffect>。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-137">For best performance, do not use <xref:System.Windows.Media.Effects.BitmapEffect>.</span></span>|  
  
## <a name="performance-impact-medium"></a><span data-ttu-id="cf4a5-138">对性能的影响： 中型</span><span class="sxs-lookup"><span data-stu-id="cf4a5-138">Performance Impact: Medium</span></span>  
  
|<span data-ttu-id="cf4a5-139">属性</span><span class="sxs-lookup"><span data-stu-id="cf4a5-139">Property</span></span>|<span data-ttu-id="cf4a5-140">建议</span><span class="sxs-lookup"><span data-stu-id="cf4a5-140">Recommendation</span></span>|  
|-|-|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|<span data-ttu-id="cf4a5-141">当网格定义为邻接通过共享顶点的三角形，这些顶点具有相同的位置、 正常、 和纹理坐标时，定义每个共享的顶点仅一次，然后通过使用索引来定义三角形<xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-141">When a mesh is defined as abutting triangles with shared vertices and those vertices have the same position, normal, and texture coordinates, define each shared vertex only once and then define your triangles by index with <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>.</span></span>|  
|<xref:System.Windows.Media.ImageBrush>|<span data-ttu-id="cf4a5-142">尝试时你可以显式控制大小减小纹理大小 (当你使用<xref:System.Windows.Media.Imaging.RenderTargetBitmap>和/或<xref:System.Windows.Media.ImageBrush>)。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-142">Try to minimize texture sizes when you have explicit control over the size (when you’re using a <xref:System.Windows.Media.Imaging.RenderTargetBitmap> and/or an <xref:System.Windows.Media.ImageBrush>).</span></span>  <span data-ttu-id="cf4a5-143">请注意较低分辨率纹理可以减少视觉质量，因此尝试查找之间质量和性能的最佳平衡。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-143">Note that lower resolution textures can decrease visual quality, so try to find the right balance between quality and performance.</span></span>|  
|<span data-ttu-id="cf4a5-144">不透明度</span><span class="sxs-lookup"><span data-stu-id="cf4a5-144">Opacity</span></span>|<span data-ttu-id="cf4a5-145">当呈现半透明的三维内容 （如反射）、 画笔或材料上使用的不透明度属性 (通过<xref:System.Windows.Media.Brush.Opacity%2A>或<xref:System.Windows.Media.Media3D.DiffuseMaterial.Color%2A>) 而不是创建单独的半透明<xref:System.Windows.Controls.Viewport3D>通过设置`Viewport3D.Opacity`为小于 1 的值。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-145">When rendering translucent 3D content (such as reflections), use the opacity properties on brushes or materials (via <xref:System.Windows.Media.Brush.Opacity%2A> or <xref:System.Windows.Media.Media3D.DiffuseMaterial.Color%2A>) instead of creating a separate translucent <xref:System.Windows.Controls.Viewport3D> by setting `Viewport3D.Opacity` to a value less than 1.</span></span>|  
|<xref:System.Windows.Controls.Viewport3D>|<span data-ttu-id="cf4a5-146">数量降至最低<xref:System.Windows.Controls.Viewport3D>对象正在使用场景中。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-146">Minimize the number of <xref:System.Windows.Controls.Viewport3D> objects you’re using in a scene.</span></span>  <span data-ttu-id="cf4a5-147">将多个三维模型放置在同一 Viewport3D，而无需创建单独 Viewport3D 实例以供每个模型。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-147">Put many 3D models in the same Viewport3D rather than creating separate Viewport3D instances for each model.</span></span>|  
|<xref:System.Windows.Freezable>|<span data-ttu-id="cf4a5-148">通常是有益重用<xref:System.Windows.Media.Media3D.MeshGeometry3D>， <xref:System.Windows.Media.Media3D.GeometryModel3D>，画笔和材料。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-148">Typically it’s beneficial to reuse <xref:System.Windows.Media.Media3D.MeshGeometry3D>, <xref:System.Windows.Media.Media3D.GeometryModel3D>, Brushes, and Materials.</span></span>  <span data-ttu-id="cf4a5-149">所有都 multiparentable，因为它们源自`Freezable`。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-149">All are multiparentable since they’re derived from `Freezable`.</span></span>|  
|<xref:System.Windows.Freezable>|<span data-ttu-id="cf4a5-150">调用<xref:System.Windows.Freezable.Freeze%2A>上时将保持其属性的可冻结对象的方法在你的应用程序中不变。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-150">Call the <xref:System.Windows.Freezable.Freeze%2A> method on Freezables when their properties will remain unchanged in your application.</span></span>  <span data-ttu-id="cf4a5-151">冻结可以降低工作集和提高速度。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-151">Freezing can decrease working set and increase speed.</span></span>|  
|<xref:System.Windows.Media.Brush>|<span data-ttu-id="cf4a5-152">使用<xref:System.Windows.Media.ImageBrush>而不是<xref:System.Windows.Media.VisualBrush>或<xref:System.Windows.Media.DrawingBrush>时的画笔的内容将不会更改。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-152">Use <xref:System.Windows.Media.ImageBrush> instead of <xref:System.Windows.Media.VisualBrush> or <xref:System.Windows.Media.DrawingBrush> when the content of the brush will not change.</span></span>  <span data-ttu-id="cf4a5-153">二维内容可以转换为<xref:System.Windows.Controls.Image>通过<xref:System.Windows.Media.Imaging.RenderTargetBitmap>，然后再在<xref:System.Windows.Media.ImageBrush>。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-153">2D content can be converted to an <xref:System.Windows.Controls.Image> via <xref:System.Windows.Media.Imaging.RenderTargetBitmap> and then used in an <xref:System.Windows.Media.ImageBrush>.</span></span>|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A>|<span data-ttu-id="cf4a5-154">不要使用<xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A>除非你确实需要查看的背面你<xref:System.Windows.Media.Media3D.GeometryModel3D>。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-154">Don’t use <xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A> unless you actually need to see the back faces of your <xref:System.Windows.Media.Media3D.GeometryModel3D>.</span></span>|  
|<xref:System.Windows.Media.Media3D.Light>|<span data-ttu-id="cf4a5-155">浅色速度 （最快到最慢）：</span><span class="sxs-lookup"><span data-stu-id="cf4a5-155">Light speed (fastest to slowest):</span></span><br /><br /> <xref:System.Windows.Media.Media3D.AmbientLight><br /><br /> <xref:System.Windows.Media.Media3D.DirectionalLight><br /><br /> <xref:System.Windows.Media.Media3D.PointLight><br /><br /> <xref:System.Windows.Media.Media3D.SpotLight>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|<span data-ttu-id="cf4a5-156">尝试使网格大小小于这些限制：</span><span class="sxs-lookup"><span data-stu-id="cf4a5-156">Try to keep mesh sizes under these limits:</span></span><br /><br /> <span data-ttu-id="cf4a5-157"><xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>: 20001 个<xref:System.Windows.Media.Media3D.Point3D>实例</span><span class="sxs-lookup"><span data-stu-id="cf4a5-157"><xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>: 20,001 <xref:System.Windows.Media.Media3D.Point3D> instances</span></span><br /><br /> <span data-ttu-id="cf4a5-158"><xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>: 60003 个<xref:System.Int32>实例</span><span class="sxs-lookup"><span data-stu-id="cf4a5-158"><xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>: 60,003 <xref:System.Int32> instances</span></span>|  
|<xref:System.Windows.Media.Media3D.Material>|<span data-ttu-id="cf4a5-159">材料速度 （最快到最慢）：</span><span class="sxs-lookup"><span data-stu-id="cf4a5-159">Material speed (fastest to slowest):</span></span><br /><br /> <xref:System.Windows.Media.Media3D.EmissiveMaterial><br /><br /> <xref:System.Windows.Media.Media3D.DiffuseMaterial><br /><br /> <xref:System.Windows.Media.Media3D.SpecularMaterial>|  
|<xref:System.Windows.Media.Brush>|[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]<span data-ttu-id="cf4a5-160">三维不一致的方式来取消不可见的画笔 （黑色的环境画笔、 清除画笔等）。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-160"> 3D doesn't opt out of invisible brushes (black ambient brushes, clear brushes, etc.) in a consistent way.</span></span>  <span data-ttu-id="cf4a5-161">请考虑省略这些场景。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-161">Consider omitting these from your scene.</span></span>|  
|<xref:System.Windows.Media.Media3D.MaterialGroup>|<span data-ttu-id="cf4a5-162">每个<xref:System.Windows.Media.Media3D.Material>中<xref:System.Windows.Media.Media3D.MaterialGroup>导致另一个呈现处理过程，因此包含多个材料，甚至简单材料，可以极大地提高你的 GPU 上的填充请求。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-162">Each <xref:System.Windows.Media.Media3D.Material> in a <xref:System.Windows.Media.Media3D.MaterialGroup> causes another rendering pass, so including many materials, even simple materials, can dramatically increase the fill demands on your GPU.</span></span>  <span data-ttu-id="cf4a5-163">中 material 的数量降至最低你<xref:System.Windows.Media.Media3D.MaterialGroup>。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-163">Minimize the number of materials in your <xref:System.Windows.Media.Media3D.MaterialGroup>.</span></span>|  
  
## <a name="performance-impact-low"></a><span data-ttu-id="cf4a5-164">对性能的影响： 低</span><span class="sxs-lookup"><span data-stu-id="cf4a5-164">Performance Impact: Low</span></span>  
  
|<span data-ttu-id="cf4a5-165">属性</span><span class="sxs-lookup"><span data-stu-id="cf4a5-165">Property</span></span>|<span data-ttu-id="cf4a5-166">建议</span><span class="sxs-lookup"><span data-stu-id="cf4a5-166">Recommendation</span></span>|  
|-|-|  
|<xref:System.Windows.Media.Media3D.Transform3DGroup>|<span data-ttu-id="cf4a5-167">当你不需要动画或数据绑定，而不使用包含多个转换的转换组使用单个<xref:System.Windows.Media.Media3D.MatrixTransform3D>，将其设置为要将否则转换组中独立存在的所有转换的产品。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-167">When you don’t need animation or data binding, instead of using a transform group containing multiple transforms, use a single <xref:System.Windows.Media.Media3D.MatrixTransform3D>, setting it to be the product of all the transforms that would otherwise exist independently in the transform group.</span></span>|  
|<xref:System.Windows.Media.Media3D.Light>|<span data-ttu-id="cf4a5-168">灯场景中的数量降至最低。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-168">Minimize the number of lights in your scene.</span></span> <span data-ttu-id="cf4a5-169">太多灯在场景中的将强制[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]为回退到软件呈现。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-169">Too many lights in a scene will force [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] to fall back to software rendering.</span></span>  <span data-ttu-id="cf4a5-170">限制大致是 110<xref:System.Windows.Media.Media3D.DirectionalLight>对象，70<xref:System.Windows.Media.Media3D.PointLight>对象或 40<xref:System.Windows.Media.Media3D.SpotLight>对象。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-170">The limits are roughly 110 <xref:System.Windows.Media.Media3D.DirectionalLight> objects, 70 <xref:System.Windows.Media.Media3D.PointLight> objects, or 40 <xref:System.Windows.Media.Media3D.SpotLight> objects.</span></span>|  
|<xref:System.Windows.Media.Media3D.ModelVisual3D>|<span data-ttu-id="cf4a5-171">分隔将对象从静态对象移通过将它们放在单独<xref:System.Windows.Media.Media3D.ModelVisual3D>实例。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-171">Separate moving objects from static objects by putting them in separate <xref:System.Windows.Media.Media3D.ModelVisual3D> instances.</span></span>  <span data-ttu-id="cf4a5-172">ModelVisual3D 是"多于"<xref:System.Windows.Media.Media3D.GeometryModel3D>因为它将缓存转换后的边界。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-172">ModelVisual3D is "heavier" than <xref:System.Windows.Media.Media3D.GeometryModel3D> because it caches transformed bounds.</span></span>  <span data-ttu-id="cf4a5-173">GeometryModel3D 经过优化，可以模型ModelVisual3D 经过优化，可以场景节点。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-173">GeometryModel3D is optimized to be a model; ModelVisual3D is optimized to be a scene node.</span></span>  <span data-ttu-id="cf4a5-174">使用 ModelVisual3D 将 GeometryModel3D 的共享的实例放入场景。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-174">Use ModelVisual3D to put shared instances of GeometryModel3D into the scene.</span></span>|  
|<xref:System.Windows.Media.Media3D.Light>|<span data-ttu-id="cf4a5-175">最小化的更改的场景中光源的数目的次数。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-175">Minimize the number of times you change the number of lights in the scene.</span></span>  <span data-ttu-id="cf4a5-176">浅色计数的每个更改强制着色器重新生成和重新编译，除非该配置具有以前存在 （并且因此缓存具有其着色器）。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-176">Each change of light count forces a shader regeneration and recompilation unless that configuration has existed previously (and thus had its shader cached).</span></span>|  
|<span data-ttu-id="cf4a5-177">浅</span><span class="sxs-lookup"><span data-stu-id="cf4a5-177">Light</span></span>|<span data-ttu-id="cf4a5-178">黑色光源是不可见，但它们会增加呈现时间;请考虑省略它们。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-178">Black lights won’t be visible, but they will add to render time; consider omitting them.</span></span>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|<span data-ttu-id="cf4a5-179">若要尽量减少大型集合中的构造时间[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]，如 MeshGeometry3D <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>， <xref:System.Windows.Media.Media3D.MeshGeometry3D.Normals%2A>， <xref:System.Windows.Media.Media3D.MeshGeometry3D.TextureCoordinates%2A>，和<xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>，预先大小之前值填充的集合。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-179">To minimize the construction time of large collections in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], such as a MeshGeometry3D’s <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.Normals%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.TextureCoordinates%2A>, and <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>, pre-size the collections before value population.</span></span> <span data-ttu-id="cf4a5-180">如果可能，请将传递如数组或列表的集合的构造函数预先填充的数据结构。</span><span class="sxs-lookup"><span data-stu-id="cf4a5-180">If possible, pass the collections’ constructors prepopulated data structures such as arrays or Lists.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="cf4a5-181">请参阅</span><span class="sxs-lookup"><span data-stu-id="cf4a5-181">See Also</span></span>  
 [<span data-ttu-id="cf4a5-182">3D 图形概述</span><span class="sxs-lookup"><span data-stu-id="cf4a5-182">3-D Graphics Overview</span></span>](../../../../docs/framework/wpf/graphics-multimedia/3-d-graphics-overview.md)
