---
title: 安全性 (WPF)
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-wpf
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- XAML files [WPF], sandbox behavior
- browser-hosted application security [WPF]
- application security [WPF]
- navigation security [WPF]
- loose XAML files [WPF], sandbox behavior
- WPF security [WPF]
- WebBrowser control [WPF], security
- feature controls [WPF], security
- XBAP security [WPF]
- Internet Explorer security settings [WPF]
ms.assetid: ee1baea0-3611-4e36-9ad6-fcd5205376fb
caps.latest.revision: 38
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 134efba11742ab9cc8da2dfab77c233b52f1bcf1
ms.sourcegitcommit: 03ee570f6f528a7d23a4221dcb26a9498edbdf8c
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/28/2018
---
# <a name="security-wpf"></a><span data-ttu-id="bdb65-102">安全性 (WPF)</span><span class="sxs-lookup"><span data-stu-id="bdb65-102">Security (WPF)</span></span>
<a name="introduction"></a> <span data-ttu-id="bdb65-103">在开发时[!INCLUDE[TLA#tla_wpf](../../../includes/tlasharptla-wpf-md.md)]独立应用程序和浏览器承载的应用程序，你必须考虑的安全模型。</span><span class="sxs-lookup"><span data-stu-id="bdb65-103">When developing [!INCLUDE[TLA#tla_wpf](../../../includes/tlasharptla-wpf-md.md)] standalone and browser-hosted applications, you must consider the security model.</span></span> [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="bdb65-104"> 独立应用程序使用不受限制的权限执行 ( [!INCLUDE[TLA2#tla_cas](../../../includes/tla2sharptla-cas-md.md)] **FullTrust**权限集)、 是否使用 Windows Installer (.msi) XCopy 部署或[!INCLUDE[TLA2#tla_clickonce](../../../includes/tla2sharptla-clickonce-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="bdb65-104"> standalone applications execute with unrestricted permissions ( [!INCLUDE[TLA2#tla_cas](../../../includes/tla2sharptla-cas-md.md)]**FullTrust** permission set), whether deployed using Windows Installer (.msi), XCopy, or [!INCLUDE[TLA2#tla_clickonce](../../../includes/tla2sharptla-clickonce-md.md)].</span></span> <span data-ttu-id="bdb65-105">不支持使用 ClickOnce 部署部分信任的独立 WPF 应用程序。</span><span class="sxs-lookup"><span data-stu-id="bdb65-105">Deploying partial-trust, standalone WPF applications with ClickOnce is unsupported.</span></span> <span data-ttu-id="bdb65-106">但是，完全信任主机应用程序可以创建部分信任<xref:System.AppDomain>使用.NET Framework 外接程序模型。</span><span class="sxs-lookup"><span data-stu-id="bdb65-106">However, a full-trust host application can create a partial-trust <xref:System.AppDomain> using the .NET Framework Add-in model.</span></span> <span data-ttu-id="bdb65-107">有关详细信息，请参阅[WPF 外接程序概述](../../../docs/framework/wpf/app-development/wpf-add-ins-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="bdb65-107">For more information, see [WPF Add-Ins Overview](../../../docs/framework/wpf/app-development/wpf-add-ins-overview.md).</span></span>  
  
 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="bdb65-108"> 浏览器承载的应用程序托管的[!INCLUDE[TLA#tla_iegeneric](../../../includes/tlasharptla-iegeneric-md.md)]或 Firefox，和可以是[!INCLUDE[TLA#tla_xbap#plural](../../../includes/tlasharptla-xbapsharpplural-md.md)]或松散[!INCLUDE[TLA#tla_xaml](../../../includes/tlasharptla-xaml-md.md)]文档中的详细信息，请参阅[WPF XAML 浏览器应用程序概述](../../../docs/framework/wpf/app-development/wpf-xaml-browser-applications-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="bdb65-108"> browser-hosted applications are hosted by [!INCLUDE[TLA#tla_iegeneric](../../../includes/tlasharptla-iegeneric-md.md)] or Firefox, and can be either [!INCLUDE[TLA#tla_xbap#plural](../../../includes/tlasharptla-xbapsharpplural-md.md)] or loose [!INCLUDE[TLA#tla_xaml](../../../includes/tlasharptla-xaml-md.md)] documents For more information, see [WPF XAML Browser Applications Overview](../../../docs/framework/wpf/app-development/wpf-xaml-browser-applications-overview.md).</span></span>  
  
 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="bdb65-109"> 浏览器承载的应用程序在默认情况下，仅限于默认值在部分信任安全沙盒内, 执行[!INCLUDE[TLA2#tla_cas](../../../includes/tla2sharptla-cas-md.md)] **Internet**区域权限集。</span><span class="sxs-lookup"><span data-stu-id="bdb65-109"> browser-hosted applications execute within a partial trust security sandbox, by default, which is limited to the default [!INCLUDE[TLA2#tla_cas](../../../includes/tla2sharptla-cas-md.md)]**Internet** zone permission set.</span></span> <span data-ttu-id="bdb65-110">这将有效地隔离[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]浏览器承载你希望典型 Web 应用程序隔离的相同方式中的客户端计算机的应用程序。</span><span class="sxs-lookup"><span data-stu-id="bdb65-110">This effectively isolates [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] browser-hosted applications from the client computer in the same way that you would expect typical Web applications to be isolated.</span></span> <span data-ttu-id="bdb65-111">XBAP 最高可以将权限提升到“完全信任”，具体取决于部署 URL 的安全区域和客户端的安全配置。</span><span class="sxs-lookup"><span data-stu-id="bdb65-111">An XBAP can elevate privileges, up to Full Trust, depending on the security zone of the deployment URL and the client's security configuration.</span></span> <span data-ttu-id="bdb65-112">有关详细信息，请参阅 [WPF 部分信任安全性](../../../docs/framework/wpf/wpf-partial-trust-security.md)。</span><span class="sxs-lookup"><span data-stu-id="bdb65-112">For more information, see [WPF Partial Trust Security](../../../docs/framework/wpf/wpf-partial-trust-security.md).</span></span>  
  
 <span data-ttu-id="bdb65-113">本主题讨论的安全模型[!INCLUDE[TLA#tla_wpf](../../../includes/tlasharptla-wpf-md.md)]独立和浏览器承载的应用程序。</span><span class="sxs-lookup"><span data-stu-id="bdb65-113">This topic discusses the security model for [!INCLUDE[TLA#tla_wpf](../../../includes/tlasharptla-wpf-md.md)] standalone and browser-hosted applications.</span></span>  
  
 <span data-ttu-id="bdb65-114">本主题包含以下各节：</span><span class="sxs-lookup"><span data-stu-id="bdb65-114">This topic contains the following sections:</span></span>  
  
-   [<span data-ttu-id="bdb65-115">安全导航</span><span class="sxs-lookup"><span data-stu-id="bdb65-115">Safe Navigation</span></span>](#SafeTopLevelNavigation)  
  
-   [<span data-ttu-id="bdb65-116">Web 浏览软件安全设置</span><span class="sxs-lookup"><span data-stu-id="bdb65-116">Web Browsing Software Security Settings</span></span>](#InternetExplorerSecuritySettings)  
  
-   [<span data-ttu-id="bdb65-117">WebBrowser 控件和功能控件</span><span class="sxs-lookup"><span data-stu-id="bdb65-117">WebBrowser Control and Feature Controls</span></span>](#webbrowser_control_and_feature_controls)  
  
-   [<span data-ttu-id="bdb65-118">对部分受信任的客户端应用程序禁用 APTCA 程序集</span><span class="sxs-lookup"><span data-stu-id="bdb65-118">Disabling APTCA Assemblies for Partially Trusted Client Applications</span></span>](#APTCA)  
  
-   [<span data-ttu-id="bdb65-119">宽松 XAML 文件的沙盒行为</span><span class="sxs-lookup"><span data-stu-id="bdb65-119">Sandbox Behavior for Loose XAML Files</span></span>](#LooseContentSandboxing)  
  
-   [<span data-ttu-id="bdb65-120">用于开发可提高安全性的 WPF 应用程序的资源</span><span class="sxs-lookup"><span data-stu-id="bdb65-120">Resources for Developing WPF Applications that Promote Security</span></span>](#BestPractices)  
  
<a name="SafeTopLevelNavigation"></a>   
## <a name="safe-navigation"></a><span data-ttu-id="bdb65-121">安全导航</span><span class="sxs-lookup"><span data-stu-id="bdb65-121">Safe Navigation</span></span>  
 <span data-ttu-id="bdb65-122">有关[!INCLUDE[TLA2#tla_xbap#plural](../../../includes/tla2sharptla-xbapsharpplural-md.md)]，[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]区分两种类型的导航： 应用程序和浏览器。</span><span class="sxs-lookup"><span data-stu-id="bdb65-122">For [!INCLUDE[TLA2#tla_xbap#plural](../../../includes/tla2sharptla-xbapsharpplural-md.md)], [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] distinguishes two types of navigation: application and browser.</span></span>  
  
 <span data-ttu-id="bdb65-123">应用程序导航是指在浏览器托管的应用程序内的内容项之间进行导航。</span><span class="sxs-lookup"><span data-stu-id="bdb65-123">*Application navigation* is navigation between items of content within an application that is hosted by a browser.</span></span> <span data-ttu-id="bdb65-124">浏览器导航是指可更改浏览器自身的内容和位置 URL 的导航。</span><span class="sxs-lookup"><span data-stu-id="bdb65-124">*Browser navigation* is navigation that changes the content and location URL of a browser itself.</span></span> <span data-ttu-id="bdb65-125">应用程序导航 (通常为 XAML) 和浏览器导航 (通常为 HTML) 之间的关系如下图所示：</span><span class="sxs-lookup"><span data-stu-id="bdb65-125">The relationship between application navigation (typically XAML) and browser navigation (typically HTML) is shown in the following illustration:</span></span>
  
 <span data-ttu-id="bdb65-126">![导航示意图](../../../docs/framework/wpf/media/safetoplevelnavigationfigure.png "SafeTopLevelNavigationFigure")</span><span class="sxs-lookup"><span data-stu-id="bdb65-126">![Navigation diagram](../../../docs/framework/wpf/media/safetoplevelnavigationfigure.png "SafeTopLevelNavigationFigure")</span></span>  
  
 <span data-ttu-id="bdb65-127">被视为安全的内容类型[!INCLUDE[TLA2#tla_xbap](../../../includes/tla2sharptla-xbap-md.md)]以导航到主要由确定是否使用应用程序导航或浏览器导航。</span><span class="sxs-lookup"><span data-stu-id="bdb65-127">The type of content that is considered safe for an [!INCLUDE[TLA2#tla_xbap](../../../includes/tla2sharptla-xbap-md.md)] to navigate to is primarily determined by whether application navigation or browser navigation is used.</span></span>  
  
<a name="Application_Navigation_Security"></a>   
### <a name="application-navigation-security"></a><span data-ttu-id="bdb65-128">应用程序导航安全性</span><span class="sxs-lookup"><span data-stu-id="bdb65-128">Application Navigation Security</span></span>  
 <span data-ttu-id="bdb65-129">被视为安全如果它可以使用打包的标识，应用程序导航[!INCLUDE[TLA2#tla_uri](../../../includes/tla2sharptla-uri-md.md)]，它支持四种类型的内容：</span><span class="sxs-lookup"><span data-stu-id="bdb65-129">Application navigation is considered safe if it can be identified with a pack [!INCLUDE[TLA2#tla_uri](../../../includes/tla2sharptla-uri-md.md)], which supports four types of content:</span></span>  
  
|<span data-ttu-id="bdb65-130">内容类型</span><span class="sxs-lookup"><span data-stu-id="bdb65-130">Content Type</span></span>|<span data-ttu-id="bdb65-131">描述</span><span class="sxs-lookup"><span data-stu-id="bdb65-131">Description</span></span>|<span data-ttu-id="bdb65-132">URI 示例</span><span class="sxs-lookup"><span data-stu-id="bdb65-132">URI Example</span></span>|  
|------------------|-----------------|-----------------|  
|<span data-ttu-id="bdb65-133">资源</span><span class="sxs-lookup"><span data-stu-id="bdb65-133">Resource</span></span>|<span data-ttu-id="bdb65-134">添加到项目中的生成类型的文件**资源**。</span><span class="sxs-lookup"><span data-stu-id="bdb65-134">Files that are added to a project with a build type of **Resource**.</span></span>|`pack://application:,,,/MyResourceFile.xaml`|  
|<span data-ttu-id="bdb65-135">内容</span><span class="sxs-lookup"><span data-stu-id="bdb65-135">Content</span></span>|<span data-ttu-id="bdb65-136">添加到项目中的生成类型的文件**内容**。</span><span class="sxs-lookup"><span data-stu-id="bdb65-136">Files that are added to a project with a build type of **Content**.</span></span>|`pack://application:,,,/MyContentFile.xaml`|  
|<span data-ttu-id="bdb65-137">源站点</span><span class="sxs-lookup"><span data-stu-id="bdb65-137">Site of origin</span></span>|<span data-ttu-id="bdb65-138">添加到项目中的生成类型的文件**无**。</span><span class="sxs-lookup"><span data-stu-id="bdb65-138">Files that are added to a project with a build type of **None**.</span></span>|`pack://siteoforigin:,,,/MySiteOfOriginFile.xaml`|  
|<span data-ttu-id="bdb65-139">应用程序代码</span><span class="sxs-lookup"><span data-stu-id="bdb65-139">Application code</span></span>|<span data-ttu-id="bdb65-140">具有已编译代码隐藏的 XAML 资源。</span><span class="sxs-lookup"><span data-stu-id="bdb65-140">XAML resources that have a compiled code-behind.</span></span><br /><br /> <span data-ttu-id="bdb65-141">-或-</span><span class="sxs-lookup"><span data-stu-id="bdb65-141">-or-</span></span><br /><br /> <span data-ttu-id="bdb65-142">添加到项目中的生成类型的 XAML 文件**页**。</span><span class="sxs-lookup"><span data-stu-id="bdb65-142">XAML files that are added to a project with a build type of **Page**.</span></span>|<span data-ttu-id="bdb65-143">`pack://application:,,,/MyResourceFile` `.xaml`</span><span class="sxs-lookup"><span data-stu-id="bdb65-143">`pack://application:,,,/MyResourceFile` `.xaml`</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="bdb65-144">有关应用程序数据文件和包的详细信息[!INCLUDE[TLA2#tla_uri#plural](../../../includes/tla2sharptla-urisharpplural-md.md)]，请参阅[WPF 应用程序资源、 内容和数据文件](../../../docs/framework/wpf/app-development/wpf-application-resource-content-and-data-files.md)。</span><span class="sxs-lookup"><span data-stu-id="bdb65-144">For more information about application data files and pack [!INCLUDE[TLA2#tla_uri#plural](../../../includes/tla2sharptla-urisharpplural-md.md)], see [WPF Application Resource, Content, and Data Files](../../../docs/framework/wpf/app-development/wpf-application-resource-content-and-data-files.md).</span></span>  
  
 <span data-ttu-id="bdb65-145">可以由用户导航到这些内容类型的文件，也可以通过编程方式导航到这些内容类型的文件：</span><span class="sxs-lookup"><span data-stu-id="bdb65-145">Files of these content types can be navigated to by either the user or programmatically:</span></span>  
  
-   <span data-ttu-id="bdb65-146">**用户导航**。</span><span class="sxs-lookup"><span data-stu-id="bdb65-146">**User Navigation**.</span></span> <span data-ttu-id="bdb65-147">用户可通过单击导航<xref:System.Windows.Documents.Hyperlink>元素。</span><span class="sxs-lookup"><span data-stu-id="bdb65-147">The user navigates by clicking a <xref:System.Windows.Documents.Hyperlink> element.</span></span>  
  
-   <span data-ttu-id="bdb65-148">**编程导航**。</span><span class="sxs-lookup"><span data-stu-id="bdb65-148">**Programmatic Navigation**.</span></span> <span data-ttu-id="bdb65-149">应用程序而无需干预的用户，例如，通过设置导航<xref:System.Windows.Navigation.NavigationWindow.Source%2A?displayProperty=nameWithType>属性。</span><span class="sxs-lookup"><span data-stu-id="bdb65-149">The application navigates without involving the user, for example, by setting the <xref:System.Windows.Navigation.NavigationWindow.Source%2A?displayProperty=nameWithType> property.</span></span>  
  
<a name="Browser_Navigation_Security"></a>   
### <a name="browser-navigation-security"></a><span data-ttu-id="bdb65-150">浏览器导航安全性</span><span class="sxs-lookup"><span data-stu-id="bdb65-150">Browser Navigation Security</span></span>  
 <span data-ttu-id="bdb65-151">浏览器导航仅在以下条件下被视为安全：</span><span class="sxs-lookup"><span data-stu-id="bdb65-151">Browser navigation is considered safe only under the following conditions:</span></span>  
  
-   <span data-ttu-id="bdb65-152">**用户导航**。</span><span class="sxs-lookup"><span data-stu-id="bdb65-152">**User Navigation**.</span></span> <span data-ttu-id="bdb65-153">用户可通过单击导航<xref:System.Windows.Documents.Hyperlink>在主内的元素<xref:System.Windows.Navigation.NavigationWindow>、 不是在嵌套<xref:System.Windows.Controls.Frame>。</span><span class="sxs-lookup"><span data-stu-id="bdb65-153">The user navigates by clicking a <xref:System.Windows.Documents.Hyperlink> element that is within the main <xref:System.Windows.Navigation.NavigationWindow>, not in a nested <xref:System.Windows.Controls.Frame>.</span></span>  
  
-   <span data-ttu-id="bdb65-154">**区域**。</span><span class="sxs-lookup"><span data-stu-id="bdb65-154">**Zone**.</span></span> <span data-ttu-id="bdb65-155">要导航到的内容位于 Internet 或本地 Intranet 上。</span><span class="sxs-lookup"><span data-stu-id="bdb65-155">The content being navigated to is located on the Internet or the local intranet.</span></span>  
  
-   <span data-ttu-id="bdb65-156">**协议**。</span><span class="sxs-lookup"><span data-stu-id="bdb65-156">**Protocol**.</span></span> <span data-ttu-id="bdb65-157">正在使用的协议是**http**， **https**，**文件**，或**mailto**。</span><span class="sxs-lookup"><span data-stu-id="bdb65-157">The protocol being used is either **http**, **https**, **file**, or **mailto**.</span></span>  
  
 <span data-ttu-id="bdb65-158">如果[!INCLUDE[TLA2#tla_xbap](../../../includes/tla2sharptla-xbap-md.md)]尝试导航到内容不符合这些条件的方式<xref:System.Security.SecurityException>引发。</span><span class="sxs-lookup"><span data-stu-id="bdb65-158">If an [!INCLUDE[TLA2#tla_xbap](../../../includes/tla2sharptla-xbap-md.md)] attempts to navigate to content in a manner that does not comply with these conditions, a <xref:System.Security.SecurityException> is thrown.</span></span>  
  
<a name="InternetExplorerSecuritySettings"></a>   
## <a name="web-browsing-software-security-settings"></a><span data-ttu-id="bdb65-159">Web 浏览软件安全设置</span><span class="sxs-lookup"><span data-stu-id="bdb65-159">Web Browsing Software Security Settings</span></span>  
 <span data-ttu-id="bdb65-160">计算机上的安全设置决定了任何 Web 浏览软件被授予的访问权限。</span><span class="sxs-lookup"><span data-stu-id="bdb65-160">The security settings on your computer determine the access that any Web browsing software is granted.</span></span> <span data-ttu-id="bdb65-161">Web 浏览软件包括任何应用程序或组件，它使用[WinINet](http://go.microsoft.com/fwlink/?LinkId=179379)或[UrlMon](http://go.microsoft.com/fwlink/?LinkId=179383) Api，包括 Internet Explorer 和 PresentationHost.exe。</span><span class="sxs-lookup"><span data-stu-id="bdb65-161">Web browsing software includes any application or component that uses the [WinINet](http://go.microsoft.com/fwlink/?LinkId=179379) or [UrlMon](http://go.microsoft.com/fwlink/?LinkId=179383) APIs, including Internet Explorer and PresentationHost.exe.</span></span>  
  
 [!INCLUDE[TLA2#tla_iegeneric](../../../includes/tla2sharptla-iegeneric-md.md)]<span data-ttu-id="bdb65-162"> 提供了你可以依据配置允许通过或从要执行的功能的机制[!INCLUDE[TLA2#tla_iegeneric](../../../includes/tla2sharptla-iegeneric-md.md)]，其中包括：</span><span class="sxs-lookup"><span data-stu-id="bdb65-162"> provides a mechanism by which you can configure the functionality that is allowed to be executed by or from [!INCLUDE[TLA2#tla_iegeneric](../../../includes/tla2sharptla-iegeneric-md.md)], including the following:</span></span>  
  
-   <span data-ttu-id="bdb65-163">.NET framework 依赖于组件</span><span class="sxs-lookup"><span data-stu-id="bdb65-163">.NET Framework-reliant components</span></span>  
  
-   <span data-ttu-id="bdb65-164">ActiveX 控件和插件</span><span class="sxs-lookup"><span data-stu-id="bdb65-164">ActiveX controls and plug-ins</span></span>  
  
-   <span data-ttu-id="bdb65-165">下载</span><span class="sxs-lookup"><span data-stu-id="bdb65-165">Downloads</span></span>  
  
-   <span data-ttu-id="bdb65-166">脚本</span><span class="sxs-lookup"><span data-stu-id="bdb65-166">Scripting</span></span>  
  
-   <span data-ttu-id="bdb65-167">用户身份验证</span><span class="sxs-lookup"><span data-stu-id="bdb65-167">User Authentication</span></span>  
  
 <span data-ttu-id="bdb65-168">可以在这种方式保护的功能的集合配置为基于每个区域**Internet**， **Intranet**，**受信任的站点**，和**受限站点**区域。</span><span class="sxs-lookup"><span data-stu-id="bdb65-168">The collection of functionality that can be secured in this way is configured on a per-zone basis for the **Internet**, **Intranet**, **Trusted Sites**, and **Restricted Sites** zones.</span></span> <span data-ttu-id="bdb65-169">以下步骤描述如何配置安全设置：</span><span class="sxs-lookup"><span data-stu-id="bdb65-169">The following steps describe how to configure your security settings:</span></span>  
  
1.  <span data-ttu-id="bdb65-170">打开“控制面板” 。</span><span class="sxs-lookup"><span data-stu-id="bdb65-170">Open **Control Panel**.</span></span>  
  
2.  <span data-ttu-id="bdb65-171">单击**网络和 Internet** ，然后单击**Internet 选项**。</span><span class="sxs-lookup"><span data-stu-id="bdb65-171">Click **Network and Internet** and then click **Internet Options**.</span></span>  
  
     <span data-ttu-id="bdb65-172">将显示“Internet 选项”对话框。</span><span class="sxs-lookup"><span data-stu-id="bdb65-172">The Internet Options dialog box appears.</span></span>  
  
3.  <span data-ttu-id="bdb65-173">上**安全**选项卡上，选择要配置的安全设置的区域。</span><span class="sxs-lookup"><span data-stu-id="bdb65-173">On the **Security** tab, select the zone to configure the security settings for.</span></span>  
  
4.  <span data-ttu-id="bdb65-174">单击**自定义级别**按钮。</span><span class="sxs-lookup"><span data-stu-id="bdb65-174">Click the **Custom Level** button.</span></span>  
  
     <span data-ttu-id="bdb65-175">**安全设置**对话框随即出现，并且你可以配置为所选区域的安全设置。</span><span class="sxs-lookup"><span data-stu-id="bdb65-175">The **Security Settings** dialog box appears and you can configure the security settings for the selected zone.</span></span>  
  
     <span data-ttu-id="bdb65-176">![“安全设置”对话框](../../../docs/framework/wpf/media/wpfsecurityfigure1.PNG "WPFSecurityFigure1")</span><span class="sxs-lookup"><span data-stu-id="bdb65-176">![Security Settings dialog box](../../../docs/framework/wpf/media/wpfsecurityfigure1.PNG "WPFSecurityFigure1")</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="bdb65-177">也可以从 Internet Explorer 中进入“Internet 选项”对话框。</span><span class="sxs-lookup"><span data-stu-id="bdb65-177">You can also get to the Internet Options dialog box from Internet Explorer.</span></span> <span data-ttu-id="bdb65-178">单击**工具**，然后单击**Internet 选项**。</span><span class="sxs-lookup"><span data-stu-id="bdb65-178">Click **Tools** and then click **Internet Options**.</span></span>  
  
 <span data-ttu-id="bdb65-179">从开始[!INCLUDE[TLA#tla_ie7](../../../includes/tlasharptla-ie7-md.md)]，专门为.NET Framework 的以下安全设置将包括：</span><span class="sxs-lookup"><span data-stu-id="bdb65-179">Starting with [!INCLUDE[TLA#tla_ie7](../../../includes/tlasharptla-ie7-md.md)], the following security settings specifically for .NET Framework are included:</span></span>  
  
-   <span data-ttu-id="bdb65-180">**宽松 XAML**。</span><span class="sxs-lookup"><span data-stu-id="bdb65-180">**Loose XAML**.</span></span> <span data-ttu-id="bdb65-181">控件是否[!INCLUDE[TLA2#tla_iegeneric](../../../includes/tla2sharptla-iegeneric-md.md)]可以导航到并丢失[!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)]文件。</span><span class="sxs-lookup"><span data-stu-id="bdb65-181">Controls whether [!INCLUDE[TLA2#tla_iegeneric](../../../includes/tla2sharptla-iegeneric-md.md)] can navigate to and loose [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] files.</span></span> <span data-ttu-id="bdb65-182">（“启用”、“禁用”和“提示”选项）。</span><span class="sxs-lookup"><span data-stu-id="bdb65-182">(Enable, Disable, and Prompt options).</span></span>  
  
-   <span data-ttu-id="bdb65-183">**XAML 浏览器应用程序**。</span><span class="sxs-lookup"><span data-stu-id="bdb65-183">**XAML browser applications**.</span></span> <span data-ttu-id="bdb65-184">控件是否[!INCLUDE[TLA2#tla_iegeneric](../../../includes/tla2sharptla-iegeneric-md.md)]可以导航到并运行[!INCLUDE[TLA2#tla_xbap#plural](../../../includes/tla2sharptla-xbapsharpplural-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="bdb65-184">Controls whether [!INCLUDE[TLA2#tla_iegeneric](../../../includes/tla2sharptla-iegeneric-md.md)] can navigate to and run [!INCLUDE[TLA2#tla_xbap#plural](../../../includes/tla2sharptla-xbapsharpplural-md.md)].</span></span> <span data-ttu-id="bdb65-185">（“启用”、“禁用”和“提示”选项）。</span><span class="sxs-lookup"><span data-stu-id="bdb65-185">(Enable, Disable, and Prompt options).</span></span>  
  
 <span data-ttu-id="bdb65-186">默认情况下，这些设置所有启用了**Internet**，**本地 intranet**，和**受信任的站点**区域，和已禁用**受限站点**区域。</span><span class="sxs-lookup"><span data-stu-id="bdb65-186">By default, these settings are all enabled for the **Internet**, **Local intranet**, and **Trusted sites** zones, and disabled for the **Restricted sites** zone.</span></span>  
  
<a name="Security_Settings_for_IE6_and_Below"></a>   
### <a name="security-related-wpf-registry-settings"></a><span data-ttu-id="bdb65-187">与安全相关的 WPF 注册表设置</span><span class="sxs-lookup"><span data-stu-id="bdb65-187">Security-related WPF Registry Settings</span></span>  
 <span data-ttu-id="bdb65-188">除了可通过“Internet 选项”设置的安全设置之外，还可以通过设置以下注册表值有选择地阻止许多安全敏感 WPF 功能。</span><span class="sxs-lookup"><span data-stu-id="bdb65-188">In addition to the security settings available through the Internet Options, the following registry values are available for selectively blocking a number of security-sensitive WPF features.</span></span> <span data-ttu-id="bdb65-189">这些值在以下注册表项下定义：</span><span class="sxs-lookup"><span data-stu-id="bdb65-189">The values are defined under the following key:</span></span>  
  
 `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\Windows Presentation Foundation\Features`  
  
 <span data-ttu-id="bdb65-190">下表列出了可以设置的值。</span><span class="sxs-lookup"><span data-stu-id="bdb65-190">The following table lists the values that can be set.</span></span>  
  
|<span data-ttu-id="bdb65-191">值名称</span><span class="sxs-lookup"><span data-stu-id="bdb65-191">Value Name</span></span>|<span data-ttu-id="bdb65-192">值类型</span><span class="sxs-lookup"><span data-stu-id="bdb65-192">Value Type</span></span>|<span data-ttu-id="bdb65-193">值数据</span><span class="sxs-lookup"><span data-stu-id="bdb65-193">Value Data</span></span>|  
|----------------|----------------|----------------|  
|<span data-ttu-id="bdb65-194">XBAPDisallow</span><span class="sxs-lookup"><span data-stu-id="bdb65-194">XBAPDisallow</span></span>|<span data-ttu-id="bdb65-195">REG_DWORD</span><span class="sxs-lookup"><span data-stu-id="bdb65-195">REG_DWORD</span></span>|<span data-ttu-id="bdb65-196">1 为禁止；0 为允许。</span><span class="sxs-lookup"><span data-stu-id="bdb65-196">1 to disallow; 0 to allow.</span></span>|  
|<span data-ttu-id="bdb65-197">LooseXamlDisallow</span><span class="sxs-lookup"><span data-stu-id="bdb65-197">LooseXamlDisallow</span></span>|<span data-ttu-id="bdb65-198">REG_DWORD</span><span class="sxs-lookup"><span data-stu-id="bdb65-198">REG_DWORD</span></span>|<span data-ttu-id="bdb65-199">1 为禁止；0 为允许。</span><span class="sxs-lookup"><span data-stu-id="bdb65-199">1 to disallow; 0 to allow.</span></span>|  
|<span data-ttu-id="bdb65-200">WebBrowserDisallow</span><span class="sxs-lookup"><span data-stu-id="bdb65-200">WebBrowserDisallow</span></span>|<span data-ttu-id="bdb65-201">REG_DWORD</span><span class="sxs-lookup"><span data-stu-id="bdb65-201">REG_DWORD</span></span>|<span data-ttu-id="bdb65-202">1 为禁止；0 为允许。</span><span class="sxs-lookup"><span data-stu-id="bdb65-202">1 to disallow; 0 to allow.</span></span>|  
|<span data-ttu-id="bdb65-203">MediaAudioDisallow</span><span class="sxs-lookup"><span data-stu-id="bdb65-203">MediaAudioDisallow</span></span>|<span data-ttu-id="bdb65-204">REG_DWORD</span><span class="sxs-lookup"><span data-stu-id="bdb65-204">REG_DWORD</span></span>|<span data-ttu-id="bdb65-205">1 为禁止；0 为允许。</span><span class="sxs-lookup"><span data-stu-id="bdb65-205">1 to disallow; 0 to allow.</span></span>|  
|<span data-ttu-id="bdb65-206">MediaImageDisallow</span><span class="sxs-lookup"><span data-stu-id="bdb65-206">MediaImageDisallow</span></span>|<span data-ttu-id="bdb65-207">REG_DWORD</span><span class="sxs-lookup"><span data-stu-id="bdb65-207">REG_DWORD</span></span>|<span data-ttu-id="bdb65-208">1 为禁止；0 为允许。</span><span class="sxs-lookup"><span data-stu-id="bdb65-208">1 to disallow; 0 to allow.</span></span>|  
|<span data-ttu-id="bdb65-209">MediaVideoDisallow</span><span class="sxs-lookup"><span data-stu-id="bdb65-209">MediaVideoDisallow</span></span>|<span data-ttu-id="bdb65-210">REG_DWORD</span><span class="sxs-lookup"><span data-stu-id="bdb65-210">REG_DWORD</span></span>|<span data-ttu-id="bdb65-211">1 为禁止；0 为允许。</span><span class="sxs-lookup"><span data-stu-id="bdb65-211">1 to disallow; 0 to allow.</span></span>|  
|<span data-ttu-id="bdb65-212">ScriptInteropDisallow</span><span class="sxs-lookup"><span data-stu-id="bdb65-212">ScriptInteropDisallow</span></span>|<span data-ttu-id="bdb65-213">REG_DWORD</span><span class="sxs-lookup"><span data-stu-id="bdb65-213">REG_DWORD</span></span>|<span data-ttu-id="bdb65-214">1 为禁止；0 为允许。</span><span class="sxs-lookup"><span data-stu-id="bdb65-214">1 to disallow; 0 to allow.</span></span>|  
  
<a name="webbrowser_control_and_feature_controls"></a>   
## <a name="webbrowser-control-and-feature-controls"></a><span data-ttu-id="bdb65-215">WebBrowser 控件和功能控件</span><span class="sxs-lookup"><span data-stu-id="bdb65-215">WebBrowser Control and Feature Controls</span></span>  
 <span data-ttu-id="bdb65-216">WPF<xref:System.Windows.Controls.WebBrowser>控件可用来承载 Web 内容。</span><span class="sxs-lookup"><span data-stu-id="bdb65-216">The WPF <xref:System.Windows.Controls.WebBrowser> control can be used to host Web content.</span></span> <span data-ttu-id="bdb65-217">WPF<xref:System.Windows.Controls.WebBrowser>控件换行的基础的 WebBrowser ActiveX 控件。</span><span class="sxs-lookup"><span data-stu-id="bdb65-217">The WPF <xref:System.Windows.Controls.WebBrowser> control wraps the underlying WebBrowser ActiveX control.</span></span> <span data-ttu-id="bdb65-218">WPF 提供了一些支持，用于保护你的应用程序，当你使用 WPF<xref:System.Windows.Controls.WebBrowser>控件来承载不受信任的 Web 内容。</span><span class="sxs-lookup"><span data-stu-id="bdb65-218">WPF provides some support for securing your application when you use the WPF <xref:System.Windows.Controls.WebBrowser> control to host untrusted Web content.</span></span> <span data-ttu-id="bdb65-219">但是，某些安全功能必须将应用直接由应用程序使用<xref:System.Windows.Controls.WebBrowser>控件。</span><span class="sxs-lookup"><span data-stu-id="bdb65-219">However, some security features must be applied directly by the applications using the <xref:System.Windows.Controls.WebBrowser> control.</span></span> <span data-ttu-id="bdb65-220">WebBrowser ActiveX 控件有关的详细信息，请参阅[WebBrowser 控件概述和教程](http://go.microsoft.com/fwlink/?LinkId=179388)。</span><span class="sxs-lookup"><span data-stu-id="bdb65-220">For more information about the WebBrowser ActiveX control, see [WebBrowser Control Overviews and Tutorials](http://go.microsoft.com/fwlink/?LinkId=179388).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="bdb65-221">本部分还适用于<xref:System.Windows.Controls.Frame>控制，因为它使用<xref:System.Windows.Controls.WebBrowser>以导航到 HTML 内容。</span><span class="sxs-lookup"><span data-stu-id="bdb65-221">This section also applies to the <xref:System.Windows.Controls.Frame> control since it uses the <xref:System.Windows.Controls.WebBrowser> to navigate to HTML content.</span></span>  
  
 <span data-ttu-id="bdb65-222">如果 WPF<xref:System.Windows.Controls.WebBrowser>控件用于承载不受信任的 Web 内容，你的应用程序应使用部分信任<xref:System.AppDomain>有助于防止潜在的恶意 HTML 脚本代码中应用程序代码。</span><span class="sxs-lookup"><span data-stu-id="bdb65-222">If the WPF <xref:System.Windows.Controls.WebBrowser> control is used to host untrusted Web content, your application should use a partial-trust <xref:System.AppDomain> to help insulate your application code from potentially malicious HTML script code.</span></span> <span data-ttu-id="bdb65-223">如果你的应用程序与托管的脚本进行交互使用尤其如此<xref:System.Windows.Controls.WebBrowser.InvokeScript%2A>方法和<xref:System.Windows.Controls.WebBrowser.ObjectForScripting%2A>属性。</span><span class="sxs-lookup"><span data-stu-id="bdb65-223">This is especially true if your application is interacting with the hosted script by using the <xref:System.Windows.Controls.WebBrowser.InvokeScript%2A> method and the <xref:System.Windows.Controls.WebBrowser.ObjectForScripting%2A> property.</span></span> <span data-ttu-id="bdb65-224">有关详细信息，请参阅[WPF 外接程序概述](../../../docs/framework/wpf/app-development/wpf-add-ins-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="bdb65-224">For more information, see [WPF Add-Ins Overview](../../../docs/framework/wpf/app-development/wpf-add-ins-overview.md).</span></span>  
  
 <span data-ttu-id="bdb65-225">如果你的应用程序使用 WPF<xref:System.Windows.Controls.WebBrowser>控件，提高安全性并减少攻击另一个方法是，若要启用 Internet Explorer 功能控件。</span><span class="sxs-lookup"><span data-stu-id="bdb65-225">If your application uses the WPF <xref:System.Windows.Controls.WebBrowser> control, another way to increase security and mitigate attacks is to enable Internet Explorer feature controls.</span></span> <span data-ttu-id="bdb65-226">功能控件是 Internet Explorer，允许管理员和开发人员配置 Internet Explorer 和 WebBrowser ActiveX 控件承载的应用程序的功能补充的 WPF<xref:System.Windows.Controls.WebBrowser>控制包装。</span><span class="sxs-lookup"><span data-stu-id="bdb65-226">Feature controls are additions to Internet Explorer that allow administrators and developers to configure features of Internet Explorer and applications that host the WebBrowser ActiveX control, which the WPF <xref:System.Windows.Controls.WebBrowser> control wraps.</span></span> <span data-ttu-id="bdb65-227">可以使用配置功能控件[CoInternetSetFeatureEnabled](http://go.microsoft.com/fwlink/?LinkId=179394)函数或通过更改注册表中的值。</span><span class="sxs-lookup"><span data-stu-id="bdb65-227">Feature controls can be configured by using the [CoInternetSetFeatureEnabled](http://go.microsoft.com/fwlink/?LinkId=179394) function or by changing values in the registry.</span></span> <span data-ttu-id="bdb65-228">有关功能控件的详细信息，请参阅[功能控件简介](http://go.microsoft.com/fwlink/?LinkId=179390)和[Internet 功能控件](http://go.microsoft.com/fwlink/?LinkId=179392)。</span><span class="sxs-lookup"><span data-stu-id="bdb65-228">For more information about feature controls, see [Introduction to Feature Controls](http://go.microsoft.com/fwlink/?LinkId=179390) and [Internet Feature Controls](http://go.microsoft.com/fwlink/?LinkId=179392).</span></span>  
  
 <span data-ttu-id="bdb65-229">如果你正在开发的独立 WPF 应用程序使用 WPF<xref:System.Windows.Controls.WebBrowser>控件，WPF 会自动启用以下功能控制你的应用程序。</span><span class="sxs-lookup"><span data-stu-id="bdb65-229">If you are developing a standalone WPF application that uses the WPF <xref:System.Windows.Controls.WebBrowser> control, WPF automatically enables the following feature controls for your application.</span></span>  
  
|<span data-ttu-id="bdb65-230">功能控件</span><span class="sxs-lookup"><span data-stu-id="bdb65-230">Feature Control</span></span>|  
|---------------------|  
|<span data-ttu-id="bdb65-231">FEATURE_MIME_HANDLING</span><span class="sxs-lookup"><span data-stu-id="bdb65-231">FEATURE_MIME_HANDLING</span></span>|  
|<span data-ttu-id="bdb65-232">FEATURE_MIME_SNIFFING</span><span class="sxs-lookup"><span data-stu-id="bdb65-232">FEATURE_MIME_SNIFFING</span></span>|  
|<span data-ttu-id="bdb65-233">FEATURE_OBJECT_CACHING</span><span class="sxs-lookup"><span data-stu-id="bdb65-233">FEATURE_OBJECT_CACHING</span></span>|  
|<span data-ttu-id="bdb65-234">FEATURE_SAFE_BINDTOOBJECT</span><span class="sxs-lookup"><span data-stu-id="bdb65-234">FEATURE_SAFE_BINDTOOBJECT</span></span>|  
|<span data-ttu-id="bdb65-235">FEATURE_WINDOW_RESTRICTIONS</span><span class="sxs-lookup"><span data-stu-id="bdb65-235">FEATURE_WINDOW_RESTRICTIONS</span></span>|  
|<span data-ttu-id="bdb65-236">FEATURE_ZONE_ELEVATION</span><span class="sxs-lookup"><span data-stu-id="bdb65-236">FEATURE_ZONE_ELEVATION</span></span>|  
|<span data-ttu-id="bdb65-237">FEATURE_RESTRICT_FILEDOWNLOAD</span><span class="sxs-lookup"><span data-stu-id="bdb65-237">FEATURE_RESTRICT_FILEDOWNLOAD</span></span>|  
|<span data-ttu-id="bdb65-238">FEATURE_RESTRICT_ACTIVEXINSTALL</span><span class="sxs-lookup"><span data-stu-id="bdb65-238">FEATURE_RESTRICT_ACTIVEXINSTALL</span></span>|  
|<span data-ttu-id="bdb65-239">FEATURE_ADDON_MANAGEMENT</span><span class="sxs-lookup"><span data-stu-id="bdb65-239">FEATURE_ADDON_MANAGEMENT</span></span>|  
|<span data-ttu-id="bdb65-240">FEATURE_HTTP_USERNAME_PASSWORD_DISABLE</span><span class="sxs-lookup"><span data-stu-id="bdb65-240">FEATURE_HTTP_USERNAME_PASSWORD_DISABLE</span></span>|  
|<span data-ttu-id="bdb65-241">FEATURE_SECURITYBAND</span><span class="sxs-lookup"><span data-stu-id="bdb65-241">FEATURE_SECURITYBAND</span></span>|  
|<span data-ttu-id="bdb65-242">FEATURE_UNC_SAVEDFILECHECK</span><span class="sxs-lookup"><span data-stu-id="bdb65-242">FEATURE_UNC_SAVEDFILECHECK</span></span>|  
|<span data-ttu-id="bdb65-243">FEATURE_VALIDATE_NAVIGATE_URL</span><span class="sxs-lookup"><span data-stu-id="bdb65-243">FEATURE_VALIDATE_NAVIGATE_URL</span></span>|  
|<span data-ttu-id="bdb65-244">FEATURE_DISABLE_TELNET_PROTOCOL</span><span class="sxs-lookup"><span data-stu-id="bdb65-244">FEATURE_DISABLE_TELNET_PROTOCOL</span></span>|  
|<span data-ttu-id="bdb65-245">FEATURE_WEBOC_POPUPMANAGEMENT</span><span class="sxs-lookup"><span data-stu-id="bdb65-245">FEATURE_WEBOC_POPUPMANAGEMENT</span></span>|  
|<span data-ttu-id="bdb65-246">FEATURE_DISABLE_LEGACY_COMPRESSION</span><span class="sxs-lookup"><span data-stu-id="bdb65-246">FEATURE_DISABLE_LEGACY_COMPRESSION</span></span>|  
|<span data-ttu-id="bdb65-247">FEATURE_SSLUX</span><span class="sxs-lookup"><span data-stu-id="bdb65-247">FEATURE_SSLUX</span></span>|  
  
 <span data-ttu-id="bdb65-248">由于这些功能控件是无条件启用的，因此它们可能会对完全信任的应用程序造成损害。</span><span class="sxs-lookup"><span data-stu-id="bdb65-248">Since these feature controls are enabled unconditionally, a full-trust application might be impaired by them.</span></span> <span data-ttu-id="bdb65-249">在这种情况下，如果特定应用程序及其承载的内容没有安全风险，则可以禁用相应的功能控件。</span><span class="sxs-lookup"><span data-stu-id="bdb65-249">In this case, if there is no security risk for the specific application and the content it is hosting, the corresponding feature control can be disabled.</span></span>  
  
 <span data-ttu-id="bdb65-250">通过实例化 WebBrowser ActiveX 对象的过程将应用功能控制。</span><span class="sxs-lookup"><span data-stu-id="bdb65-250">Feature controls are applied by the process instantiating the WebBrowser ActiveX object.</span></span> <span data-ttu-id="bdb65-251">因此，如果要创建可导航到不受信任的内容的独立应用程序，则应该认真考虑启用附加功能控件。</span><span class="sxs-lookup"><span data-stu-id="bdb65-251">Therefore, if you are creating a stand-alone application that can navigate to untrusted content, you should seriously consider enabling additional feature controls.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="bdb65-252">此建议是根据 MSHTML 和 SHDOCVW 主机安全性的一般性建议提出的。</span><span class="sxs-lookup"><span data-stu-id="bdb65-252">This recommendation is based on general recommendations for MSHTML and SHDOCVW host security.</span></span> <span data-ttu-id="bdb65-253">有关详细信息，请参阅[MSHTML 主机安全性常见问题： 第 I 部分的 II](http://go.microsoft.com/fwlink/?LinkId=179396)和[MSHTML 主机安全性常见问题： 第 ii 部分的 ii 部分](http://go.microsoft.com/fwlink/?LinkId=179415)。</span><span class="sxs-lookup"><span data-stu-id="bdb65-253">For more information, see [The MSHTML Host Security FAQ: Part I of II](http://go.microsoft.com/fwlink/?LinkId=179396) and [The MSHTML Host Security FAQ: Part II of II](http://go.microsoft.com/fwlink/?LinkId=179415).</span></span>  
  
 <span data-ttu-id="bdb65-254">对于可执行文件，请考虑通过将注册表值设置为 1 来启用以下功能控件。</span><span class="sxs-lookup"><span data-stu-id="bdb65-254">For your executable, consider enabling the following feature controls by setting the registry value to 1.</span></span>  
  
|<span data-ttu-id="bdb65-255">功能控件</span><span class="sxs-lookup"><span data-stu-id="bdb65-255">Feature Control</span></span>|  
|---------------------|  
|<span data-ttu-id="bdb65-256">FEATURE_ACTIVEX_REPURPOSEDETECTION</span><span class="sxs-lookup"><span data-stu-id="bdb65-256">FEATURE_ACTIVEX_REPURPOSEDETECTION</span></span>|  
|<span data-ttu-id="bdb65-257">FEATURE_BLOCK_LMZ_IMG</span><span class="sxs-lookup"><span data-stu-id="bdb65-257">FEATURE_BLOCK_LMZ_IMG</span></span>|  
|<span data-ttu-id="bdb65-258">FEATURE_BLOCK_LMZ_OBJECT</span><span class="sxs-lookup"><span data-stu-id="bdb65-258">FEATURE_BLOCK_LMZ_OBJECT</span></span>|  
|<span data-ttu-id="bdb65-259">FEATURE_BLOCK_LMZ_SCRIPT</span><span class="sxs-lookup"><span data-stu-id="bdb65-259">FEATURE_BLOCK_LMZ_SCRIPT</span></span>|  
|<span data-ttu-id="bdb65-260">FEATURE_RESTRICT_RES_TO_LMZ</span><span class="sxs-lookup"><span data-stu-id="bdb65-260">FEATURE_RESTRICT_RES_TO_LMZ</span></span>|  
|<span data-ttu-id="bdb65-261">FEATURE_RESTRICT_ABOUT_PROTOCOL_IE7</span><span class="sxs-lookup"><span data-stu-id="bdb65-261">FEATURE_RESTRICT_ABOUT_PROTOCOL_IE7</span></span>|  
|<span data-ttu-id="bdb65-262">FEATURE_SHOW_APP_PROTOCOL_WARN_DIALOG</span><span class="sxs-lookup"><span data-stu-id="bdb65-262">FEATURE_SHOW_APP_PROTOCOL_WARN_DIALOG</span></span>|  
|<span data-ttu-id="bdb65-263">FEATURE_LOCALMACHINE_LOCKDOWN</span><span class="sxs-lookup"><span data-stu-id="bdb65-263">FEATURE_LOCALMACHINE_LOCKDOWN</span></span>|  
|<span data-ttu-id="bdb65-264">FEATURE_FORCE_ADDR_AND_STATUS</span><span class="sxs-lookup"><span data-stu-id="bdb65-264">FEATURE_FORCE_ADDR_AND_STATUS</span></span>|  
|<span data-ttu-id="bdb65-265">FEATURE_RESTRICTED_ZONE_WHEN_FILE_NOT_FOUND</span><span class="sxs-lookup"><span data-stu-id="bdb65-265">FEATURE_RESTRICTED_ZONE_WHEN_FILE_NOT_FOUND</span></span>|  
  
 <span data-ttu-id="bdb65-266">对于可执行文件，请考虑通过将注册表值设置为 0 来禁用以下功能控件。</span><span class="sxs-lookup"><span data-stu-id="bdb65-266">For your executable, consider disabling the following feature control by setting the registry value to 0.</span></span>  
  
|<span data-ttu-id="bdb65-267">功能控件</span><span class="sxs-lookup"><span data-stu-id="bdb65-267">Feature Control</span></span>|  
|---------------------|  
|<span data-ttu-id="bdb65-268">FEATURE_ENABLE_SCRIPT_PASTE_URLACTION_IF_PROMPT</span><span class="sxs-lookup"><span data-stu-id="bdb65-268">FEATURE_ENABLE_SCRIPT_PASTE_URLACTION_IF_PROMPT</span></span>|  
  
 <span data-ttu-id="bdb65-269">如果运行部分信任[!INCLUDE[TLA#tla_xbap](../../../includes/tlasharptla-xbap-md.md)]包括 WPF<xref:System.Windows.Controls.WebBrowser>中控制[!INCLUDE[TLA#tla_iegeneric](../../../includes/tlasharptla-iegeneric-md.md)]，WPF 承载 Internet Explorer 进程的地址空间中的 WebBrowser ActiveX 控件。</span><span class="sxs-lookup"><span data-stu-id="bdb65-269">If you run a partial-trust [!INCLUDE[TLA#tla_xbap](../../../includes/tlasharptla-xbap-md.md)] that includes a WPF <xref:System.Windows.Controls.WebBrowser> control in [!INCLUDE[TLA#tla_iegeneric](../../../includes/tlasharptla-iegeneric-md.md)], WPF hosts the WebBrowser ActiveX control in the address space of the Internet Explorer process.</span></span> <span data-ttu-id="bdb65-270">由于 WebBrowser ActiveX 控件承载在[!INCLUDE[TLA2#tla_iegeneric](../../../includes/tla2sharptla-iegeneric-md.md)]进程，所有 Internet Explorer 的功能控件也已启用了 WebBrowser ActiveX 控件。</span><span class="sxs-lookup"><span data-stu-id="bdb65-270">Since the WebBrowser ActiveX control is hosted in the [!INCLUDE[TLA2#tla_iegeneric](../../../includes/tla2sharptla-iegeneric-md.md)] process, all of the feature controls for Internet Explorer are also enabled for the WebBrowser ActiveX control.</span></span>  
  
 <span data-ttu-id="bdb65-271">与普通的独立应用程序相比，运行于 Internet Explorer 中的 XBAP 还将另外获得一层安全保护。</span><span class="sxs-lookup"><span data-stu-id="bdb65-271">XBAPs running in Internet Explorer also get an additional level of security compared to normal standalone applications.</span></span> <span data-ttu-id="bdb65-272">此附加的安全性是因为 Internet Explorer 和 WebBrowser ActiveX 控件，因此在运行受保护模式下，默认情况下上,[!INCLUDE[TLA#tla_winvista](../../../includes/tlasharptla-winvista-md.md)]和[!INCLUDE[win7](../../../includes/win7-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="bdb65-272">This additional security is because Internet Explorer, and therefore the WebBrowser ActiveX control, runs in protected mode by default on [!INCLUDE[TLA#tla_winvista](../../../includes/tlasharptla-winvista-md.md)] and [!INCLUDE[win7](../../../includes/win7-md.md)].</span></span> <span data-ttu-id="bdb65-273">有关受保护的模式的详细信息，请参阅[了解和使用受保护模式 Internet 资源管理器](http://go.microsoft.com/fwlink/?LinkId=179393)。</span><span class="sxs-lookup"><span data-stu-id="bdb65-273">For more information about protected mode, see [Understanding and Working in Protected Mode Internet Explorer](http://go.microsoft.com/fwlink/?LinkId=179393).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="bdb65-274">如果你尝试运行包括 WPF XBAP<xref:System.Windows.Controls.WebBrowser>在 Firefox 中，在 Internet 区域中，控件<xref:System.Security.SecurityException>将引发。</span><span class="sxs-lookup"><span data-stu-id="bdb65-274">If you try to run an XBAP that includes a WPF <xref:System.Windows.Controls.WebBrowser> control in Firefox, while in the Internet zone, a <xref:System.Security.SecurityException> will be thrown.</span></span> <span data-ttu-id="bdb65-275">这是由于 WPF 安全策略造成的。</span><span class="sxs-lookup"><span data-stu-id="bdb65-275">This is due to WPF security policy.</span></span>  
  
<a name="APTCA"></a>   
## <a name="disabling-aptca-assemblies-for-partially-trusted-client-applications"></a><span data-ttu-id="bdb65-276">对部分受信任的客户端应用程序禁用 APTCA 程序集</span><span class="sxs-lookup"><span data-stu-id="bdb65-276">Disabling APTCA Assemblies for Partially Trusted Client Applications</span></span>  
 <span data-ttu-id="bdb65-277">当托管程序集安装到[!INCLUDE[TLA#tla_gac](../../../includes/tlasharptla-gac-md.md)]，它们成为完全受信任的因为用户必须提供显式权限，将其安装。</span><span class="sxs-lookup"><span data-stu-id="bdb65-277">When managed assemblies are installed into the [!INCLUDE[TLA#tla_gac](../../../includes/tlasharptla-gac-md.md)], they become fully trusted because the user must provide explicit permission to install them.</span></span> <span data-ttu-id="bdb65-278">因为这些程序集是完全受信任的，所以只有完全受信任的托管客户端应用程序才可以使用它们。</span><span class="sxs-lookup"><span data-stu-id="bdb65-278">Because they are fully trusted, only fully trusted managed client applications can use them.</span></span> <span data-ttu-id="bdb65-279">若要允许部分受信任的应用程序以使用它们，它们必须标记为<xref:System.Security.AllowPartiallyTrustedCallersAttribute>(APTCA)。</span><span class="sxs-lookup"><span data-stu-id="bdb65-279">To allow partially trusted applications to use them, they must be marked with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> (APTCA).</span></span> <span data-ttu-id="bdb65-280">仅当程序集经过测试，可在部分信任的情况下安全执行时，才应该为其标记此特性。</span><span class="sxs-lookup"><span data-stu-id="bdb65-280">Only assemblies that have been tested to be safe for execution in partial trust should be marked with this attribute.</span></span>  
  
 <span data-ttu-id="bdb65-281">但是，很可能 APTCA 程序集安装到后出现安全漏洞[!INCLUDE[TLA2#tla_gac](../../../includes/tla2sharptla-gac-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="bdb65-281">However, it is possible for an APTCA assembly to exhibit a security flaw after being installed into the [!INCLUDE[TLA2#tla_gac](../../../includes/tla2sharptla-gac-md.md)].</span></span> <span data-ttu-id="bdb65-282">一旦发现安全漏洞，程序集发布者可以生成安全更新来修复现有安装上的问题，还可以阻止问题发现后进行的安装操作。</span><span class="sxs-lookup"><span data-stu-id="bdb65-282">Once a security flaw is discovered, assembly publishers can produce a security update to fix the problem on existing installations, and to protect against installations that may occur after the problem is discovered.</span></span> <span data-ttu-id="bdb65-283">其中一个更新选项是卸载程序集，即使这可能中断使用该程序集的其他完全受信任的客户端应用程序。</span><span class="sxs-lookup"><span data-stu-id="bdb65-283">One option for the update is to uninstall the assembly, although that may break other fully trusted client applications that use the assembly.</span></span>  
  
 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="bdb65-284"> 提供对于部分受信任，则可以禁用依据 APTCA 程序集的机制[!INCLUDE[TLA2#tla_xbap#plural](../../../includes/tla2sharptla-xbapsharpplural-md.md)]而无需卸载 APTCA 的程序集。</span><span class="sxs-lookup"><span data-stu-id="bdb65-284"> provides a mechanism by which an APTCA assembly can be disabled for partially trusted [!INCLUDE[TLA2#tla_xbap#plural](../../../includes/tla2sharptla-xbapsharpplural-md.md)] without uninstalling the APTCA assembly.</span></span>  
  
 <span data-ttu-id="bdb65-285">若要禁用 APTCA 程序集，必须创建一个特殊的注册表项：</span><span class="sxs-lookup"><span data-stu-id="bdb65-285">To disable an APTCA assembly, you have to create a special registry key:</span></span>  
  
 `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\policy\APTCA\<AssemblyFullName>, FileVersion=<AssemblyFileVersion>`  
  
 <span data-ttu-id="bdb65-286">示例如下：</span><span class="sxs-lookup"><span data-stu-id="bdb65-286">The following shows an example:</span></span>  
  
 `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\policy\APTCA\aptcagac, Version=1.0.0.0, Culture=neutral, PublicKeyToken=215e3ac809a0fea7, FileVersion=1.0.0.0`  
  
 <span data-ttu-id="bdb65-287">此项建立 APTCA 程序集的条目。</span><span class="sxs-lookup"><span data-stu-id="bdb65-287">This key establishes an entry for the APTCA assembly.</span></span> <span data-ttu-id="bdb65-288">还必须在此项中创建值来启用或禁用程序集。</span><span class="sxs-lookup"><span data-stu-id="bdb65-288">You also have to create a value in this key that enables or disables the assembly.</span></span> <span data-ttu-id="bdb65-289">下面是该值的详细信息：</span><span class="sxs-lookup"><span data-stu-id="bdb65-289">The following are the details of the value:</span></span>  
  
-   <span data-ttu-id="bdb65-290">值名称： **APTCA_FLAG**。</span><span class="sxs-lookup"><span data-stu-id="bdb65-290">Value Name: **APTCA_FLAG**.</span></span>  
  
-   <span data-ttu-id="bdb65-291">值类型： **REG_DWORD**。</span><span class="sxs-lookup"><span data-stu-id="bdb65-291">Value Type: **REG_DWORD**.</span></span>  
  
-   <span data-ttu-id="bdb65-292">值数据： **1**禁用;**0**启用。</span><span class="sxs-lookup"><span data-stu-id="bdb65-292">Value Data: **1** to disable; **0** to enable.</span></span>  
  
 <span data-ttu-id="bdb65-293">如果必须为部分受信任的客户端应用程序禁用某程序集，可以编写一个用于创建注册表项和值的更新。</span><span class="sxs-lookup"><span data-stu-id="bdb65-293">If an assembly has to be disabled for partially trusted client applications, you can write an update that creates the registry key and value.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="bdb65-294">核心.NET Framework 程序集不受这种方式禁用它们，因为它们所需的托管应用程序运行。</span><span class="sxs-lookup"><span data-stu-id="bdb65-294">Core .NET Framework assemblies are not affected by disabling them in this way because they are required for managed applications to run.</span></span> <span data-ttu-id="bdb65-295">对禁用 APTCA 程序集的支持主要面向第三方应用程序。</span><span class="sxs-lookup"><span data-stu-id="bdb65-295">Support for disabling APTCA assemblies is primarily targeted to third-party applications.</span></span>  
  
<a name="LooseContentSandboxing"></a>   
## <a name="sandbox-behavior-for-loose-xaml-files"></a><span data-ttu-id="bdb65-296">宽松 XAML 文件的沙盒行为</span><span class="sxs-lookup"><span data-stu-id="bdb65-296">Sandbox Behavior for Loose XAML Files</span></span>  
 <span data-ttu-id="bdb65-297">松散[!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)]文件是不依赖于任何代码隐藏、 事件处理程序或应用程序特定的程序集的仅限标记的 XAML 文件。</span><span class="sxs-lookup"><span data-stu-id="bdb65-297">Loose [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] files are markup-only XAML files that do not depend on any code-behind, event handler, or application-specific assembly.</span></span> <span data-ttu-id="bdb65-298">当丢失[!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)]文件直接从浏览器导航到，它们是在默认 Internet 区域权限集所基于的安全沙盒中加载。</span><span class="sxs-lookup"><span data-stu-id="bdb65-298">When loose [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] files are navigated to directly from the browser, they are loaded in a security sandbox based on the default Internet zone permission set.</span></span>  
  
 <span data-ttu-id="bdb65-299">但是，安全行为是不同时松散[!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)]文件从导航到<xref:System.Windows.Navigation.NavigationWindow>或<xref:System.Windows.Controls.Frame>独立应用程序中。</span><span class="sxs-lookup"><span data-stu-id="bdb65-299">However, the security behavior is different when loose [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] files are navigated to from either a <xref:System.Windows.Navigation.NavigationWindow> or <xref:System.Windows.Controls.Frame> in a standalone application.</span></span>  
  
 <span data-ttu-id="bdb65-300">在这两种情况下，松散[!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)]导航到的文件将继承其主机应用程序的权限。</span><span class="sxs-lookup"><span data-stu-id="bdb65-300">In both cases, the loose [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] file that is navigated to inherits the permissions of its host application.</span></span> <span data-ttu-id="bdb65-301">但是，此行为可能不需要从安全角度看，尤其是当一个松散[!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)]文件由不受信任或未知的实体生成。</span><span class="sxs-lookup"><span data-stu-id="bdb65-301">However, this behavior may be undesirable from a security perspective, particularly if a loose [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] file was produced by an entity that is either not trusted or unknown.</span></span> <span data-ttu-id="bdb65-302">此类型的内容被称为*外部内容*，并且两个<xref:System.Windows.Controls.Frame>和<xref:System.Windows.Navigation.NavigationWindow>可以配置为隔离导航到它时。</span><span class="sxs-lookup"><span data-stu-id="bdb65-302">This type of content is known as *external content*, and both <xref:System.Windows.Controls.Frame> and <xref:System.Windows.Navigation.NavigationWindow> can be configured to isolate it when navigated to.</span></span> <span data-ttu-id="bdb65-303">通过设置来实现隔离**SandboxExternalContent**属性设置为 true 中的以下示例所示<xref:System.Windows.Controls.Frame>和<xref:System.Windows.Navigation.NavigationWindow>:</span><span class="sxs-lookup"><span data-stu-id="bdb65-303">Isolation is achieved by setting the **SandboxExternalContent** property to true, as shown in the following examples for <xref:System.Windows.Controls.Frame> and <xref:System.Windows.Navigation.NavigationWindow>:</span></span>  
  
 [!code-xaml[SecurityOverviewSnippets#FrameMARKUP](../../../samples/snippets/csharp/VS_Snippets_Wpf/SecurityOverviewSnippets/CS/Window2.xaml#framemarkup)]  
  
 [!code-xaml[SecurityOverviewSnippets#NavigationWindowMARKUP](../../../samples/snippets/csharp/VS_Snippets_Wpf/SecurityOverviewSnippets/CS/Window1.xaml#navigationwindowmarkup)]  
  
 <span data-ttu-id="bdb65-304">使用此设置，外部内容将加载到不同于承载应用程序的进程的进程中。</span><span class="sxs-lookup"><span data-stu-id="bdb65-304">With this setting, external content will be loaded into a process that is separate from the process that is hosting the application.</span></span> <span data-ttu-id="bdb65-305">此进程被限制在默认 Internet 区域权限集中，从而有效地将其与承载应用程序和客户端计算机隔离。</span><span class="sxs-lookup"><span data-stu-id="bdb65-305">This process is restricted to the default Internet zone permission set, effectively isolating it from the hosting application and the client computer.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="bdb65-306">即使导航到宽松[!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)]文件从<xref:System.Windows.Navigation.NavigationWindow>或<xref:System.Windows.Controls.Frame>在独立的应用程序实现的是基于承载基础结构，涉及 PresentationHost 过程中，WPF 浏览器安全级别略微小于内容时直接在 Internet Explorer 中加载上[!INCLUDE[wiprlhext](../../../includes/wiprlhext-md.md)]和[!INCLUDE[win7](../../../includes/win7-md.md)]（将仍能通过 PresentationHost）。</span><span class="sxs-lookup"><span data-stu-id="bdb65-306">Even though navigation to loose [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] files from either a <xref:System.Windows.Navigation.NavigationWindow> or <xref:System.Windows.Controls.Frame> in a standalone application is implemented based on the WPF browser hosting infrastructure, involving the PresentationHost process, the security level is slightly less than when the content is loaded directly in Internet Explorer on [!INCLUDE[wiprlhext](../../../includes/wiprlhext-md.md)] and [!INCLUDE[win7](../../../includes/win7-md.md)] (which would still be through PresentationHost).</span></span> <span data-ttu-id="bdb65-307">这是因为使用 Web 浏览器的独立 WPF 应用程序不提供 Internet Explorer 的额外“保护模式”安全功能。</span><span class="sxs-lookup"><span data-stu-id="bdb65-307">This is because a standalone WPF application using a Web browser does not provide the additional Protected Mode security feature of Internet Explorer.</span></span>  
  
<a name="BestPractices"></a>   
## <a name="resources-for-developing-wpf-applications-that-promote-security"></a><span data-ttu-id="bdb65-308">用于开发可提高安全性的 WPF 应用程序的资源</span><span class="sxs-lookup"><span data-stu-id="bdb65-308">Resources for Developing WPF Applications that Promote Security</span></span>  
 <span data-ttu-id="bdb65-309">以下是一些可帮助开发的其他资源[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]提高安全性的应用程序：</span><span class="sxs-lookup"><span data-stu-id="bdb65-309">The following are some additional resources to help develop [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] applications that promote security:</span></span>  
  
|<span data-ttu-id="bdb65-310">区域</span><span class="sxs-lookup"><span data-stu-id="bdb65-310">Area</span></span>|<span data-ttu-id="bdb65-311">资源</span><span class="sxs-lookup"><span data-stu-id="bdb65-311">Resource</span></span>|  
|----------|--------------|  
|<span data-ttu-id="bdb65-312">托管代码</span><span class="sxs-lookup"><span data-stu-id="bdb65-312">Managed code</span></span>|[<span data-ttu-id="bdb65-313">应用程序的模式和实践安全指南</span><span class="sxs-lookup"><span data-stu-id="bdb65-313">Patterns and Practices Security Guidance for Applications</span></span>](http://go.microsoft.com/fwlink/?LinkId=117426)|  
|[!INCLUDE[TLA2#tla_cas](../../../includes/tla2sharptla-cas-md.md)]|[<span data-ttu-id="bdb65-314">代码访问安全性</span><span class="sxs-lookup"><span data-stu-id="bdb65-314">Code Access Security</span></span>](../../../docs/framework/misc/code-access-security.md)|  
|[!INCLUDE[TLA2#tla_clickonce](../../../includes/tla2sharptla-clickonce-md.md)]|[<span data-ttu-id="bdb65-315">ClickOnce 安全和部署</span><span class="sxs-lookup"><span data-stu-id="bdb65-315">ClickOnce Security and Deployment</span></span>](/visualstudio/deployment/clickonce-security-and-deployment)|  
|[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]|[<span data-ttu-id="bdb65-316">WPF 部分信任安全</span><span class="sxs-lookup"><span data-stu-id="bdb65-316">WPF Partial Trust Security</span></span>](../../../docs/framework/wpf/wpf-partial-trust-security.md)|  
  
## <a name="see-also"></a><span data-ttu-id="bdb65-317">请参阅</span><span class="sxs-lookup"><span data-stu-id="bdb65-317">See Also</span></span>  
 [<span data-ttu-id="bdb65-318">WPF 部分信任安全</span><span class="sxs-lookup"><span data-stu-id="bdb65-318">WPF Partial Trust Security</span></span>](../../../docs/framework/wpf/wpf-partial-trust-security.md)  
 [<span data-ttu-id="bdb65-319">WPF 安全策略 - 平台安全性</span><span class="sxs-lookup"><span data-stu-id="bdb65-319">WPF Security Strategy - Platform Security</span></span>](../../../docs/framework/wpf/wpf-security-strategy-platform-security.md)  
 [<span data-ttu-id="bdb65-320">WPF 安全策略 - 安全工程</span><span class="sxs-lookup"><span data-stu-id="bdb65-320">WPF Security Strategy - Security Engineering</span></span>](../../../docs/framework/wpf/wpf-security-strategy-security-engineering.md)  
 [<span data-ttu-id="bdb65-321">应用程序的模式和实践安全指南</span><span class="sxs-lookup"><span data-stu-id="bdb65-321">Patterns and Practices Security Guidance for Applications</span></span>](http://go.microsoft.com/fwlink/?LinkId=117426)  
 [<span data-ttu-id="bdb65-322">代码访问安全性</span><span class="sxs-lookup"><span data-stu-id="bdb65-322">Code Access Security</span></span>](../../../docs/framework/misc/code-access-security.md)  
 [<span data-ttu-id="bdb65-323">ClickOnce 安全和部署</span><span class="sxs-lookup"><span data-stu-id="bdb65-323">ClickOnce Security and Deployment</span></span>](/visualstudio/deployment/clickonce-security-and-deployment)  
 [<span data-ttu-id="bdb65-324">XAML 概述 (WPF)</span><span class="sxs-lookup"><span data-stu-id="bdb65-324">XAML Overview (WPF)</span></span>](../../../docs/framework/wpf/advanced/xaml-overview-wpf.md)
