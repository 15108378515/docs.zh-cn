---
title: "创建复合 UI 基于微服务，包括 visual UI 形状和布局由多个微服务生成"
description: "为容器化的.NET 应用程序的.NET 微服务体系结构 |创建复合 UI 基于微服务，包括 visual UI 形状和布局由多个微服务生成"
keywords: "Docker, 微服务, ASP.NET, 容器"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 4b32fed5eb0de02b01665efa4368eb83e3fda08d
ms.sourcegitcommit: e99dfadbca1992c187179b6a3b42bef44534ebb6
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/01/2017
---
# <a name="creating-composite-ui-based-on-microservices-including-visual-ui-shape-and-layout-generated-by-multiple-microservices"></a><span data-ttu-id="5b54b-104">创建复合 UI 基于微服务，包括 visual UI 形状和布局由多个微服务生成</span><span class="sxs-lookup"><span data-stu-id="5b54b-104">Creating composite UI based on microservices, including visual UI shape and layout generated by multiple microservices</span></span>

<span data-ttu-id="5b54b-105">微服务体系结构通常开头服务器端处理数据和逻辑。</span><span class="sxs-lookup"><span data-stu-id="5b54b-105">Microservices architecture often starts with the server side handling data and logic.</span></span> <span data-ttu-id="5b54b-106">但是，更高级的方法是设计用户界面基于微服务以及你的应用程序。</span><span class="sxs-lookup"><span data-stu-id="5b54b-106">However, a more advanced approach is to design your application UI based on microservices as well.</span></span> <span data-ttu-id="5b54b-107">这意味着具有由微服务，而不只是使用微服务的整体的客户端应用和的服务器上的微服务是一个复合 UI。</span><span class="sxs-lookup"><span data-stu-id="5b54b-107">That means having a composite UI produced by the microservices, instead of having microservices on the server and just a monolithic client app consuming the microservices.</span></span> <span data-ttu-id="5b54b-108">使用此方法时，生成微服务可以完成，但逻辑和可视表示形式。</span><span class="sxs-lookup"><span data-stu-id="5b54b-108">With this approach, the microservices you build can be complete with both logic and visual representation.</span></span>

<span data-ttu-id="5b54b-109">图 4-20 演示仅使用从单一的客户端应用程序的微服务的更简单的方法。</span><span class="sxs-lookup"><span data-stu-id="5b54b-109">Figure 4-20 shows the simpler approach of just consuming microservices from a monolithic client application.</span></span> <span data-ttu-id="5b54b-110">当然，你可以生成的 HTML 和 JavaScript 之间的 ASP.NET MVC 服务。</span><span class="sxs-lookup"><span data-stu-id="5b54b-110">Of course, you could have an ASP.NET MVC service in between producing the HTML and JavaScript.</span></span> <span data-ttu-id="5b54b-111">图是简化形式，用于突出显示具有单个 （整体） 客户端 UI 使用微服务，只需专注在逻辑和数据而不在 UI 形状 （HTML 和 JavaScript）。</span><span class="sxs-lookup"><span data-stu-id="5b54b-111">The figure is a simplification that highlights that you have a single (monolithic) client UI consuming the microservices, which just focus on logic and data and not on the UI shape (HTML and JavaScript).</span></span>

![](./media/image20.png)

<span data-ttu-id="5b54b-112">**图 4-20**。</span><span class="sxs-lookup"><span data-stu-id="5b54b-112">**Figure 4-20**.</span></span> <span data-ttu-id="5b54b-113">使用后端微服务整体 UI 应用程序</span><span class="sxs-lookup"><span data-stu-id="5b54b-113">A monolithic UI application consuming back-end microservices</span></span>

<span data-ttu-id="5b54b-114">与此相反，复合 UI 精确地生成并由微服务本身。</span><span class="sxs-lookup"><span data-stu-id="5b54b-114">In contrast, a composite UI is precisely generated and composed by the microservices themselves.</span></span> <span data-ttu-id="5b54b-115">某些微服务驱动器 UI 的特定区域的可视化形状。</span><span class="sxs-lookup"><span data-stu-id="5b54b-115">Some of the microservices drive the visual shape of specific areas of the UI.</span></span> <span data-ttu-id="5b54b-116">主要区别是，具有客户端 UI 组件 （例如 TS 类） 基于模板，并且这些模板数据调整 UI ViewModel 来自每个微服务。</span><span class="sxs-lookup"><span data-stu-id="5b54b-116">The key difference is that you have client UI components (TS classes, for example) based on templates, and the data-shaping-UI ViewModel for those templates comes from each microservice.</span></span>

<span data-ttu-id="5b54b-117">在客户端应用程序启动时，每个客户端 UI 组件 （例如 TypeScript 类） 将自身注册到能够针对给定方案提供 Viewmodel 基础结构微服务。</span><span class="sxs-lookup"><span data-stu-id="5b54b-117">At client application start-up time, each of the client UI components (TypeScript classes, for example) registers itself with an infrastructure microservice capable of providing ViewModels for a given scenario.</span></span> <span data-ttu-id="5b54b-118">如果 microservice 更改形状，UI 会也更改。</span><span class="sxs-lookup"><span data-stu-id="5b54b-118">If the microservice changes the shape, the UI changes also.</span></span>

<span data-ttu-id="5b54b-119">图 4-21 显示此复合 UI 方法的版本。</span><span class="sxs-lookup"><span data-stu-id="5b54b-119">Figure 4-21 shows a version of this composite UI approach.</span></span> <span data-ttu-id="5b54b-120">这简化，因为你可能具有其他聚合精细部分基于不同的技术的微服务 — 它依赖于生成的传统 web 方法 (ASP.NET MVC) 或 SPA （单页面应用程序）。</span><span class="sxs-lookup"><span data-stu-id="5b54b-120">This is simplified, because you might have other microservices that are aggregating granular parts based on different techniques—it depends on whether you are building a traditional web approach (ASP.NET MVC) or an SPA (Single Page Application).</span></span>

![](./media/image21.png)

<span data-ttu-id="5b54b-121">**图 4-21**。</span><span class="sxs-lookup"><span data-stu-id="5b54b-121">**Figure 4-21**.</span></span> <span data-ttu-id="5b54b-122">复合 UI 应用程序后端微服务受影响的示例</span><span class="sxs-lookup"><span data-stu-id="5b54b-122">Example of a composite UI application shaped by back-end microservices</span></span>

<span data-ttu-id="5b54b-123">每个这些 UI 组合微服务将类似于小 API 网关。</span><span class="sxs-lookup"><span data-stu-id="5b54b-123">Each of those UI composition microservices would be similar to a small API Gateway.</span></span> <span data-ttu-id="5b54b-124">但在这种情况下每负责较小的 UI 区域。</span><span class="sxs-lookup"><span data-stu-id="5b54b-124">But in this case each is responsible for a small UI area.</span></span>

<span data-ttu-id="5b54b-125">由微服务驱动的复合 UI 方法可以将更具挑战性或太快，具体取决于哪些 UI 技术正在使用。</span><span class="sxs-lookup"><span data-stu-id="5b54b-125">A composite UI approach that is driven by microservices can be more challenging or less so, depending on what UI technologies you are using.</span></span> <span data-ttu-id="5b54b-126">例如，你不将用于构建你使用用于生成 SPA 或本机移动应用程序的传统 web 应用程序使用相同的技术 （如开发可以是此方法的更具挑战性的 Xamarin 应用时）。</span><span class="sxs-lookup"><span data-stu-id="5b54b-126">For instance, you will not use the same techniques for building a traditional web application that you use for building an SPA or for native mobile app (as when developing Xamarin apps, which can be more challenging for this approach).</span></span>

<span data-ttu-id="5b54b-127">[EShopOnContainers](http://aka.ms/MicroservicesArchitecture)示例应用程序使用的整体 UI 方法有多个原因。</span><span class="sxs-lookup"><span data-stu-id="5b54b-127">The [eShopOnContainers](http://aka.ms/MicroservicesArchitecture) sample application uses the monolithic UI approach for multiple reasons.</span></span> <span data-ttu-id="5b54b-128">首先，它是微服务和容器的简介。</span><span class="sxs-lookup"><span data-stu-id="5b54b-128">First, it is an introduction to microservices and containers.</span></span> <span data-ttu-id="5b54b-129">复合 UI 更高级，但也需要进一步的设计和开发 UI 时的复杂性。</span><span class="sxs-lookup"><span data-stu-id="5b54b-129">A composite UI is more advanced but also requires further complexity when designing and developing the UI.</span></span> <span data-ttu-id="5b54b-130">其次，eShopOnContainers 还提供了基于 Xamarin，可能会使其更复杂的客户端 C 的本机移动应用\#端。</span><span class="sxs-lookup"><span data-stu-id="5b54b-130">Second, eShopOnContainers also provides a native mobile app based on Xamarin, which would make it more complex on the client C\# side.</span></span>

<span data-ttu-id="5b54b-131">但是，我们鼓励你可以使用以下引用若要了解有关复合 UI 基于微服务的详细信息。</span><span class="sxs-lookup"><span data-stu-id="5b54b-131">However, we encourage you to use the following references to learn more about composite UI based on microservices.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="5b54b-132">其他资源</span><span class="sxs-lookup"><span data-stu-id="5b54b-132">Additional resources</span></span>

-   <span data-ttu-id="5b54b-133">**使用 ASP.NET (特定的 Workshop 中) 的复合 UI**
    [*http://go.particular.net/workshop-composite-ui-demo*](http://go.particular.net/workshop-composite-ui-demo)</span><span class="sxs-lookup"><span data-stu-id="5b54b-133">**Composite UI using ASP.NET (Particular’s Workshop)**
[*http://go.particular.net/workshop-composite-ui-demo*](http://go.particular.net/workshop-composite-ui-demo)</span></span>

-   <span data-ttu-id="5b54b-134">**Ruben Oostinga。微服务体系结构中的整体前端**
    [*http://blog.xebia.com/the-monolithic-frontend-in-the-microservices-architecture/*](http://blog.xebia.com/the-monolithic-frontend-in-the-microservices-architecture/)</span><span class="sxs-lookup"><span data-stu-id="5b54b-134">**Ruben Oostinga. The Monolithic Frontend in the Microservices Architecture**
[*http://blog.xebia.com/the-monolithic-frontend-in-the-microservices-architecture/*](http://blog.xebia.com/the-monolithic-frontend-in-the-microservices-architecture/)</span></span>

-   <span data-ttu-id="5b54b-135">**Mauro Servienti。更好用户界面组合的机密**
    [*https://particular.net/blog/secret-of-better-ui-composition*](https://particular.net/blog/secret-of-better-ui-composition)</span><span class="sxs-lookup"><span data-stu-id="5b54b-135">**Mauro Servienti. The secret of better UI composition**
[*https://particular.net/blog/secret-of-better-ui-composition*](https://particular.net/blog/secret-of-better-ui-composition)</span></span>

-   <span data-ttu-id="5b54b-136">**Viktor Farcic。包括到微服务的前端 Web 组件**
    [*https://technologyconversations.com/2015/08/09/including-front-end-web-components-into-microservices/*](https://technologyconversations.com/2015/08/09/including-front-end-web-components-into-microservices/)</span><span class="sxs-lookup"><span data-stu-id="5b54b-136">**Viktor Farcic. Including Front-End Web Components Into Microservices**
[*https://technologyconversations.com/2015/08/09/including-front-end-web-components-into-microservices/*](https://technologyconversations.com/2015/08/09/including-front-end-web-components-into-microservices/)</span></span>

-   <span data-ttu-id="5b54b-137">**管理微服务体系结构中的前端**\\</span><span class="sxs-lookup"><span data-stu-id="5b54b-137">**Managing Frontend in the Microservices Architecture**\\</span></span>
    [<span data-ttu-id="5b54b-138">*http://allegro.tech/2016/03/Managing-Frontend-in-the-microservices-architecture.html*</span><span class="sxs-lookup"><span data-stu-id="5b54b-138">*http://allegro.tech/2016/03/Managing-Frontend-in-the-microservices-architecture.html*</span></span>](http://allegro.tech/2016/03/Managing-Frontend-in-the-microservices-architecture.html)


>[!div class="step-by-step"]
<span data-ttu-id="5b54b-139">[以前](微服务-可寻址性-服务-registry.md) [下一步] (弹性-高的可用性-microservices.md)</span><span class="sxs-lookup"><span data-stu-id="5b54b-139">[Previous] (microservices-addressability-service-registry.md) [Next] (resilient-high-availability-microservices.md)</span></span>
