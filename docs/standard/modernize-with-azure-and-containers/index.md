---
title: "使用 Azure 云和 Windows 容器更新现有 .NET 应用程序"
description: "了解如何将现有应用程序直接迁移到 Azure 云和 Windows 容器"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/26/2017
ms.openlocfilehash: b7ef8c0e68eee3b2b4247454929e92fb175cae0c
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/21/2017
---
# <a name="modernize-existing-net-applications-with-azure-cloud-and-windows-containers-v10"></a><span data-ttu-id="852b0-103">使用 Azure 云和 Windows 容器更新现有 .NET 应用程序 (v1.0)</span><span class="sxs-lookup"><span data-stu-id="852b0-103">Modernize existing .NET applications with Azure cloud and Windows Containers (v1.0)</span></span>  

![封面图像](./media/cover.png)

<span data-ttu-id="852b0-105">发布者</span><span class="sxs-lookup"><span data-stu-id="852b0-105">PUBLISHED BY</span></span>  
<span data-ttu-id="852b0-106">Microsoft Press 和 Microsoft DevDiv</span><span class="sxs-lookup"><span data-stu-id="852b0-106">Microsoft Press and Microsoft DevDiv</span></span>  
<span data-ttu-id="852b0-107">Microsoft Corporation 的部门</span><span class="sxs-lookup"><span data-stu-id="852b0-107">Divisions of Microsoft Corporation</span></span>  
<span data-ttu-id="852b0-108">One Microsoft Way</span><span class="sxs-lookup"><span data-stu-id="852b0-108">One Microsoft Way</span></span>  
<span data-ttu-id="852b0-109">Redmond, Washington 98052-6399</span><span class="sxs-lookup"><span data-stu-id="852b0-109">Redmond, Washington 98052-6399</span></span>  

<span data-ttu-id="852b0-110">版权所有 © 2017 Microsoft Corporation</span><span class="sxs-lookup"><span data-stu-id="852b0-110">Copyright © 2017 by Microsoft Corporation</span></span>  

<span data-ttu-id="852b0-111">保留所有权利。</span><span class="sxs-lookup"><span data-stu-id="852b0-111">All rights reserved.</span></span> <span data-ttu-id="852b0-112">未经发布者书面许可，不得以任何形式或任何方式复制本书中的任何内容。</span><span class="sxs-lookup"><span data-stu-id="852b0-112">No part of the contents of this book may be reproduced in any form or by any means without the written permission of the publisher.</span></span>

<span data-ttu-id="852b0-113">本书以电子书 (e-book) 形式免费提供，可通过 Microsoft 的多个通道获得，如 <http://dot.net/architecture></span><span class="sxs-lookup"><span data-stu-id="852b0-113">This book is available for free in the form of an electronic book (e-book) available through multiple channels at Microsoft such as <http://dot.net/architecture></span></span>

<span data-ttu-id="852b0-114">若要了解本书的相关问题，请发送电子邮件至 [dotnet-architecture-ebooks-feedback@service.microsoft.com](mailto:dotnet-architecture-ebooks-feedback@service.microsoft.com?subject=Feedback%20for%20.NET%20Container%20&%20Microservices%20Architecture%20book)</span><span class="sxs-lookup"><span data-stu-id="852b0-114">If you have questions related to this book, email at [dotnet-architecture-ebooks-feedback@service.microsoft.com](mailto:dotnet-architecture-ebooks-feedback@service.microsoft.com?subject=Feedback%20for%20.NET%20Container%20&%20Microservices%20Architecture%20book)</span></span>

<span data-ttu-id="852b0-115">本书“按原样”提供，表达作者的观点和看法。</span><span class="sxs-lookup"><span data-stu-id="852b0-115">This book is provided "as-is" and expresses the author's views and opinions.</span></span> <span data-ttu-id="852b0-116">本书中表达的观点、看法和信息（包括 URL 和其他 Internet 网站引用）如有更改，恕不另行通知。</span><span class="sxs-lookup"><span data-stu-id="852b0-116">The views, opinions and information expressed in this book, including URL and other Internet website references, may change without notice.</span></span>

<span data-ttu-id="852b0-117">本书中提及的一些示例仅用于说明，纯属虚构。</span><span class="sxs-lookup"><span data-stu-id="852b0-117">Some examples depicted herein are provided for illustration only and are fictitious.</span></span> <span data-ttu-id="852b0-118">不存在任何实际关联或联系，请勿妄加推断。</span><span class="sxs-lookup"><span data-stu-id="852b0-118">No real association or connection is intended or should be inferred.</span></span>

<span data-ttu-id="852b0-119">Microsoft 和 http://www.microsoft.com 上“商标”网页列出的商标是 Microsoft 集团公司的商标。</span><span class="sxs-lookup"><span data-stu-id="852b0-119">Microsoft and the trademarks listed at http://www.microsoft.com on the "Trademarks" webpage are trademarks of the Microsoft group of companies.</span></span> <span data-ttu-id="852b0-120">所有其他标记均为其各自所有者的财产。</span><span class="sxs-lookup"><span data-stu-id="852b0-120">All other marks are property of their respective owners.</span></span>

<span data-ttu-id="852b0-121">作者:</span><span class="sxs-lookup"><span data-stu-id="852b0-121">Author:</span></span>
> <span data-ttu-id="852b0-122">**Cesar de la Torre**，Microsoft Corp. .NET 产品团队的高级项目经理。</span><span class="sxs-lookup"><span data-stu-id="852b0-122">**Cesar de la Torre**, Sr. PM, .NET Product Team, Microsoft Corp.</span></span>

<span data-ttu-id="852b0-123">参与者和审阅者：</span><span class="sxs-lookup"><span data-stu-id="852b0-123">Participants and reviewers:</span></span>
> <span data-ttu-id="852b0-124">**Scott Hunter**，Microsoft .NET 团队的合作伙伴总监项目经理</span><span class="sxs-lookup"><span data-stu-id="852b0-124">**Scott Hunter**, Partner Director PM, .NET team, Microsoft</span></span>  
> <span data-ttu-id="852b0-125">**Paul Yuknewicz**，Microsoft Visual Studio Tools 团队的主要项目经理</span><span class="sxs-lookup"><span data-stu-id="852b0-125">**Paul Yuknewicz**, Principal PM Manager, Visual Studio Tools team, Microsoft</span></span>  
> <span data-ttu-id="852b0-126">**Lisa Guthrie**，Microsoft Visual Studio Tools 团队的高级项目经理</span><span class="sxs-lookup"><span data-stu-id="852b0-126">**Lisa Guthrie**, Sr. PM, Visual Studio Tools team, Microsoft</span></span>  
> <span data-ttu-id="852b0-127">**Ankit Asthana**，Microsoft .NET 团队的主要项目经理</span><span class="sxs-lookup"><span data-stu-id="852b0-127">**Ankit Asthana**, Principal PM Manager, .NET team, Microsoft</span></span>  
> <span data-ttu-id="852b0-128">**Unai Zorrilla**，Plain Concepts 的开发者领导</span><span class="sxs-lookup"><span data-stu-id="852b0-128">**Unai Zorrilla**, Developer Lead, Plain Concepts</span></span>  
> <span data-ttu-id="852b0-129">**Javier Valero**，Grupo Solutio 的首席运营官</span><span class="sxs-lookup"><span data-stu-id="852b0-129">**Javier Valero**, Chief Operating Officer at Grupo Solutio</span></span>  

## <a name="introduction"></a><span data-ttu-id="852b0-130">介绍</span><span class="sxs-lookup"><span data-stu-id="852b0-130">Introduction</span></span>

<span data-ttu-id="852b0-131">决定更新 Web 应用程序并将它们迁移到云时，无需完全重新构建应用。</span><span class="sxs-lookup"><span data-stu-id="852b0-131">When you decide to modernize your web applications and move them to the cloud, you don't necessarily have to fully re-architect your apps.</span></span> <span data-ttu-id="852b0-132">由于成本和时间限制，使用微服务之类的高级方法来重新构建应用程序并非始终可行。</span><span class="sxs-lookup"><span data-stu-id="852b0-132">Re-architecting an application by using an advanced approach like microservices isn't always an option because of cost and time restraints.</span></span> <span data-ttu-id="852b0-133">根据应用程序的类型，也可能无需重新构建应用。</span><span class="sxs-lookup"><span data-stu-id="852b0-133">Depending on the type of application, re-architecting an app also might not be necessary.</span></span> <span data-ttu-id="852b0-134">为了优化组织云迁移策略的成本效益，必须考虑业务和应用的需求。</span><span class="sxs-lookup"><span data-stu-id="852b0-134">To optimize the cost-effectiveness of your organization's cloud migration strategy, it's important to consider the needs of your business and requirements of your apps.</span></span> <span data-ttu-id="852b0-135">需要确定：</span><span class="sxs-lookup"><span data-stu-id="852b0-135">You'll need to determine:</span></span>

-   <span data-ttu-id="852b0-136">哪些应用需要转换或重新构建。</span><span class="sxs-lookup"><span data-stu-id="852b0-136">Which apps require a transformation or re-architecting.</span></span>

-   <span data-ttu-id="852b0-137">哪些应用只需部分更新。</span><span class="sxs-lookup"><span data-stu-id="852b0-137">Which apps need to be only partially modernized.</span></span>

-   <span data-ttu-id="852b0-138">哪些应用能直接“直接迁移”到云。</span><span class="sxs-lookup"><span data-stu-id="852b0-138">Which apps you can "lift and shift" directly to the cloud.</span></span>

## <a name="about-this-guide"></a><span data-ttu-id="852b0-139">关于本指南</span><span class="sxs-lookup"><span data-stu-id="852b0-139">About this guide</span></span>

<span data-ttu-id="852b0-140">本指南主要介绍“直接迁移”方案以及现有 Microsoft .NET Framework Web 应用程序或面向服务的应用程序的初始更新。</span><span class="sxs-lookup"><span data-stu-id="852b0-140">This guide focuses primarily on "lift and shift" scenarios and initial modernization of existing Microsoft .NET Framework web or service-oriented applications.</span></span> <span data-ttu-id="852b0-141">直接迁移是这样一种操作，即在不改变应用程序的代码和基本体系结构的情况下将工作负荷移动到更新的或更现代化的环境中。</span><span class="sxs-lookup"><span data-stu-id="852b0-141">Lift and shift is the action of moving a workload to a newer or more modern environment without altering the application's code and basic architecture.</span></span>

<span data-ttu-id="852b0-142">本指南介绍如何通过更新应用程序的特定部分将现有 .NET Framework 服务器应用程序直接移动到云，而不重新构建或记录整个应用程序。</span><span class="sxs-lookup"><span data-stu-id="852b0-142">This guide describes how to move your existing .NET Framework server-applications directly to the cloud by modernizing specific areas without re-architecting or recoding entire applications.</span></span>

<span data-ttu-id="852b0-143">本指南还强调使用一组特定的新技术和方法（如，Windows 容器和 Azure 业务流程协调程序）将应用移动到云并部分更新应用的优点。</span><span class="sxs-lookup"><span data-stu-id="852b0-143">This guide also highlights the benefits of moving your apps to the cloud and partially modernizing apps by using a specific set of new technologies and approaches, like Windows Containers and orchestrators in Azure.</span></span>

## <a name="path-to-the-cloud-for-existing-net-applications"></a><span data-ttu-id="852b0-144">将现有 .NET 应用程序迁移到云的途径</span><span class="sxs-lookup"><span data-stu-id="852b0-144">Path to the cloud for existing .NET applications</span></span>

<span data-ttu-id="852b0-145">组织通常选择移动到云来使其应用程序获得敏捷性和速度。</span><span class="sxs-lookup"><span data-stu-id="852b0-145">Organizations typically choose to move to the cloud for the agility and speed they can get for their applications.</span></span> <span data-ttu-id="852b0-146">只需几分钟即可在云中设置数千台服务器 (VM)，而设置本地服务器通常需要数周。</span><span class="sxs-lookup"><span data-stu-id="852b0-146">You can set up thousands of servers (VMs) in the cloud in minutes, compared to the weeks it typically takes to set up on-premises servers.</span></span>

<span data-ttu-id="852b0-147">将应用程序迁移到云没有普遍通用的策略。</span><span class="sxs-lookup"><span data-stu-id="852b0-147">There isn't a single, one-size-fits-all strategy for migrating applications to the cloud.</span></span> <span data-ttu-id="852b0-148">合适的迁移方法由组织的需求和优先考虑事项，以及要迁移的应用程序种类决定。</span><span class="sxs-lookup"><span data-stu-id="852b0-148">The right migration strategy for you will depend on your organization's needs and priorities, and the kind of applications you are migrating.</span></span> <span data-ttu-id="852b0-149">并非所有应用程序都保证可以移动到平台即服务 ([PaaS](https://azure.microsoft.com/overview/what-is-paas/)) 模型或开发[云原生](https://www.gartner.com/doc/3181919/architect-design-cloudnative-applications)应用程序模型。</span><span class="sxs-lookup"><span data-stu-id="852b0-149">Not all applications warrant the investment of moving to a platform as a service ([PaaS](https://azure.microsoft.com/overview/what-is-paas/)) model or developing a [cloud-native](https://www.gartner.com/doc/3181919/architect-design-cloudnative-applications) application model.</span></span> <span data-ttu-id="852b0-150">许多情况下都可根据业务需求采用阶段性或递增性方法将资产移动到云。</span><span class="sxs-lookup"><span data-stu-id="852b0-150">In many cases, you can take a phased or incremental approach to invest in moving your assets to the cloud, based on your business needs.</span></span>

<span data-ttu-id="852b0-151">对于为组织带来最佳长期敏捷性和价值的新式应用程序，可以从云优化和云原生应用程序体系结构中获益。</span><span class="sxs-lookup"><span data-stu-id="852b0-151">For modern applications with the best long-term agility and value for the organization, you might benefit from investing in *cloud-optimized* and *cloud-native* application architectures.</span></span> <span data-ttu-id="852b0-152">但是，对于现有或旧版应用程序资产，关键在于用最少的时间和金钱（无需重新构建或更改代码）将应用程序移动到云，从而实现显著的效益。</span><span class="sxs-lookup"><span data-stu-id="852b0-152">However, for applications that are existing or legacy assets, the key is to spend minimal time and money (no re-architecting or code changes) while moving them to the cloud, to realize significant benefits.</span></span>

<span data-ttu-id="852b0-153">图 1-1 显示了采用递增性方法将现有 .NET 应用程序移动到云时可能使用的途径。</span><span class="sxs-lookup"><span data-stu-id="852b0-153">Figure 1-1 shows the possible paths you can take when you move existing .NET applications to the cloud in incremental phases.</span></span>

 ![现有 .NET 应用程序和服务的更新途径](./media/image1-1.png)

> <span data-ttu-id="852b0-155">**图 1-1**。</span><span class="sxs-lookup"><span data-stu-id="852b0-155">**Figure 1-1**.</span></span> <span data-ttu-id="852b0-156">现有 .NET 应用程序和服务的更新途径</span><span class="sxs-lookup"><span data-stu-id="852b0-156">Modernization paths for existing .NET applications and services</span></span>

<span data-ttu-id="852b0-157">每种迁移方法的优点和使用原因各不相同。</span><span class="sxs-lookup"><span data-stu-id="852b0-157">Each migration approach has different benefits and reasons for using it.</span></span> <span data-ttu-id="852b0-158">可以选择一种方法将应用迁移到云，也可以从多种方法中选择某些组件。</span><span class="sxs-lookup"><span data-stu-id="852b0-158">You can choose a single approach when you migrate apps to the cloud, or choose certain components from multiple approaches.</span></span> <span data-ttu-id="852b0-159">单个应用程序不限于单一的方法或成熟度状态。</span><span class="sxs-lookup"><span data-stu-id="852b0-159">Individual applications aren't limited to a single approach or maturity state.</span></span> <span data-ttu-id="852b0-160">例如，常见的混合方法将包含某些本地组件以及云中的其他组件。</span><span class="sxs-lookup"><span data-stu-id="852b0-160">For instance, a common hybrid approach would have certain on-premises components plus other components in the cloud.</span></span>

<span data-ttu-id="852b0-161">在前两个迁移级别，只能直接迁移应用程序：</span><span class="sxs-lookup"><span data-stu-id="852b0-161">At the first two migration levels, you can just lift and shift your applications:</span></span>

<span data-ttu-id="852b0-162">**级别 1：云基础结构就绪**：使用此迁移方法，只需将当前本地应用程序重新托管或移动到服务架构 ([IaaS](https://azure.microsoft.com/overview/what-is-iaas/)) 平台。</span><span class="sxs-lookup"><span data-stu-id="852b0-162">**Level 1: Cloud Infrastructure-Ready**: In this migration approach, you simply rehost or move your current on-premises applications to an infrastructure as a service ([IaaS](https://azure.microsoft.com/overview/what-is-iaas/)) platform.</span></span> <span data-ttu-id="852b0-163">应用的组成与之前基本一致，但现在可将它们部署到云中的 VM。</span><span class="sxs-lookup"><span data-stu-id="852b0-163">Your apps have almost the same composition as before, but now you deploy them to VMs in the cloud.</span></span>

<span data-ttu-id="852b0-164">**级别 2：云 DevOps 就绪**：使用此级别，在首次直接迁移后，仍然不需要重新构建或改变代码，甚至可以通过在云中运行应用获得更多好处。</span><span class="sxs-lookup"><span data-stu-id="852b0-164">**Level 2: Cloud DevOps-Ready**: At this level, after an initial lift and shift, and still without re-architecting or altering code, you can gain even more benefits from running your app in the cloud.</span></span> <span data-ttu-id="852b0-165">通过优化企业开发操作 (DevOps) 流程，可以提高应用程序的敏捷性，以实现更快交付。</span><span class="sxs-lookup"><span data-stu-id="852b0-165">You improve the agility of your applications to ship faster by refining your enterprise development operations (DevOps) processes.</span></span> <span data-ttu-id="852b0-166">这可以通过使用某种技术（如基于 Docker 引擎的 Windows 容器）实现。</span><span class="sxs-lookup"><span data-stu-id="852b0-166">You achieve this by using a technology like Windows Containers, which is based on Docker Engine.</span></span> <span data-ttu-id="852b0-167">分多个阶段部署时，容器可以消除因应用程序依赖项造成的冲突。</span><span class="sxs-lookup"><span data-stu-id="852b0-167">Containers remove the friction that's caused by application dependencies when you deploy in multiple stages.</span></span> <span data-ttu-id="852b0-168">容器还使用额外的云托管服务，这些服务与数据、监视以及持续集成/持续部署 (CI/CD) 管道相关。</span><span class="sxs-lookup"><span data-stu-id="852b0-168">Containers also use additional cloud managed services related to data, monitoring, and continuous integration/continuous deployment (CI/CD) pipelines.</span></span>

<span data-ttu-id="852b0-169">第三个成熟度级别是云中的最终目标，但对于很多应用它是可选的，并不是本指南的主要重点：</span><span class="sxs-lookup"><span data-stu-id="852b0-169">The third level of maturity is the ultimate goal in the cloud, but it's optional for many apps and not the main focus of this guide:</span></span>

<span data-ttu-id="852b0-170">**级别 3：云优化**：此迁移方法通常由业务需求驱动，目的是更新任务关键型应用程序。</span><span class="sxs-lookup"><span data-stu-id="852b0-170">**Level 3: Cloud-Optimized**: This migration approach typically is driven by business need and targets modernizing your mission-critical applications.</span></span> <span data-ttu-id="852b0-171">在此级别，使用 PaaS 服务将应用移动到 PaaS 计算平台。</span><span class="sxs-lookup"><span data-stu-id="852b0-171">At this level, you use PaaS services to move your apps to PaaS computing platforms.</span></span> <span data-ttu-id="852b0-172">实现[云原生](https://www.gartner.com/doc/3181919/architect-design-cloudnative-applications)应用程序和微服务体系结构，以改进应用程序，使其具有长期的敏捷性并扩展至新的限制。</span><span class="sxs-lookup"><span data-stu-id="852b0-172">You implement [cloud-native](https://www.gartner.com/doc/3181919/architect-design-cloudnative-applications) applications and microservices architecture to evolve applications with long-term agility, and to scale to new limits.</span></span> <span data-ttu-id="852b0-173">此类更新通常需要专门针对云进行构建。</span><span class="sxs-lookup"><span data-stu-id="852b0-173">This type of modernization usually requires architecting specifically for the cloud.</span></span> <span data-ttu-id="852b0-174">通常必须编写新代码，尤其是移动到基于云原生应用程序和微服务的模型时。</span><span class="sxs-lookup"><span data-stu-id="852b0-174">New code often must be written, especially when you move to cloud-native application and microservice-based models.</span></span> <span data-ttu-id="852b0-175">此方法有助于获得一些益处，这些益处在单片和本地应用程序环境中很难实现。</span><span class="sxs-lookup"><span data-stu-id="852b0-175">This approach can help you gain benefits that are difficult to achieve in your monolithic and on-premises application environment.</span></span>

<span data-ttu-id="852b0-176">表 1-1 介绍了选择每种迁移或更新方法的主要优点和原因。</span><span class="sxs-lookup"><span data-stu-id="852b0-176">Table 1-1 describes the main benefits of and reasons for choosing each migration or modernization approach.</span></span>

> | <span data-ttu-id="852b0-177">**云基础结构就绪**</span><span class="sxs-lookup"><span data-stu-id="852b0-177">**Cloud Infrastructure-Ready**</span></span> <br /> <span data-ttu-id="852b0-178">*直接迁移*</span><span class="sxs-lookup"><span data-stu-id="852b0-178">*Lift and shift*</span></span> | <span data-ttu-id="852b0-179">**云 DevOps 就绪**</span><span class="sxs-lookup"><span data-stu-id="852b0-179">**Cloud DevOps-Ready**</span></span> <br /> <span data-ttu-id="852b0-180">*直接迁移*</span><span class="sxs-lookup"><span data-stu-id="852b0-180">*Lift and shift*</span></span> | <span data-ttu-id="852b0-181">**云优化** *更新/重构/重写*</span><span class="sxs-lookup"><span data-stu-id="852b0-181">**Cloud-Optimized** *Modernize/refactor/rewrite*</span></span> |
> |---|---|---|
> | <span data-ttu-id="852b0-182">**应用程序的计算目标**</span><span class="sxs-lookup"><span data-stu-id="852b0-182">**Application's compute target**</span></span> |
> | <span data-ttu-id="852b0-183">部署到 Azure 中 VM 的应用程序</span><span class="sxs-lookup"><span data-stu-id="852b0-183">Applications deployed to VMs in Azure</span></span> | <span data-ttu-id="852b0-184">部署到 VM、Azure Service Fabric 或 Azure 容器服务（即 Kubernetes）的容器化单片或 N 层应用</span><span class="sxs-lookup"><span data-stu-id="852b0-184">Containerized monolithic or N-Tier apps deployed to VMs, Azure Service Fabric, or Azure Container Service (that is, Kubernetes)</span></span> | <span data-ttu-id="852b0-185">Azure 应用服务、Azure Service Fabric、Azure 容器服务（即 Kubernetes）中基于 PaaS 的容器化微服务或常规应用程序</span><span class="sxs-lookup"><span data-stu-id="852b0-185">Containerized microservices or regular applications based on PaaS on Azure App Service, Azure Service Fabric, Azure Container Service (that is, Kubernetes)</span></span> |
> | <span data-ttu-id="852b0-186">**数据目标**</span><span class="sxs-lookup"><span data-stu-id="852b0-186">**Data target**</span></span> |
> | <span data-ttu-id="852b0-187">VM 中的 SQL 或任何关系数据库</span><span class="sxs-lookup"><span data-stu-id="852b0-187">SQL or any relational database on a VM</span></span> | <span data-ttu-id="852b0-188">Azure SQL 数据库托管实例</span><span class="sxs-lookup"><span data-stu-id="852b0-188">Azure SQL Database Managed Instance</span></span> | <span data-ttu-id="852b0-189">Azure SQL 数据库、Azure Cosmos DB 或其他 NoSQL</span><span class="sxs-lookup"><span data-stu-id="852b0-189">Azure SQL Database, Azure Cosmos DB, or other NoSQL</span></span> |
> | <span data-ttu-id="852b0-190">**优点**</span><span class="sxs-lookup"><span data-stu-id="852b0-190">**Advantages**</span></span>|
> | <li><span data-ttu-id="852b0-191">无需重新构建，无需编写新代码</span><span class="sxs-lookup"><span data-stu-id="852b0-191">No re-architecting, no new code</span></span> <li> <span data-ttu-id="852b0-192">需要的工作量最少，实现快速迁移</span><span class="sxs-lookup"><span data-stu-id="852b0-192">Least effort for quick migration</span></span> <li> <span data-ttu-id="852b0-193">Azure 中支持最小公分母</span><span class="sxs-lookup"><span data-stu-id="852b0-193">Least-common denominator supported in Azure</span></span> <li> <span data-ttu-id="852b0-194">保证基本可用性</span><span class="sxs-lookup"><span data-stu-id="852b0-194">Basic availability guarantees</span></span> <li> <span data-ttu-id="852b0-195">移动到云后，更容易更新</span><span class="sxs-lookup"><span data-stu-id="852b0-195">After moving to the cloud, it's easier to modernize even more</span></span> | <li><span data-ttu-id="852b0-196">无需重新构建，无需编写新代码</span><span class="sxs-lookup"><span data-stu-id="852b0-196">No re-architecting, no new code</span></span> <li> <span data-ttu-id="852b0-197">容器在 VM 中增加了较少的工作量</span><span class="sxs-lookup"><span data-stu-id="852b0-197">Containers offer small incremental effort over VMs</span></span> <li> <span data-ttu-id="852b0-198">由于容器的原因，改进了部署和 DevOps 发布敏捷性</span><span class="sxs-lookup"><span data-stu-id="852b0-198">Improved deployment and DevOps agility to release because of containers</span></span> <li> <span data-ttu-id="852b0-199">增加了密度，降低了部署成本</span><span class="sxs-lookup"><span data-stu-id="852b0-199">Increased density and lower deployment costs</span></span> <li> <span data-ttu-id="852b0-200">应用的可移植性和依赖项</span><span class="sxs-lookup"><span data-stu-id="852b0-200">Portability of apps and dependencies</span></span> <li> <span data-ttu-id="852b0-201">通过 Azure 容器服务（或 Kubernetes）和 Azure Service Fabric，提供高可用性和业务流程</span><span class="sxs-lookup"><span data-stu-id="852b0-201">With Azure Container Service (or Kubernetes) and Azure Service Fabric, provides high availability and orchestration</span></span> <li> <span data-ttu-id="852b0-202">Service Fabric 中的节点/VM 修补</span><span class="sxs-lookup"><span data-stu-id="852b0-202">Nodes/VM patching in Service Fabric</span></span> <li> <span data-ttu-id="852b0-203">主机目标的灵活性：Azure VM 或 VM 规模集、Azure 容器服务（或 Kubernetes）、Service Fabric 以及未来基于容器的选项</span><span class="sxs-lookup"><span data-stu-id="852b0-203">Flexibility of host targets: Azure VMs or VM scale sets, Azure Container Service (or Kubernetes), Service Fabric, and future container-based choices</span></span> | <li><span data-ttu-id="852b0-204">需要针对云进行构建、重构以及编写新代码</span><span class="sxs-lookup"><span data-stu-id="852b0-204">Architect for the cloud, refactor, new code needed</span></span> <li> <span data-ttu-id="852b0-205">微服务云原生方法</span><span class="sxs-lookup"><span data-stu-id="852b0-205">Microservices cloud-native approaches</span></span> <li> <span data-ttu-id="852b0-206">新的 Web 应用、单片、N 层、云复原和云优化</span><span class="sxs-lookup"><span data-stu-id="852b0-206">New web apps, monolithic, N-Tier, cloud-resilient, and cloud-optimized</span></span> <li> <span data-ttu-id="852b0-207">完全托管服务</span><span class="sxs-lookup"><span data-stu-id="852b0-207">Fully managed services</span></span> <li> <span data-ttu-id="852b0-208">自动修补</span><span class="sxs-lookup"><span data-stu-id="852b0-208">Automatic patching</span></span> <li> <span data-ttu-id="852b0-209">优化了规模</span><span class="sxs-lookup"><span data-stu-id="852b0-209">Optimized for scale</span></span> <li> <span data-ttu-id="852b0-210">通过子系统优化了自主敏捷性</span><span class="sxs-lookup"><span data-stu-id="852b0-210">Optimized for autonomous agility by subsystem</span></span> <li> <span data-ttu-id="852b0-211">基于部署和 DevOps</span><span class="sxs-lookup"><span data-stu-id="852b0-211">Built on deployment and DevOps</span></span> <li> <span data-ttu-id="852b0-212">增强了 DevOps，如槽和部署策略</span><span class="sxs-lookup"><span data-stu-id="852b0-212">Enhanced DevOps, like slots and deployment strategies</span></span> <li> <span data-ttu-id="852b0-213">PaaS 和业务流程协调程序目标：Azure 应用服务、Azure 容器服务（或 Kubernetes）、Azure Service Fabric 以及未来基于容器的 PaaS</span><span class="sxs-lookup"><span data-stu-id="852b0-213">PaaS and orchestrator targets: Azure App Service, Azure Container Service (or Kubernetes), Azure Service Fabric, and future container-based PaaS</span></span> |
> | <span data-ttu-id="852b0-214">**挑战**</span><span class="sxs-lookup"><span data-stu-id="852b0-214">**Challenges**</span></span> |
> | <li> <span data-ttu-id="852b0-215">除了转移运营费用或关闭数据中心之外，云价值较小</span><span class="sxs-lookup"><span data-stu-id="852b0-215">Smaller cloud value, other than shift in operating expense or closing datacenters</span></span> <li> <span data-ttu-id="852b0-216">很少托管：无 OS 或中间件修补；可能的基础架构解决方案，如 Terraform、Spinnaker 或 Puppet</span><span class="sxs-lookup"><span data-stu-id="852b0-216">Very little is managed: No OS or middleware patching; might infrastructure solutions, like Terraform, Spinnaker, or Puppet</span></span> | <li> <span data-ttu-id="852b0-217">容器化是学习曲线中一个额外的步骤，要求不可变</span><span class="sxs-lookup"><span data-stu-id="852b0-217">Containerizing is an additional step in the learning curve require immutable</span></span> | <li> <span data-ttu-id="852b0-218">可能需要重构或重写重要代码（增加了时间和预算）</span><span class="sxs-lookup"><span data-stu-id="852b0-218">Might require significant code refactoring or rewriting (increased time and budget)</span></span> |
>> <span data-ttu-id="852b0-219">**表 1-1**。</span><span class="sxs-lookup"><span data-stu-id="852b0-219">**Table 1-1.**</span></span> <span data-ttu-id="852b0-220">现有 .NET 应用程序和服务的更新途径的优势和挑战</span><span class="sxs-lookup"><span data-stu-id="852b0-220">Benefits and challenges of modernization paths for existing .NET applications and services</span></span>

### <a name="key-technologies-and-architectures-by-maturity-level"></a><span data-ttu-id="852b0-221">各成熟度级别使用的关键技术和体系结构</span><span class="sxs-lookup"><span data-stu-id="852b0-221">Key technologies and architectures by maturity level</span></span>

<span data-ttu-id="852b0-222">.NET Framework 应用程序的初始版本为 .NET Framework 1.0，该版本于 2001 年年底发布。</span><span class="sxs-lookup"><span data-stu-id="852b0-222">.NET Framework applications initially started with the .NET Framework version 1.0, which was released in late 2001.</span></span> <span data-ttu-id="852b0-223">然后，公司发布了更新的版本（如 2.0、3.5 和 .NET 4.x）。</span><span class="sxs-lookup"><span data-stu-id="852b0-223">Then, companies moved towards newer versions (such as 2.0, 3.5 and .NET 4.x).</span></span> <span data-ttu-id="852b0-224">这些应用程序中的大部分都在 Windows Server 和 Internet Information Server (IIS) 上运行，并使用关系数据库，如 SQL Server、Oracle、MySQL 或任何其他关系数据库管理系统。</span><span class="sxs-lookup"><span data-stu-id="852b0-224">Most of those applications ran on Windows Server and Internet Information Server (IIS), and used a relational database, like SQL Server, Oracle, MySQL or any other RDBMS.</span></span>

<span data-ttu-id="852b0-225">当今大部分现有 .NET 应用程序可能都基于 .NET Framework 4.x，甚至 .NET Framework 3.5，并使用 Web 框架，如 ASP.NET MVC、ASP.NET Web 窗体、ASP.NET Web API、Windows Communication Foundation (WCF)、ASP.NET SignalR 和 ASP.NET 网页。</span><span class="sxs-lookup"><span data-stu-id="852b0-225">Most existing .NET applications might nowadays be based on .NET Framework 4.x, or even on .NET Framework 3.5, and use web frameworks like ASP.NET MVC, ASP.NET Web Forms, ASP.NET Web API, Windows Communication Foundation (WCF), ASP.NET SignalR, and ASP.NET Web Pages.</span></span> <span data-ttu-id="852b0-226">这些既定的 .NET Framework 技术都依赖于 Windows。</span><span class="sxs-lookup"><span data-stu-id="852b0-226">These established .NET Framework technologies depend on Windows.</span></span> <span data-ttu-id="852b0-227">如果只是简单地迁移旧版应用并希望对应用程序基础结构作出最少的更改，依赖项是一项重要的考虑因素。</span><span class="sxs-lookup"><span data-stu-id="852b0-227">That dependency is important to consider if you are simply migrating legacy apps and you want to make minimal changes to your application infrastructure.</span></span>

<span data-ttu-id="852b0-228">图 1-2 显示了三个云成熟度级别中每一个级别所使用的主要技术和体系结构样式：</span><span class="sxs-lookup"><span data-stu-id="852b0-228">Figure 1-2 shows the primary technologies and architecture styles used at each of the three cloud maturity levels:</span></span>

![用于更新现有 .NET Web 应用程序的每个成熟度级别的主要技术](./media/image1-2.png)

> <span data-ttu-id="852b0-230">**图 1-2**。</span><span class="sxs-lookup"><span data-stu-id="852b0-230">**Figure 1-2.**</span></span> <span data-ttu-id="852b0-231">用于更新现有 .NET Web 应用程序的每个成熟度级别的主要技术</span><span class="sxs-lookup"><span data-stu-id="852b0-231">Primary technologies for each maturity level for modernizing existing .NET web applications</span></span>

<span data-ttu-id="852b0-232">图 1-2 强调了最常见的方案，但在体系结构方面，可能存在许多混合变体。</span><span class="sxs-lookup"><span data-stu-id="852b0-232">Figure 1-2 highlights the most common scenarios, but many hybrid and mixed variations are possible when it comes to architecture.</span></span> <span data-ttu-id="852b0-233">例如，成熟度模型不仅适用于现有 Web 应用的单片体系结构，还适用于服务方向、N 层以及其他体系结构样式变体。</span><span class="sxs-lookup"><span data-stu-id="852b0-233">For example, the maturity models apply not only to monolithic architectures in existing web apps, but also to service orientation, N-Tier, and other architecture style variations.</span></span>

<span data-ttu-id="852b0-234">更新流程中的每个成熟度级别与以下关键技术和方法相关：</span><span class="sxs-lookup"><span data-stu-id="852b0-234">Each maturity level in the modernization process is associated with the following key technologies and approaches:</span></span>

-   <span data-ttu-id="852b0-235">**云基础结构就绪**（重新托管或基本直接迁移）：作为第一步，很多组织只想快速执行云迁移策略。</span><span class="sxs-lookup"><span data-stu-id="852b0-235">**Cloud Infrastructure-Ready** (rehost or basic lift and shift): As a first step, many organizations want only to quickly execute a cloud-migration strategy.</span></span> <span data-ttu-id="852b0-236">在这种情况下，只是重新托管应用程序。</span><span class="sxs-lookup"><span data-stu-id="852b0-236">In this case, applications are simply rehosted.</span></span> <span data-ttu-id="852b0-237">大多数重新托管均可使用 [Azure Migrate](https://aka.ms/azuremigrate) 自动完成，该服务提供指南、见解和机制，帮助迁移到基于 Azure 的云工具（如 [Azure Site Recovery](https://azure.microsoft.com/services/site-recovery/) 和 [Azure 数据库迁移服务](https://azure.microsoft.com/campaigns/database-migration/)）。</span><span class="sxs-lookup"><span data-stu-id="852b0-237">Most rehosting can be automated by using [Azure Migrate](https://aka.ms/azuremigrate), a service that provides the guidance, insights, and mechanisms needed to assist you in migrating to Azure based on cloud tools like [Azure Site Recovery](https://azure.microsoft.com/services/site-recovery/) and [Azure Database Migration Service](https://azure.microsoft.com/campaigns/database-migration/).</span></span> <span data-ttu-id="852b0-238">也可以手动设置重新托管，以便在将旧版应用移动到云时了解关于这些资产的基础结构详细信息。</span><span class="sxs-lookup"><span data-stu-id="852b0-238">You can also set up rehosting manually, so that you can learn infrastructure details about your assets when you move legacy apps to the cloud.</span></span> <span data-ttu-id="852b0-239">例如，可以在只做些许更改（或许只对配置做出细微更改）的情况下将应用程序移动到 Azure 中的 VM。</span><span class="sxs-lookup"><span data-stu-id="852b0-239">For example, you can move your applications to VMs in Azure with very little modification-probably with only minor configuration changes.</span></span> <span data-ttu-id="852b0-240">这种情况下的网络类似于本地环境，尤其是在 Azure 中创建虚拟网络时。</span><span class="sxs-lookup"><span data-stu-id="852b0-240">The networking in this case is similar to an on-premises environment, especially if you create virtual networks in Azure.</span></span>

-   <span data-ttu-id="852b0-241">**云 DevOps 就绪**（改进的直接迁移）：此模型进行了一些重要的部署优化，以从云获得部分显著好处，并且不需要更改应用程序的核心体系结构。</span><span class="sxs-lookup"><span data-stu-id="852b0-241">**Cloud DevOps-Ready** (improved lift and shift): This model is about making a few important deployment optimizations to gain some significant benefits from the cloud, without changing the core architecture of the application.</span></span> <span data-ttu-id="852b0-242">此处的基本步骤是对现有 .NET Framework 应用程序增加 [Windows 容器](https://docs.microsoft.com/virtualization/windowscontainers/about/) 支持。</span><span class="sxs-lookup"><span data-stu-id="852b0-242">The fundamental step here is to add [Windows Containers](https://docs.microsoft.com/virtualization/windowscontainers/about/) support to your existing .NET Framework applications.</span></span> <span data-ttu-id="852b0-243">此重要步骤（容器化）不需要触及代码，因此直接迁移的总体工作量非常少。</span><span class="sxs-lookup"><span data-stu-id="852b0-243">This important step (containerization) doesn't require touching the code, so the overall lift and shift effort is very light.</span></span> <span data-ttu-id="852b0-244">可以使用 [Image2Docker](https://github.com/docker/communitytools-image2docker-win) 或 Visual Studio 之类的工具，Visual Studio 带有适用于 [Docker](https://www.docker.com/) 的工具。</span><span class="sxs-lookup"><span data-stu-id="852b0-244">You can use tools like [Image2Docker](https://github.com/docker/communitytools-image2docker-win) or Visual Studio, with its tools for [Docker](https://www.docker.com/).</span></span> <span data-ttu-id="852b0-245">Visual Studio 自动为 ASP.NET 应用程序和 Windows 容器映像选择智能默认值。</span><span class="sxs-lookup"><span data-stu-id="852b0-245">Visual Studio automatically chooses smart defaults for ASP.NET applications and Windows Containers images.</span></span> <span data-ttu-id="852b0-246">这些工具提供快速内部循环，并提供将容器迁移到 Azure 的快速途径。</span><span class="sxs-lookup"><span data-stu-id="852b0-246">These tools offer both a rapid inner loop, and a fast path to get the containers to Azure.</span></span> <span data-ttu-id="852b0-247">部署到多个环境中时，敏捷性得到提高。</span><span class="sxs-lookup"><span data-stu-id="852b0-247">Your agility is improved when you deploy to multiple environments.</span></span> <span data-ttu-id="852b0-248">对于生产环境，可以将 Windows 容器部署到业务流程协调程序中，如 [Azure Service Fabric](https://azure.microsoft.com/services/service-fabric/) 或 [Azure 容器服务](https://azure.microsoft.com/services/container-service/)（Kubernetes、DC/OS 或 Swarm）。</span><span class="sxs-lookup"><span data-stu-id="852b0-248">Then, moving to production, you can deploy your Windows Containers to orchestrators like [Azure Service Fabric](https://azure.microsoft.com/services/service-fabric/) or [Azure Container Service](https://azure.microsoft.com/services/container-service/) (Kubernetes, DC/OS, or Swarm).</span></span> <span data-ttu-id="852b0-249">初次更新期间，还可以从云中添加资产，如使用如下工具进行监视：[Azure Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-overview)适用于应用生命周期且带 [Visual Studio Team Services](https://www.visualstudio.com/team-services/) 的 CI/CD 管道，以及 Azure 中提供的许多其他数据资源服务。</span><span class="sxs-lookup"><span data-stu-id="852b0-249">During this initial modernization, you can also add assets from the cloud, such as monitoring with tools like [Azure Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-overview); CI/CD pipelines for your app lifecycles with [Visual Studio Team Services](https://www.visualstudio.com/team-services/); and many more data resource services that are available in Azure.</span></span> <span data-ttu-id="852b0-250">例如，可以修改单片 Web 应用，该应用最初使用传统 [ASP.NET Web 窗体](https://www.asp.net/web-forms)或 [ASP.NET MVC](https://www.asp.net/mvc) 开发，但现在使用 Windows 容器部署。</span><span class="sxs-lookup"><span data-stu-id="852b0-250">For instance, you can modify a monolithic web app that was originally developed by using traditional [ASP.NET Web Forms](https://www.asp.net/web-forms) or [ASP.NET MVC](https://www.asp.net/mvc), but now you deploy it by using Windows Containers.</span></span> <span data-ttu-id="852b0-251">使用 Windows 容器时，还需要将数据迁移到 [Azure SQL 数据库托管实例](https://docs.microsoft.com/azure/sql-database/)中的数据库，但不需要更改应用程序的核心体系结构。</span><span class="sxs-lookup"><span data-stu-id="852b0-251">When you use Windows Containers, you should also migrate your data to a database in [Azure SQL Database Managed Instance](https://docs.microsoft.com/azure/sql-database/), all without changing the core architecture of your application.</span></span>

-   <span data-ttu-id="852b0-252">**云优化**：如上所述，在云中更新应用程序的最终目的是使系统基于 PaaS 平台（如 [Azure 应用服务](https://azure.microsoft.com/services/app-service/)）。</span><span class="sxs-lookup"><span data-stu-id="852b0-252">**Cloud-Optimized**: As noted, the ultimate goal when you modernize applications in the cloud is basing your system on PaaS platforms like [Azure App Service](https://azure.microsoft.com/services/app-service/).</span></span> <span data-ttu-id="852b0-253">PaaS 平台侧重于新式 Web 应用程序，并通过基于[无服务器计算](https://azure.microsoft.com/overview/serverless-computing/)的新服务和 [Azure Functions](https://azure.microsoft.com/services/functions/)之类的平台扩展应用。</span><span class="sxs-lookup"><span data-stu-id="852b0-253">PaaS platforms focus on modern web applications, and extend your apps with new services based on [serverless computing](https://azure.microsoft.com/overview/serverless-computing/) and platforms like [Azure Functions](https://azure.microsoft.com/services/functions/).</span></span> <span data-ttu-id="852b0-254">此成熟度模型中的第二个更高级的方案是关于微服务体系结构和[云原生](https://www.gartner.com/doc/3181919/architect-design-cloudnative-applications)应用程序的，它通常使用 [Azure Service Fabric](https://azure.microsoft.com/services/service-fabric/) 或 [Azure 容器服务](https://azure.microsoft.com/services/container-service/)（Kubernetes、DC/OS 或 Swarm）之类的业务流程协调程序。</span><span class="sxs-lookup"><span data-stu-id="852b0-254">The second and more advanced scenario in this maturity model is about microservices architectures and [cloud-native](https://www.gartner.com/doc/3181919/architect-design-cloudnative-applications) applications, which typically use orchestrators like [Azure Service Fabric](https://azure.microsoft.com/services/service-fabric/) or [Azure Container Service](https://azure.microsoft.com/services/container-service/) (Kubernetes, DC/OS, or Swarm).</span></span> <span data-ttu-id="852b0-255">这些业务流程协调程序尤其适用于微服务和多容器应用程序。</span><span class="sxs-lookup"><span data-stu-id="852b0-255">These orchestrators are made specifically for microservices and multi-container applications.</span></span> <span data-ttu-id="852b0-256">以上所有方法（如微服务和 PaaS）通常需要编写新代码，新代码应适用于特定的 PaaS 平台或符合特定的体系结构（如微服务）。</span><span class="sxs-lookup"><span data-stu-id="852b0-256">All these approaches (like microservices and PaaS) typically require you to write new code-code that is adapted to specific PaaS platforms, or code that aligns with specific architectures, like microservices.</span></span>

<span data-ttu-id="852b0-257">图 1-3 显示了每个成熟度级别可使用的内部技术：</span><span class="sxs-lookup"><span data-stu-id="852b0-257">Figure 1-3 shows the internal technologies that you can use for each maturity level:</span></span>

![每个更新成熟度级别可使用的内部技术](./media/image1-3.png)

> <span data-ttu-id="852b0-259">**图 1-3**。</span><span class="sxs-lookup"><span data-stu-id="852b0-259">**Figure 1-3.**</span></span> <span data-ttu-id="852b0-260">每个更新成熟度级别可使用的内部技术</span><span class="sxs-lookup"><span data-stu-id="852b0-260">Internal technologies for each modernization maturity level</span></span>

## <a name="lift-and-shift-scenarios"></a><span data-ttu-id="852b0-261">直接迁移方案</span><span class="sxs-lookup"><span data-stu-id="852b0-261">Lift and shift scenarios</span></span>

<span data-ttu-id="852b0-262">对于直接迁移，请记住，在应用程序方案中可以使用很多不同的直接迁移变体。</span><span class="sxs-lookup"><span data-stu-id="852b0-262">For lift and shift migrations, keep in mind that you can use many different variations of lift and shift in your application scenarios.</span></span> <span data-ttu-id="852b0-263">如果仅重新托管应用程序，则可能拥有类似于图 1-4 中所示的方案，在此方案中，仅对应用程序和数据库服务器使用云中的 VM。</span><span class="sxs-lookup"><span data-stu-id="852b0-263">If you only rehost your application, you might have a scenario like the one shown in Figure 1-4, where you use VMs in the cloud only for your application and for your database server.</span></span>

![云中纯 IaaS 方案的示例](./media/image1-4.png)

> <span data-ttu-id="852b0-265">**图 1-4**。</span><span class="sxs-lookup"><span data-stu-id="852b0-265">**Figure 1-4**.</span></span> <span data-ttu-id="852b0-266">云中纯 IaaS 方案的示例</span><span class="sxs-lookup"><span data-stu-id="852b0-266">Example of a pure IaaS scenario in the cloud</span></span>

<span data-ttu-id="852b0-267">你可能拥有一个纯云 DevOps 就绪应用程序，该应用程序仅使用该成熟度级别的元素。</span><span class="sxs-lookup"><span data-stu-id="852b0-267">Moving forward, you might have a pure Cloud DevOps-ready application that uses elements only from that maturity level.</span></span> <span data-ttu-id="852b0-268">或者，你可能拥有中间状态的应用程序，该应用程序同时使用云基础结构就绪级别的元素以及云 DevOps 就绪级别的其他元素（“挑选”或混合模型），如图 1-5。</span><span class="sxs-lookup"><span data-stu-id="852b0-268">Or, you might have an intermediate-state application with some elements from Cloud Infrastructure-Ready and other elements from Cloud DevOps-Ready (a "pick and choose" or mixed model), like in Figure 1-5.</span></span>

![“挑选”方案示例，使用 IaaS 数据库、DevOps 和容器化资产](./media/image1-5.png)

> <span data-ttu-id="852b0-270">**图 1-5**。</span><span class="sxs-lookup"><span data-stu-id="852b0-270">**Figure 1-5.**</span></span> <span data-ttu-id="852b0-271">“挑选”方案示例，使用 IaaS 数据库、DevOps 和容器化资产</span><span class="sxs-lookup"><span data-stu-id="852b0-271">Example "pick and choose" scenario, with database on IaaS, DevOps, and containerization assets</span></span>

<span data-ttu-id="852b0-272">对于要迁移的许多现有 .NET Framework 应用程序而言，理想的方案是迁移到云 DevOps 就绪应用程序，以实现事半功倍。</span><span class="sxs-lookup"><span data-stu-id="852b0-272">Next, as the ideal scenario for many existing .NET Framework applications to migrate, you could migrate to a Cloud DevOps-Ready application, to get big benefits from little work.</span></span> <span data-ttu-id="852b0-273">此方法还设置了云优化，作为未来可能的步骤。</span><span class="sxs-lookup"><span data-stu-id="852b0-273">This approach also sets you up for cloud optimization as a possible future step.</span></span> <span data-ttu-id="852b0-274">图 1-6 显示了一个示例。</span><span class="sxs-lookup"><span data-stu-id="852b0-274">Figure 1-6 shows an example.</span></span>

![云 DevOps 就绪应用方案示例，使用 Windows 容器和托管服务](./media/image1-6.png)

> <span data-ttu-id="852b0-276">**图 1-6**。</span><span class="sxs-lookup"><span data-stu-id="852b0-276">**Figure 1-6.**</span></span> <span data-ttu-id="852b0-277">云 DevOps 就绪应用方案示例，使用 Windows 容器和托管服务</span><span class="sxs-lookup"><span data-stu-id="852b0-277">Example Cloud DevOps-Ready apps scenario, with Windows Containers and managed services</span></span>

<span data-ttu-id="852b0-278">你可以通过为特定方案添加若干微服务来扩展现有的云 DevOps 就绪应用程序。</span><span class="sxs-lookup"><span data-stu-id="852b0-278">Going even further, you could extend your existing Cloud DevOps-Ready application by adding a few microservices for specific scenarios.</span></span> <span data-ttu-id="852b0-279">这会将你部分移动到云优化模型中的云原生级别，当前指南不重点介绍此部分。</span><span class="sxs-lookup"><span data-stu-id="852b0-279">This would move you partially to the level of cloud-native in the Cloud-Optimized model, which is not the focus of the present guidance.</span></span>


## <a name="what-this-guide-does-not-cover"></a><span data-ttu-id="852b0-280">本指南未涵盖的内容</span><span class="sxs-lookup"><span data-stu-id="852b0-280">What this guide does not cover</span></span>

<span data-ttu-id="852b0-281">本指南涵盖了一小部分特定的示例方案，如图 1-7 所示。</span><span class="sxs-lookup"><span data-stu-id="852b0-281">This guide covers a specific subset of the example scenarios, as shown in Figure 1-7.</span></span> <span data-ttu-id="852b0-282">本指南仅着重介绍直接迁移方案，最终着重介绍云 DevOps 就绪模型。</span><span class="sxs-lookup"><span data-stu-id="852b0-282">This guide focuses only on lift and shift scenarios, and ultimately, on the Cloud DevOps-Ready model.</span></span> <span data-ttu-id="852b0-283">在云 DevOps 就绪模型中，.NET Framework 应用程序使用 Windows 容器以及额外的组件（如监视和 CI/CD 管道）进行更新。</span><span class="sxs-lookup"><span data-stu-id="852b0-283">In the Cloud DevOps-Ready model, a .NET Framework application is modernized by using Windows Containers, plus additional components like monitoring and CI/CD pipelines.</span></span> <span data-ttu-id="852b0-284">每个组件都是确保将应用程序更快地、敏捷地部署到云的基础。</span><span class="sxs-lookup"><span data-stu-id="852b0-284">Each component is fundamental to deploying applications to the cloud, faster, and with agility.</span></span>

![直接迁移并初次更新到云 DevOps 就绪应用程序](./media/image1-7.png)

> <span data-ttu-id="852b0-286">**图 1-7**</span><span class="sxs-lookup"><span data-stu-id="852b0-286">**Figure 1-7.**</span></span> <span data-ttu-id="852b0-287">直接迁移并初次更新到云 DevOps 就绪应用程序</span><span class="sxs-lookup"><span data-stu-id="852b0-287">Lift and shift and initial modernization to Cloud DevOps-Ready applications</span></span>

<span data-ttu-id="852b0-288">本指南的重点具有一定的针对性。</span><span class="sxs-lookup"><span data-stu-id="852b0-288">The focus of this guide is specific.</span></span> <span data-ttu-id="852b0-289">本指南介绍了直接迁移现有 .NET 应用程序而不重新构建和更改代码的途径。</span><span class="sxs-lookup"><span data-stu-id="852b0-289">We show you the path you can take to achieve a lift and shift of your existing .NET applications, without re-architecting, and with no code changes.</span></span> <span data-ttu-id="852b0-290">从根本上讲，介绍了如何使应用程序成为云 DevOps 就绪应用程序。</span><span class="sxs-lookup"><span data-stu-id="852b0-290">Ultimately, we show you how to make your application Cloud DevOps-Ready.</span></span>

<span data-ttu-id="852b0-291">本指南不介绍如何使用云原生应用程序，例如，如何改进到微服务体系结构。</span><span class="sxs-lookup"><span data-stu-id="852b0-291">This guide doesn't show you how to work with cloud-native applications, such as how to evolve to a microservices architectures.</span></span> <span data-ttu-id="852b0-292">若要重新构建应用程序或创建基于微服务的全新应用程序，请参阅电子书 [.NET 微服务：适用于容器化 .NET 应用程序的体系结构](https://aka.ms/microservicesebook)。</span><span class="sxs-lookup"><span data-stu-id="852b0-292">To re-architect your applications or to create brand-new applications that are based on microservices, see the e-book [.NET Microservices: Architecture for containerized .NET applications](https://aka.ms/microservicesebook).</span></span>

### <a name="additional-resources"></a><span data-ttu-id="852b0-293">其他资源</span><span class="sxs-lookup"><span data-stu-id="852b0-293">Additional resources</span></span>

-   <span data-ttu-id="852b0-294">**使用 Microsoft 平台和工具容器化 Docker 应用程序生命周期**（可下载电子书）：[*https://aka.ms/dockerlifecycleebook*](https://aka.ms/dockerlifecycleebook)</span><span class="sxs-lookup"><span data-stu-id="852b0-294">**Containerized Docker application lifecycle with Microsoft platform and tools** (downloadable e-book): [*https://aka.ms/dockerlifecycleebook*](https://aka.ms/dockerlifecycleebook)</span></span>

-   <span data-ttu-id="852b0-295">**.NET 微服务：适用于容器化 .NET 应用程序的体系结构**（可下载电子书）：[*https://aka.ms/microservicesebook*](https://aka.ms/microservicesebook)</span><span class="sxs-lookup"><span data-stu-id="852b0-295">**.NET Microservices: Architecture for containerized .NET applications** (downloadable e-book): [*https://aka.ms/microservicesebook*](https://aka.ms/microservicesebook)</span></span>

-   <span data-ttu-id="852b0-296">**使用 ASP.NET Core 和 Azure 构建新式 Web 应用程序**（可下载电子书）：[https://aka.ms/webappebook](https://aka.ms/webappebook)</span><span class="sxs-lookup"><span data-stu-id="852b0-296">**Architecting modern web applications with ASP.NET Core and Azure** (downloadable e-book): [*https://aka.ms/webappebook*](https://aka.ms/webappebook)</span></span>

## <a name="who-should-use-this-guide"></a><span data-ttu-id="852b0-297">本指南的目标读者</span><span class="sxs-lookup"><span data-stu-id="852b0-297">Who should use this guide</span></span>

<span data-ttu-id="852b0-298">本指南适用于以下开发者和解决方案架构师：希望更新基于 .NET Framework 的现有 ASP.NET 应用程序，以提高交付和发布应用程序的敏捷性。</span><span class="sxs-lookup"><span data-stu-id="852b0-298">We wrote this guide for developers and solution architects who want to modernize existing ASP.NET applications that are based on the .NET Framework, for improved agility in shipping and releasing applications.</span></span>

<span data-ttu-id="852b0-299">本指南可能也对技术决策者有帮助，例如希望大概了解使用 Windows 容器和使用 Microsoft Azure 部署到云可以获得哪些好处的企业架构师或开发负责人/主管。</span><span class="sxs-lookup"><span data-stu-id="852b0-299">You also might find this guide useful if you are a technical decision maker, such as an enterprise architect or a development lead/director who just wants an overview of the benefits that you can get by using Windows Containers, and by deploying to the cloud when using Microsoft Azure.</span></span>

## <a name="how-to-use-this-guide"></a><span data-ttu-id="852b0-300">如何使用本指南</span><span class="sxs-lookup"><span data-stu-id="852b0-300">How to use this guide</span></span>

<span data-ttu-id="852b0-301">本指南解释了需要更新现有应用程序的原因，以及使用 Windows 容器将应用移动到云能获得的具体好处。</span><span class="sxs-lookup"><span data-stu-id="852b0-301">This guide addresses the "why"-why you might want to modernize your existing applications, and the specific benefits you get from using Windows Containers when you move your apps to the cloud.</span></span> <span data-ttu-id="852b0-302">本指南前几章的内容适用于架构师和技术决策者，他们只需大概了解，不需要实现和技术分步细节。</span><span class="sxs-lookup"><span data-stu-id="852b0-302">The content in the first few chapters of the guide is designed for architects and technical decision makers who want an overview, but who don't need to focus on implementation and technical, step-by-step details.</span></span>

<span data-ttu-id="852b0-303">本指南最后一章介绍重点针对特定部署方案的多个演练。</span><span class="sxs-lookup"><span data-stu-id="852b0-303">The last chapter of this guide introduces multiple walkthroughs that focus on specific deployment scenarios.</span></span> <span data-ttu-id="852b0-304">本指南提供了简要的演练版本，概况各种方案并突出其优点。</span><span class="sxs-lookup"><span data-stu-id="852b0-304">In this guide, we offer shorter versions of the walkthroughs, to summarize the scenarios and highlight their benefits.</span></span> <span data-ttu-id="852b0-305">完整演练深入到了设置和实现细节，并作为一组 [Wiki 文章](https://github.com/dotnet-architecture/eShopModernizing/wiki)在相同的公共 [GitHub 存储库](https://github.com/dotnet-architecture/eShopModernizing)中发布，该存储库中还存放着相关示例应用（将在下一节讨论）。</span><span class="sxs-lookup"><span data-stu-id="852b0-305">The full walkthroughs drill down into setup and implementation details, and are published as a set of [wiki posts](https://github.com/dotnet-architecture/eShopModernizing/wiki) in the same public [GitHub repo](https://github.com/dotnet-architecture/eShopModernizing) where related sample apps reside (discussed in the next section).</span></span> <span data-ttu-id="852b0-306">关注实现细节的开发者和架构师将对最后一章以及 GitHub 上的分步 Wiki 演练更感兴趣。</span><span class="sxs-lookup"><span data-stu-id="852b0-306">The last chapter and the step-by-step wiki walkthroughs on GitHub will be of more interest to developers and architects who want to focus on implementation details.</span></span>

## <a name="sample-apps-for-modernizing-legacy-apps-eshopmodernizing"></a><span data-ttu-id="852b0-307">用于更新旧版应用的示例应用：eShopModernizing</span><span class="sxs-lookup"><span data-stu-id="852b0-307">Sample apps for modernizing legacy apps: eShopModernizing</span></span>

<span data-ttu-id="852b0-308">GitHub 上的 [EShopModernizing](https://github.com/dotnet-architecture/eShopModernizing) 存储库提供了两个示例应用程序，用以模拟旧版单片 Web 应用程序。</span><span class="sxs-lookup"><span data-stu-id="852b0-308">The [eShopModernizing](https://github.com/dotnet-architecture/eShopModernizing) repo on GitHub offers two sample applications that simulate legacy monolithic web applications.</span></span> <span data-ttu-id="852b0-309">其中一个 Web 应用使用 ASP.NET MVC 开发，另一个 Web 应用使用 ASP.NET Web 窗体开发。</span><span class="sxs-lookup"><span data-stu-id="852b0-309">One web app is developed by using ASP.NET MVC; the second web app is developed by using ASP.NET Web Forms.</span></span> <span data-ttu-id="852b0-310">这两个 Web 应用都基于传统 .NET Framework。</span><span class="sxs-lookup"><span data-stu-id="852b0-310">Both web apps are based on the traditional .NET Framework.</span></span> <span data-ttu-id="852b0-311">这些示例应用不使用 .NET Core 或 ASP.NET Core，它们是要更新的现有/旧版 .NET Framework 应用程序。</span><span class="sxs-lookup"><span data-stu-id="852b0-311">These sample apps don't use .NET Core or ASP.NET Core as they are supposed to be existing/legacy .NET Framework applications to be modernized.</span></span>

<span data-ttu-id="852b0-312">这两个示例应用都有第二个版本，该版本使用新式代码并且十分简单。</span><span class="sxs-lookup"><span data-stu-id="852b0-312">Both sample apps have a second version, with modernized code, and which are fairly straightforward.</span></span> <span data-ttu-id="852b0-313">两个应用版本之间最重要的差异是第二个版本使用 Windows 容器作为部署选项。</span><span class="sxs-lookup"><span data-stu-id="852b0-313">The most important difference between the app versions is that the second versions use Windows Containers as the deployment choice.</span></span> <span data-ttu-id="852b0-314">第二个版本中还新增了一些组件，如用于管理映像的 Azure 存储 Blobs、管理安全的 Azure Active Directory，以及用于监视和审核应用程序的 Azure Application Insights。</span><span class="sxs-lookup"><span data-stu-id="852b0-314">There also are a few additions to the second versions, like Azure Storage Blobs for managing images, Azure Active Directory for managing security, and Azure Application Insights for monitoring and auditing the applications.</span></span>

## <a name="send-us-your-feedback"></a><span data-ttu-id="852b0-315">向我们发送反馈！</span><span class="sxs-lookup"><span data-stu-id="852b0-315">Send us your feedback!</span></span>

<span data-ttu-id="852b0-316">本指南的作用是帮助你了解改进和更新现有 .NET Web 应用程序的选项。</span><span class="sxs-lookup"><span data-stu-id="852b0-316">We wrote this guide to help you understand your options for improving and modernizing existing .NET web applications.</span></span> <span data-ttu-id="852b0-317">本指南以及相关示例应用程序不断更新。</span><span class="sxs-lookup"><span data-stu-id="852b0-317">The guide and related sample applications are evolving.</span></span> <span data-ttu-id="852b0-318">欢迎你提供宝贵意见！</span><span class="sxs-lookup"><span data-stu-id="852b0-318">We welcome your feedback!</span></span> <span data-ttu-id="852b0-319">如有关于本指南的改进建议，请将其发送到 [dotnet-architecture-ebooks-feedback@service.microsoft.com](mailto:dotnet-architecture-ebooks-feedback@service.microsoft.com?subject=Feedback%20for%20.NET%20Container%20&%20Microservices%20Architecture%20book)。</span><span class="sxs-lookup"><span data-stu-id="852b0-319">If you have comments about how this guide might be more helpful, please send them to [dotnet-architecture-ebooks-feedback@service.microsoft.com](mailto:dotnet-architecture-ebooks-feedback@service.microsoft.com?subject=Feedback%20for%20.NET%20Container%20&%20Microservices%20Architecture%20book).</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="852b0-320">下一篇</span><span class="sxs-lookup"><span data-stu-id="852b0-320">Next</span></span>](lift-and-shift-existing-apps-azure-iaas.md)
